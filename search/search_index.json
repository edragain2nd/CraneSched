{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u6b22\u8fce\u4f7f\u7528 CraneSched \u6587\u6863 \u8fd9\u91cc\u662f CraneSched \u8c03\u5ea6\u7cfb\u7edf\u7684\u6587\u6863\u4e2d\u5fc3\u3002","title":"\u6b22\u8fce\u4f7f\u7528 CraneSched \u6587\u6863"},{"location":"#cranesched","text":"\u8fd9\u91cc\u662f CraneSched \u8c03\u5ea6\u7cfb\u7edf\u7684\u6587\u6863\u4e2d\u5fc3\u3002","title":"\u6b22\u8fce\u4f7f\u7528 CraneSched \u6587\u6863"},{"location":"command/cacct/","text":"cacct \u67e5\u770b\u4f5c\u4e1a\u4fe1\u606f cacct\u53ef\u4ee5\u67e5\u770b\u961f\u5217\u4e2d\u7684\u4f5c\u4e1a\u4fe1\u606f\u3002 \u67e5\u770b\u96c6\u7fa4\u4e2d\u6240\u6709\u961f\u5217\u7684\u4f5c\u4e1a\u4fe1\u606f\uff08\u5305\u62ec\u6240\u6709\u72b6\u6001\uff09\uff0c\u9ed8\u8ba4\u8f93\u51fa100\u6761\u4fe1\u606f\u3002 cacct cacct\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 TaskId \uff1a\u4f5c\u4e1a\u53f7 TaskName : \u4f5c\u4e1a\u540d Partition \uff1a\u4f5c\u4e1a\u6240\u5728\u5206\u533a Account \uff1a\u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237 AllocCPUs \uff1a\u4f5c\u4e1a\u5206\u914d\u7684CPU\u6570\u91cf State \uff1a\u4f5c\u4e1a\u72b6\u6001 ExitCode \uff1a\u4f5c\u4e1a\u72b6\u6001\u7801 \u4e3b\u8981\u53c2\u6570 -A/--account string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u7684\u6240\u5c5e\u8d26\u6237\uff0c\u6307\u5b9a\u591a\u4e2a\u8d26\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -C/--config string\uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4\u4e3a \"/etc/crane/config.yaml\") -E/--end-time string \uff1a\u6307\u5b9a\u67e5\u8be2\u8be5\u65f6\u95f4\u4e4b\u524d\u7ed3\u675f\u7684\u4f5c\u4e1a\uff0c\u4f8b\uff1acacct -E=~2023-03-14T10:00:00 -o/--format string\uff1a \u6307\u5b9a\u8f93\u51fa\u683c\u5f0f\u3002\u7531\u767e\u5206\u53f7\uff08%\uff09\u540e\u63a5\u4e00\u4e2a\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\u6807\u8bc6\u3002 \u5728 % \u548c\u683c\u5f0f\u5b57\u7b26/\u5b57\u7b26\u4e32\u4e4b\u95f4\u7528\u70b9\uff08.\uff09\u548c\u6570\u5b57\uff0c\u53ef\u6307\u5b9a\u5b57\u6bb5\u7684\u6700\u5c0f\u5bbd\u5ea6\u3002\u652f\u6301\u7684\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\uff1a %a/%Account\uff1a \u663e\u793a\u4f5c\u4e1a\u5173\u8054\u7684\u8d26\u6237 %c/%AllocCpus\uff1a \u663e\u793a\u4f5c\u4e1a\u5df2\u5206\u914d\u7684 CPU \u6570\u91cf %e/%CpuPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684 CPU \u6570\u91cf %h/%ElapsedTime\uff1a \u663e\u793a\u4f5c\u4e1a\u81ea\u542f\u52a8\u4ee5\u6765\u7684\u5df2\u7528\u65f6\u95f4 %j/%JobId\uff1a \u663e\u793a\u4f5c\u4e1a ID %k/%Comment\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5907\u6ce8 %l/%NodeList\uff1a \u663e\u793a\u4f5c\u4e1a\u6b63\u5728\u8fd0\u884c\u7684\u8282\u70b9\u5217\u8868 %m/%TimeLimit\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u65f6\u95f4\u9650\u5236 %n/%MemPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684\u5185\u5b58\u91cf %N/%NodeNum\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9\u6570\u91cf %n/%Name\uff1a \u663e\u793a\u4f5c\u4e1a\u540d\u79f0 %P/%Partition\uff1a \u663e\u793a\u4f5c\u4e1a\u8fd0\u884c\u6240\u5728\u7684\u5206\u533a %p/%Priority\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u4f18\u5148\u7ea7 %Q/%QOS \uff1a\u663e\u793a\u4f5c\u4e1a\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS\uff09\u7ea7\u522b %R/%Reason\uff1a \u663e\u793a\u4f5c\u4e1a\u6302\u8d77\u7684\u539f\u56e0 %r/%ReqNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9 %S/%StartTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f00\u59cb\u65f6\u95f4 %s/%SubmitTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u63d0\u4ea4\u65f6\u95f4 %t/%State\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f53\u524d\u72b6\u6001 %T/%JobType\uff1a \u663e\u793a\u4f5c\u4e1a\u7c7b\u578b %u/%Uid \uff1a**\u663e\u793a\u4f5c\u4e1a\u7684 UID %U/%User\uff1a \u663e\u793a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237 %x/%ExcludeNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u6392\u9664\u7684\u8282\u70b9 \u6bcf\u4e2a\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\u53ef\u7528\u5bbd\u5ea6\u8bf4\u660e\u7b26\u4fee\u6539\uff08\u5982 \"%.5j\" \uff09\u3002 \u82e5\u6307\u5b9a\u5bbd\u5ea6\uff0c\u5219\u4f1a\u88ab\u683c\u5f0f\u5316\u4e3a\u81f3\u5c11\u8fbe\u5230\u8be5\u5bbd\u5ea6\u3002 \u82e5\u683c\u5f0f\u65e0\u6548\u6216\u65e0\u6cd5\u8bc6\u522b\uff0c\u7a0b\u5e8f\u4f1a\u62a5\u9519\u5e76\u7ec8\u6b62\u3002 \u4f8b\uff1a--format \"%.5j %.20n %t\" \u4f1a\u8f93\u51fa\u4f5c\u4e1a ID\uff08\u6700\u5c0f\u5bbd\u5ea6 5\uff09\u3001\u540d\u79f0\uff08\u6700\u5c0f\u5bbd\u5ea6 20\uff09\u548c\u72b6\u6001\u3002 -F/-full \uff1a\u663e\u793a\u5b8c\u6574\u4fe1\u606f -h/--help : \u663e\u793a\u5e2e\u52a9 -j/--job string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u53f7\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u53f7\u65f6\u7528\u9017\u53f7\u9694\u5f00\u3002\u5982 -j=2,3,4 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -m/--max-lines uint32 \uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6700\u5927\u6761\u6570\u3002\u5982-m=500\u8868\u793a\u6700\u591a\u8f93\u51fa500\u884c\u67e5\u8be2\u7ed3\u679c -n/ --name string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u540d\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u540d\u65f6\u7528\u9017\u53f7\u9694\u5f00 -N/--no header \uff1a\u8f93\u51fa\u9690\u85cf\u8868\u5934 -p/--partition string \uff1a\u6307\u5b9a\u8981\u67e5\u770b\u7684\u5206\u533a\uff0c\u591a\u4e2a\u5206\u533a\u540d\u7528\u9017\u53f7\u9694\u5f00\uff0c\u9ed8\u8ba4\u4e3a\u5168\u90e8 -q/--qos string \uff1a\u6307\u5b9a\u8981\u67e5\u770b\u7684Qos\uff0c\u591a\u4e2aQos\u7528\u9017\u53f7\u9694\u5f00\uff0c\u9ed8\u8ba4\u4e3a\u5168\u90e8 -S/--start-time string \uff1a\u7b5b\u9009\u5f00\u59cb\u65f6\u95f4\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u7684\u4f5c\u4e1a\uff0c\u53ef\u4f7f\u7528\u95ed\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~2024-01-11T11:12:41 \uff09\u6216\u534a\u5f00\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~ \u6216 ~2024-01-11T11:12:41 \uff09 -t/--state string \uff1a\u6307\u5b9a\u8981\u67e5\u770b\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u652f\u6301\u7684\u72b6\u6001\uff1apending(p)\uff08\u6302\u8d77 \uff09\u3001running(r)\uff08\u8fd0\u884c\u4e2d \uff09\u3001completed(c)\uff08\u5df2\u5b8c\u6210 \uff09\u3001failed(f)\uff08\u5931\u8d25 \uff09\u3001cancelled(x)\uff08\u5df2\u53d6\u6d88 \uff09\u3001time-limit-exceeded(t)\uff08\u8d85\u65f6 \uff09\u3001all\uff08\u6240\u6709 \uff09\u3002\uff08\u9ed8\u8ba4 \u201call\u201d \uff09 -s/--submit-time string \uff1a\u7b5b\u9009\u63d0\u4ea4\u65f6\u95f4\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u7684\u4f5c\u4e1a\uff0c\u53ef\u4f7f\u7528\u95ed\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~2024-01-11T11:12:41 \uff09\u6216\u534a\u5f00\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~ \u6216 ~2024-01-11T11:12:41 \uff09 -u/--user string \uff1a\u6307\u5b9a\u67e5\u8be2\u67d0\u4e2a\u7528\u6237\u7684\u4f5c\u4e1a\uff0c\u6307\u5b9a\u591a\u4e2a\u7528\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a cacct cacct -h cacct -N cacct -S=2024-07-22T10:00:00~2024-07-24T10:00:00 cacct -E=2024-07-22T10:00:00~2024-07-24T10:00:00 cacct -j=30618,30619,30620 cacct -u=cranetest cacct -A=CraneTest cacct -m=10 cacct -p GPU cacct -n=Test_Job cacct -o=\"%j %.10n %P %a %t\" cacct -A ROOT -m 10 cacct -m 10 -j 783925,783889 -t=c -F cacct -n test cacct -q test_qos cacct -m 10 -E=2024-10-08T10:00:00~2024-10-10T110:00:00 -p CPU -t c","title":"cacct \u67e5\u770b\u4f5c\u4e1a\u4fe1\u606f"},{"location":"command/cacct/#cacct","text":"cacct\u53ef\u4ee5\u67e5\u770b\u961f\u5217\u4e2d\u7684\u4f5c\u4e1a\u4fe1\u606f\u3002 \u67e5\u770b\u96c6\u7fa4\u4e2d\u6240\u6709\u961f\u5217\u7684\u4f5c\u4e1a\u4fe1\u606f\uff08\u5305\u62ec\u6240\u6709\u72b6\u6001\uff09\uff0c\u9ed8\u8ba4\u8f93\u51fa100\u6761\u4fe1\u606f\u3002 cacct cacct\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 TaskId \uff1a\u4f5c\u4e1a\u53f7 TaskName : \u4f5c\u4e1a\u540d Partition \uff1a\u4f5c\u4e1a\u6240\u5728\u5206\u533a Account \uff1a\u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237 AllocCPUs \uff1a\u4f5c\u4e1a\u5206\u914d\u7684CPU\u6570\u91cf State \uff1a\u4f5c\u4e1a\u72b6\u6001 ExitCode \uff1a\u4f5c\u4e1a\u72b6\u6001\u7801","title":"cacct \u67e5\u770b\u4f5c\u4e1a\u4fe1\u606f"},{"location":"command/cacct/#_1","text":"-A/--account string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u7684\u6240\u5c5e\u8d26\u6237\uff0c\u6307\u5b9a\u591a\u4e2a\u8d26\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -C/--config string\uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4\u4e3a \"/etc/crane/config.yaml\") -E/--end-time string \uff1a\u6307\u5b9a\u67e5\u8be2\u8be5\u65f6\u95f4\u4e4b\u524d\u7ed3\u675f\u7684\u4f5c\u4e1a\uff0c\u4f8b\uff1acacct -E=~2023-03-14T10:00:00 -o/--format string\uff1a \u6307\u5b9a\u8f93\u51fa\u683c\u5f0f\u3002\u7531\u767e\u5206\u53f7\uff08%\uff09\u540e\u63a5\u4e00\u4e2a\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\u6807\u8bc6\u3002 \u5728 % \u548c\u683c\u5f0f\u5b57\u7b26/\u5b57\u7b26\u4e32\u4e4b\u95f4\u7528\u70b9\uff08.\uff09\u548c\u6570\u5b57\uff0c\u53ef\u6307\u5b9a\u5b57\u6bb5\u7684\u6700\u5c0f\u5bbd\u5ea6\u3002\u652f\u6301\u7684\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\uff1a %a/%Account\uff1a \u663e\u793a\u4f5c\u4e1a\u5173\u8054\u7684\u8d26\u6237 %c/%AllocCpus\uff1a \u663e\u793a\u4f5c\u4e1a\u5df2\u5206\u914d\u7684 CPU \u6570\u91cf %e/%CpuPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684 CPU \u6570\u91cf %h/%ElapsedTime\uff1a \u663e\u793a\u4f5c\u4e1a\u81ea\u542f\u52a8\u4ee5\u6765\u7684\u5df2\u7528\u65f6\u95f4 %j/%JobId\uff1a \u663e\u793a\u4f5c\u4e1a ID %k/%Comment\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5907\u6ce8 %l/%NodeList\uff1a \u663e\u793a\u4f5c\u4e1a\u6b63\u5728\u8fd0\u884c\u7684\u8282\u70b9\u5217\u8868 %m/%TimeLimit\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u65f6\u95f4\u9650\u5236 %n/%MemPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684\u5185\u5b58\u91cf %N/%NodeNum\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9\u6570\u91cf %n/%Name\uff1a \u663e\u793a\u4f5c\u4e1a\u540d\u79f0 %P/%Partition\uff1a \u663e\u793a\u4f5c\u4e1a\u8fd0\u884c\u6240\u5728\u7684\u5206\u533a %p/%Priority\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u4f18\u5148\u7ea7 %Q/%QOS \uff1a\u663e\u793a\u4f5c\u4e1a\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS\uff09\u7ea7\u522b %R/%Reason\uff1a \u663e\u793a\u4f5c\u4e1a\u6302\u8d77\u7684\u539f\u56e0 %r/%ReqNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9 %S/%StartTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f00\u59cb\u65f6\u95f4 %s/%SubmitTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u63d0\u4ea4\u65f6\u95f4 %t/%State\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f53\u524d\u72b6\u6001 %T/%JobType\uff1a \u663e\u793a\u4f5c\u4e1a\u7c7b\u578b %u/%Uid \uff1a**\u663e\u793a\u4f5c\u4e1a\u7684 UID %U/%User\uff1a \u663e\u793a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237 %x/%ExcludeNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u6392\u9664\u7684\u8282\u70b9 \u6bcf\u4e2a\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\u53ef\u7528\u5bbd\u5ea6\u8bf4\u660e\u7b26\u4fee\u6539\uff08\u5982 \"%.5j\" \uff09\u3002 \u82e5\u6307\u5b9a\u5bbd\u5ea6\uff0c\u5219\u4f1a\u88ab\u683c\u5f0f\u5316\u4e3a\u81f3\u5c11\u8fbe\u5230\u8be5\u5bbd\u5ea6\u3002 \u82e5\u683c\u5f0f\u65e0\u6548\u6216\u65e0\u6cd5\u8bc6\u522b\uff0c\u7a0b\u5e8f\u4f1a\u62a5\u9519\u5e76\u7ec8\u6b62\u3002 \u4f8b\uff1a--format \"%.5j %.20n %t\" \u4f1a\u8f93\u51fa\u4f5c\u4e1a ID\uff08\u6700\u5c0f\u5bbd\u5ea6 5\uff09\u3001\u540d\u79f0\uff08\u6700\u5c0f\u5bbd\u5ea6 20\uff09\u548c\u72b6\u6001\u3002 -F/-full \uff1a\u663e\u793a\u5b8c\u6574\u4fe1\u606f -h/--help : \u663e\u793a\u5e2e\u52a9 -j/--job string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u53f7\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u53f7\u65f6\u7528\u9017\u53f7\u9694\u5f00\u3002\u5982 -j=2,3,4 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -m/--max-lines uint32 \uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6700\u5927\u6761\u6570\u3002\u5982-m=500\u8868\u793a\u6700\u591a\u8f93\u51fa500\u884c\u67e5\u8be2\u7ed3\u679c -n/ --name string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u540d\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u540d\u65f6\u7528\u9017\u53f7\u9694\u5f00 -N/--no header \uff1a\u8f93\u51fa\u9690\u85cf\u8868\u5934 -p/--partition string \uff1a\u6307\u5b9a\u8981\u67e5\u770b\u7684\u5206\u533a\uff0c\u591a\u4e2a\u5206\u533a\u540d\u7528\u9017\u53f7\u9694\u5f00\uff0c\u9ed8\u8ba4\u4e3a\u5168\u90e8 -q/--qos string \uff1a\u6307\u5b9a\u8981\u67e5\u770b\u7684Qos\uff0c\u591a\u4e2aQos\u7528\u9017\u53f7\u9694\u5f00\uff0c\u9ed8\u8ba4\u4e3a\u5168\u90e8 -S/--start-time string \uff1a\u7b5b\u9009\u5f00\u59cb\u65f6\u95f4\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u7684\u4f5c\u4e1a\uff0c\u53ef\u4f7f\u7528\u95ed\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~2024-01-11T11:12:41 \uff09\u6216\u534a\u5f00\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~ \u6216 ~2024-01-11T11:12:41 \uff09 -t/--state string \uff1a\u6307\u5b9a\u8981\u67e5\u770b\u7684\u4f5c\u4e1a\u72b6\u6001\uff0c\u652f\u6301\u7684\u72b6\u6001\uff1apending(p)\uff08\u6302\u8d77 \uff09\u3001running(r)\uff08\u8fd0\u884c\u4e2d \uff09\u3001completed(c)\uff08\u5df2\u5b8c\u6210 \uff09\u3001failed(f)\uff08\u5931\u8d25 \uff09\u3001cancelled(x)\uff08\u5df2\u53d6\u6d88 \uff09\u3001time-limit-exceeded(t)\uff08\u8d85\u65f6 \uff09\u3001all\uff08\u6240\u6709 \uff09\u3002\uff08\u9ed8\u8ba4 \u201call\u201d \uff09 -s/--submit-time string \uff1a\u7b5b\u9009\u63d0\u4ea4\u65f6\u95f4\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u7684\u4f5c\u4e1a\uff0c\u53ef\u4f7f\u7528\u95ed\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~2024-01-11T11:12:41 \uff09\u6216\u534a\u5f00\u533a\u95f4\uff08\u65f6\u95f4\u683c\u5f0f\uff1a2024-01-02T15:04:05~ \u6216 ~2024-01-11T11:12:41 \uff09 -u/--user string \uff1a\u6307\u5b9a\u67e5\u8be2\u67d0\u4e2a\u7528\u6237\u7684\u4f5c\u4e1a\uff0c\u6307\u5b9a\u591a\u4e2a\u7528\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a cacct cacct -h cacct -N cacct -S=2024-07-22T10:00:00~2024-07-24T10:00:00 cacct -E=2024-07-22T10:00:00~2024-07-24T10:00:00 cacct -j=30618,30619,30620 cacct -u=cranetest cacct -A=CraneTest cacct -m=10 cacct -p GPU cacct -n=Test_Job cacct -o=\"%j %.10n %P %a %t\" cacct -A ROOT -m 10 cacct -m 10 -j 783925,783889 -t=c -F cacct -n test cacct -q test_qos cacct -m 10 -E=2024-10-08T10:00:00~2024-10-10T110:00:00 -p CPU -t c","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/","text":"cacctmgr \u7ba1\u7406\u7528\u6237/\u8d26\u6237\u4fe1\u606f cacctmgr \u53ef\u4ee5\u7ba1\u7406\u8d26\u6237/\u7528\u6237\u4fe1\u606f\uff0c\u5305\u62ec\u6dfb\u52a0\u8d26\u6237/\u7528\u6237\u3001\u5220\u9664\u8d26\u6237/\u7528\u6237\u3001\u67e5\u627e\u8d26\u6237/\u7528\u6237\u3002 CraneSched\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\u4e2d\u6709\u56db\u4e2a\u7528\u6237\u89d2\u8272\uff1a \u7cfb\u7edf\u7ba1\u7406\u5458\uff08Admin\uff09 \uff1a\u4e00\u822c\u4e3aroot\u7528\u6237\uff0c\u53ef\u4ee5\u589e\u5220\u67e5\u6539\u4efb\u4f55\u8d26\u6237\u548c\u7528\u6237\u4fe1\u606f \u5e73\u53f0\u7ba1\u7406\u5458\uff08Operator\uff09 \uff1a\u5bf9\u8d26\u6237\u7cfb\u7edf\u5177\u6709\u5b8c\u5168\u6743\u9650 \u8d26\u6237\u8c03\u5ea6\u5458\uff08Coordinator\uff09 \uff1a\u5bf9\u4e0e\u81ea\u8eab\u540c\u4e00\u8d26\u6237\u4e0b\u7684\u7528\u6237\u4ee5\u53ca\u5bf9\u81ea\u8eab\u8d26\u6237\u7684\u5b50\u8d26\u6237\u5177\u6709\u64cd\u4f5c\u6743\u9650\uff0c\u5305\u62ec\u6dfb\u52a0\u7528\u6237 \u666e\u901a\u7528\u6237(None) \uff1a \u9664\u4e86\u67e5\u8be2\u529f\u80fd\u5916\u4e0d\u5177\u5907\u5176\u4ed6\u6743\u9650\uff0c\u80fd\u591f\u67e5\u8be2\u4e0e\u81ea\u8eab\u540c\u4e00\u8d26\u6237\u4e0b\u7684\u4fe1\u606f\uff0c\u4e0d\u53ef\u4ee5\u4fee\u6539\u6240\u6709\u7528\u6237\u548c\u8d26\u6237\u4fe1\u606f \u4e3b\u8981\u53c2\u6570 -h/--help : \u663e\u793a\u5e2e\u52a9 --json \u4ee5 json \u683c\u5f0f\u8f93\u51fa -C/--config string \uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff08\u9ed8\u8ba4\u4e3a\"/etc/crane/config.yaml\"\uff09 -v/ --version cacctmgr \u547d\u4ee4\u7684\u7248\u672c \u4e3b\u8981\u547d\u4ee4 help \uff1a\u663e\u793a\u5e2e\u52a9 add : \u6dfb\u52a0\u5b9e\u4f53\uff08\u5b9e\u4f53\u5305\u62ecQoS\u3001\u8d26\u6237\u3001\u7528\u6237\uff09 block \uff1a\u7981\u7528\u8be5\u5b9e\u4f53\uff0c\u4f7f\u5176\u65e0\u6cd5\u4f7f\u7528 delete \uff1a\u5220\u9664\u5b9e\u4f53 modify \uff1a\u4fee\u6539\u5b9e\u4f53 show \uff1a\u663e\u793a\u4e00\u7c7b\u5b9e\u4f53\u7684\u6240\u6709\u8bb0\u5f55 unblock \uff1a\u89e3\u9664\u7981\u7528 completion\uff1a \u81ea\u52a8\u8865\u5168\u9002\u7528\u4e8e\u6307\u5b9a Shell \u7684\u811a\u672c 1. \u6dfb\u52a0 1.1 \u6dfb\u52a0qos \u4e3b\u8981\u53c2\u6570 -D/--description string \uff1a qos\u63cf\u8ff0\u4fe1\u606f -h/--help \uff1a \u5e2e\u52a9 -c/--max_cpus_per_user uint32 \uff1a \u9ed8\u8ba4\u4e3a10 -J/--max_jobs_per_user uint32 -T/--max_time_limit_per_task uint \uff1a \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\uff08\u9ed8\u8ba43600\uff09 -N/--name string \uff1aqos\u7684\u540d\u79f0 -P/--priority uint32 \uff1a\u9ed8\u8ba4\u4e3a1000 \u4f8b\uff1a SQL cacctmgr add qos -N=test-qos -D=\"test qos\" 1. 2 \u6dfb\u52a0\u8d26\u6237 \u4e3b\u8981\u53c2\u6570 -Q/--default_qos string \uff1a \u8d26\u6237\u9ed8\u8ba4qos -D/--description string \uff1a\u8d26\u53f7\u63cf\u8ff0\u4fe1\u606f -h/--help \uff1a \u5e2e\u52a9 -N/--name string \uff1a \u8d26\u6237\u7684\u540d\u79f0 -P/--parent string\uff1a \u6b64\u8d26\u6237\u7684\u7236\u8d26\u6237 -p/--partition strings \uff1a \u8be5\u8d26\u53f7\u53ef\u4ee5\u8bbf\u95ee\u7684\u5206\u533a\u5217\u8868 -q/--qos_list strings \uff1a\u8d26\u53f7\u53ef\u4ee5\u8bbf\u95ee\u7684qos\u5217\u8868 \u4f8b\uff1a\uff08\u6dfb\u52a0\u8d26\u6237PKU\u5e76\u6dfb\u52a0PKU\u7684\u5b50\u8d26\u6237ComputingCentre\uff09 cacctmgr add account -N=PKU -D=school -p=CPU,GPU -q=test-qos cacctmgr add account -N=ComputingCentre -D=department -P=PKU 1. 3 \u6dfb\u52a0\u7528\u6237 \u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u6dfb\u52a0\u4efb\u610f\u8d26\u6237\u7684\u7528\u6237\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u53ef\u4ee5\u6dfb\u52a0\u540c\u4e00\u8d26\u53f7\u4e0b\u7684\u65b0\u7528\u6237\u3002 \u6dfb\u52a0\u7684\u7528\u6237\u9700\u8981\u5148\u6709uid\uff08\u5148\u4f7f\u7528useradd\u5728linux\u7cfb\u7edf\u6dfb\u52a0\u8be5\u7528\u6237\uff09 \u3002 \u4e3b\u8981\u53c2\u6570 -A/--account string \uff1a \u6b64\u7528\u6237\u6240\u5c5e\u7684\u7236\u8d26\u6237 -c/--coordinate \uff1a\u8bbe\u7f6e\u7528\u6237\u662f\u5426\u4e3a\u7236\u8d26\u53f7\u7684\u8d26\u6237\u8c03\u5ea6\u5458\uff08coordinator\uff09 -h/--help \uff1a \u5e2e\u52a9 -L/--level string \uff1a\u8bbe\u7f6e\u7528\u6237\u6743\u9650(none/operator/admin) (\u9ed8\u8ba4\u4e3a \"none\") -N/--name string \uff1a \u7528\u6237\u7684\u540d\u79f0 -p/--partition strings \uff1a \u8be5\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u7684\u5206\u533a\u5217\u8868 \u4f8b\uff1a SQL useradd CS Plaintext cacctmgr add user -N=CS -A=PKU -p=CPU,GPU -L=admin # -p\u53c2\u6570\u6307\u660e\u7528\u6237\u53ef\u7528\u5206\u533a\u4e3aCPU\u548cGPU\uff08\u5206\u533a\u5fc5\u987b\u540c\u65f6\u4e3a\u7236\u8d26\u6237PKU\u7684\u53ef\u7528\u5206\u533a\uff09\uff0c\u5206\u533a\u7684allowed_qos_list\u4e0edefault_qos\u4fe1\u606f\u4e0d\u652f\u6301\u6307\u5b9a\uff0c\u9ed8\u8ba4\u4ece\u7236\u8d26\u6237PKU\u4e2d\u7ee7\u627f Plaintext cacctmgr add user -N=lab -A=ComputingCentre # \u672a\u6307\u660e-p\u53c2\u6570\uff0cpartition\u4e0eqos\u4fe1\u606f\u90fd\u4ece\u7236\u8d26\u6237ComputingCentre\u4e2d\u7ee7\u627f 2. \u5220\u9664 2.1 \u5220\u9664\u7528\u6237 cacctmgr delete user -N lab 2.2 \u5220\u9664\u8d26\u6237 \u4ec5\u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u5220\u9664\u8d26\u6237\uff0c\u5220\u9664\u8d26\u6237\u65f6\u4f1a\u68c0\u67e5\u8d26\u6237\u4e0b\u662f\u5426\u8fd8\u6709\u5b50\u8d26\u6237\u6216\u8005\u7528\u6237\uff0c\u5982\u679c\u6709\u5219\u4e0d\u5141\u8bb8\u5220\u9664\uff0c\u9632\u6b62\u4ea7\u751f\u6e38\u79bb\u7684\u7528\u6237\uff0c\u9700\u8981\u5c06\u5176\u5b50\u8d26\u6237\u548c\u7528\u6237\u90fd\u8bbe\u7f6e\u5728\u65b0\u8d26\u6237\u4e0b\u3002 cacctmgr delete account -N ComputingCentre 2 .3 \u5220\u9664qos cacctmgr delete qos -N test-qos 3. \u7981\u7528 3.1 \u963b\u6b62\u7528\u6237\u6216\u8d26\u6237 \u4e3b\u8981\u547d\u4ee4 account \uff1a \u963b\u6b62\u8d26\u6237 user \uff1a\u963b\u6b62\u8d26\u6237\u4e0b\u7684\u7528\u6237 cacctmgr block user lab -A=ComputingCentre cacctmgr block account ComputingCentre 4. \u89e3\u7981 4.1 \u89e3\u9664\u963b\u6b62\u7528\u6237\u6216\u8d26\u6237 \u4e3b\u8981\u547d\u4ee4 account \uff1a \u89e3\u9664\u963b\u6b62\u8d26\u6237 user \uff1a\u89e3\u9664\u963b\u6b62\u8d26\u6237\u4e0b\u7684\u7528\u6237 cacctmgr unblock user lab -A=ComputingCentre cacctmgr unblock account ComputingCentre 5. \u67e5\u8be2 5.1 \u67e5\u627e\u7528\u6237 \u6240\u6709\u7528\u6237\u5747\u53ef\u4ee5\u4f7f\u7528\u67e5\u8be2\u529f\u80fd cacctmgr find user lab cacctmgr find user CS cacctmgr show user 5.2 \u67e5\u627e\u8d26\u6237 cacctmgr find account ComputingCentre cacctmgr find account PKU cacctmgr show account 5.3 \u67e5\u627eqos cacctmgr find qos test-qos cacctmgr show qos 6. \u4fee\u6539 6.1 \u4fee\u6539\u8d26\u6237 \u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u4efb\u610f\u4fe1\u606f\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u672c\u8eab\u8d26\u6237\u7684\u4fe1\u606f\uff0c\u4f46\u4e0d\u80fd\u66f4\u6539\u8d26\u6237\u7684\u7236\u8d26\u6237\u3002 \u4e3b\u8981\u53c2\u6570 --add_allowed_partition string \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868 --add_allowed_qos_list strings \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684qos\u5217\u8868 -Q/--default_qos string \uff1a \u4fee\u6539\u8d26\u6237\u9ed8\u8ba4qos --delete_allowed_partition string \uff1a\u4ece\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879\u76ee --delete_allowed_qos_list strings \uff1a\u4ece\u5141\u8bb8\u7684qos\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879 -D/--description string \uff1a\u4fee\u6539\u8d26\u6237\u7684\u63cf\u8ff0\u4fe1\u606f -F/--force \uff1a \u5f3a\u5236\u64cd\u4f5c -h/--help \uff1a \u5e2e\u52a9 -N/--name string \uff1a\u9700\u8981\u8fdb\u884c\u4fee\u6539\u7684\u8d26\u6237\u540d\u79f0 --set_allowed_partition strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u7684\u5185\u5bb9 --set_allowed_qos_list strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684qos\u5217\u8868\u7684\u5185\u5bb9 \u4f8b\uff1a Plaintext cacctmgr modify account -N=ComputingCentre -D=\"Located in PKU\" 6.2 \u4fee\u6539\u7528\u6237 \u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u4efb\u610f\u4fe1\u606f\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u540c\u8d26\u6237\u4e0b\u7528\u6237\u7684\u4fe1\u606f\uff0c\u4f46\u4e0d\u80fd\u66f4\u6539\u7528\u6237\u7684\u8d26\u6237\u3002 \u4e3b\u8981\u53c2\u6570 -A/--account string \uff1a\u8bbe\u7f6e\u7528\u6237\u4f7f\u7528\u7684\u5e10\u53f7 --add_allowed_partition strings \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868 --add_allowed_qos_list string \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684qos\u5217\u8868 -L/--admin_level string \uff1a\u8bbe\u7f6e\u7528\u6237\u7ba1\u7406\u6743\u9650\uff08none/operator/admin\uff09 -Q/--default_qos string \uff1a \u4fee\u6539\u8d26\u6237\u9ed8\u8ba4qos --delete_allowed_partition strings \uff1a\u4ece\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879\u76ee --delete_allowed_qos_list string \uff1a\u4ece\u5141\u8bb8\u7684qos\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879\u76ee -F/--force \uff1a \u5f3a\u5236\u64cd\u4f5c -h/--help \uff1a \u5e2e\u52a9 -N/--name string \uff1a\u9700\u8981\u8fdb\u884c\u4fee\u6539\u7684\u7528\u6237\u540d\u79f0 -D/--default-account string \uff1a\u4fee\u6539\u7528\u6237\u7684\u9ed8\u8ba4\u8d26\u53f7 -p/--partition string \uff1a\u88ab\u4fee\u6539\u7684\u5206\u533a\uff0c\u5982\u679c\u4e0d\u663e\u5f0f\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u9ed8\u8ba4\u4fee\u6539\u6240\u6709\u5206\u533a --set_allowed_partition strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u7684\u5185\u5bb9 --set_allowed_qos_list strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684qos\u5217\u8868\u7684\u5185\u5bb9 \u4f8b SQL cacctmgr modify user -N=lab -A=ComputingCentre -L=operator --delete-allowed-partition GPU 6.3 \u4fee\u6539qos \u4e3b\u8981\u53c2\u6570 -D/--description string \uff1a\u4fee\u6539qos\u7684\u63cf\u8ff0\u4fe1\u606f -h/--help \uff1a \u5e2e\u52a9 -c/--max_cpus_per_user uint32 \uff1a(\u9ed8\u8ba410) -J/--max_jobs_per_user uint32 -T/--max_time_limit_per_task uint \uff1a\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\uff08\u9ed8\u8ba4 3600\uff09 -N/--name string \uff1a \u9700\u8981\u8fdb\u884c\u4fee\u6539\u7684qos\u540d\u79f0 -P/--priority uint32 \uff1a(\u9ed8\u8ba41000) 7 . \u663e\u793a 7.1 \u663e\u793a \u8d26\u6237\u6811 \u7cfb\u7edf\u7ba1\u7406\u5458\u4f1a\u663e\u793a\u6570\u636e\u5e93\u6240\u6709\u6839\u8d26\u6237\u7684\u8d26\u6237\u6811\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u548c\u7528\u6237\u4f1a\u663e\u793a\u672c\u8eab\u8d26\u6237\u7684\u8d26\u6237\u6811\u3002 cacctmgr show accounts 7.2 \u663e\u793a\u7528\u6237 \u7cfb\u7edf\u7ba1\u7406\u5458\u4f1a\u663e\u793a\u6240\u6709\u7528\u6237\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u548c\u7528\u6237\u4f1a\u663e\u793a\u540c\u4e00\u8d26\u6237\u4e0b\u7684\u6240\u6709\u7528\u6237\u3002 cacctmgr show users","title":"cacctmgr \u7ba1\u7406\u7528\u6237/\u8d26\u6237\u4fe1\u606f"},{"location":"command/cacctmgr/#cacctmgr","text":"cacctmgr \u53ef\u4ee5\u7ba1\u7406\u8d26\u6237/\u7528\u6237\u4fe1\u606f\uff0c\u5305\u62ec\u6dfb\u52a0\u8d26\u6237/\u7528\u6237\u3001\u5220\u9664\u8d26\u6237/\u7528\u6237\u3001\u67e5\u627e\u8d26\u6237/\u7528\u6237\u3002 CraneSched\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\u4e2d\u6709\u56db\u4e2a\u7528\u6237\u89d2\u8272\uff1a \u7cfb\u7edf\u7ba1\u7406\u5458\uff08Admin\uff09 \uff1a\u4e00\u822c\u4e3aroot\u7528\u6237\uff0c\u53ef\u4ee5\u589e\u5220\u67e5\u6539\u4efb\u4f55\u8d26\u6237\u548c\u7528\u6237\u4fe1\u606f \u5e73\u53f0\u7ba1\u7406\u5458\uff08Operator\uff09 \uff1a\u5bf9\u8d26\u6237\u7cfb\u7edf\u5177\u6709\u5b8c\u5168\u6743\u9650 \u8d26\u6237\u8c03\u5ea6\u5458\uff08Coordinator\uff09 \uff1a\u5bf9\u4e0e\u81ea\u8eab\u540c\u4e00\u8d26\u6237\u4e0b\u7684\u7528\u6237\u4ee5\u53ca\u5bf9\u81ea\u8eab\u8d26\u6237\u7684\u5b50\u8d26\u6237\u5177\u6709\u64cd\u4f5c\u6743\u9650\uff0c\u5305\u62ec\u6dfb\u52a0\u7528\u6237 \u666e\u901a\u7528\u6237(None) \uff1a \u9664\u4e86\u67e5\u8be2\u529f\u80fd\u5916\u4e0d\u5177\u5907\u5176\u4ed6\u6743\u9650\uff0c\u80fd\u591f\u67e5\u8be2\u4e0e\u81ea\u8eab\u540c\u4e00\u8d26\u6237\u4e0b\u7684\u4fe1\u606f\uff0c\u4e0d\u53ef\u4ee5\u4fee\u6539\u6240\u6709\u7528\u6237\u548c\u8d26\u6237\u4fe1\u606f","title":"cacctmgr \u7ba1\u7406\u7528\u6237/\u8d26\u6237\u4fe1\u606f"},{"location":"command/cacctmgr/#_1","text":"-h/--help : \u663e\u793a\u5e2e\u52a9 --json \u4ee5 json \u683c\u5f0f\u8f93\u51fa -C/--config string \uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff08\u9ed8\u8ba4\u4e3a\"/etc/crane/config.yaml\"\uff09 -v/ --version cacctmgr \u547d\u4ee4\u7684\u7248\u672c","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#_2","text":"help \uff1a\u663e\u793a\u5e2e\u52a9 add : \u6dfb\u52a0\u5b9e\u4f53\uff08\u5b9e\u4f53\u5305\u62ecQoS\u3001\u8d26\u6237\u3001\u7528\u6237\uff09 block \uff1a\u7981\u7528\u8be5\u5b9e\u4f53\uff0c\u4f7f\u5176\u65e0\u6cd5\u4f7f\u7528 delete \uff1a\u5220\u9664\u5b9e\u4f53 modify \uff1a\u4fee\u6539\u5b9e\u4f53 show \uff1a\u663e\u793a\u4e00\u7c7b\u5b9e\u4f53\u7684\u6240\u6709\u8bb0\u5f55 unblock \uff1a\u89e3\u9664\u7981\u7528 completion\uff1a \u81ea\u52a8\u8865\u5168\u9002\u7528\u4e8e\u6307\u5b9a Shell \u7684\u811a\u672c","title":"\u4e3b\u8981\u547d\u4ee4"},{"location":"command/cacctmgr/#1","text":"","title":"1. \u6dfb\u52a0"},{"location":"command/cacctmgr/#11-qos","text":"","title":"1.1 \u6dfb\u52a0qos"},{"location":"command/cacctmgr/#_3","text":"-D/--description string \uff1a qos\u63cf\u8ff0\u4fe1\u606f -h/--help \uff1a \u5e2e\u52a9 -c/--max_cpus_per_user uint32 \uff1a \u9ed8\u8ba4\u4e3a10 -J/--max_jobs_per_user uint32 -T/--max_time_limit_per_task uint \uff1a \u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\uff08\u9ed8\u8ba43600\uff09 -N/--name string \uff1aqos\u7684\u540d\u79f0 -P/--priority uint32 \uff1a\u9ed8\u8ba4\u4e3a1000 \u4f8b\uff1a SQL cacctmgr add qos -N=test-qos -D=\"test qos\"","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#12","text":"","title":"1.2 \u6dfb\u52a0\u8d26\u6237"},{"location":"command/cacctmgr/#_4","text":"-Q/--default_qos string \uff1a \u8d26\u6237\u9ed8\u8ba4qos -D/--description string \uff1a\u8d26\u53f7\u63cf\u8ff0\u4fe1\u606f -h/--help \uff1a \u5e2e\u52a9 -N/--name string \uff1a \u8d26\u6237\u7684\u540d\u79f0 -P/--parent string\uff1a \u6b64\u8d26\u6237\u7684\u7236\u8d26\u6237 -p/--partition strings \uff1a \u8be5\u8d26\u53f7\u53ef\u4ee5\u8bbf\u95ee\u7684\u5206\u533a\u5217\u8868 -q/--qos_list strings \uff1a\u8d26\u53f7\u53ef\u4ee5\u8bbf\u95ee\u7684qos\u5217\u8868 \u4f8b\uff1a\uff08\u6dfb\u52a0\u8d26\u6237PKU\u5e76\u6dfb\u52a0PKU\u7684\u5b50\u8d26\u6237ComputingCentre\uff09 cacctmgr add account -N=PKU -D=school -p=CPU,GPU -q=test-qos cacctmgr add account -N=ComputingCentre -D=department -P=PKU","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#13","text":"\u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u6dfb\u52a0\u4efb\u610f\u8d26\u6237\u7684\u7528\u6237\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u53ef\u4ee5\u6dfb\u52a0\u540c\u4e00\u8d26\u53f7\u4e0b\u7684\u65b0\u7528\u6237\u3002 \u6dfb\u52a0\u7684\u7528\u6237\u9700\u8981\u5148\u6709uid\uff08\u5148\u4f7f\u7528useradd\u5728linux\u7cfb\u7edf\u6dfb\u52a0\u8be5\u7528\u6237\uff09 \u3002","title":"1.3 \u6dfb\u52a0\u7528\u6237"},{"location":"command/cacctmgr/#_5","text":"-A/--account string \uff1a \u6b64\u7528\u6237\u6240\u5c5e\u7684\u7236\u8d26\u6237 -c/--coordinate \uff1a\u8bbe\u7f6e\u7528\u6237\u662f\u5426\u4e3a\u7236\u8d26\u53f7\u7684\u8d26\u6237\u8c03\u5ea6\u5458\uff08coordinator\uff09 -h/--help \uff1a \u5e2e\u52a9 -L/--level string \uff1a\u8bbe\u7f6e\u7528\u6237\u6743\u9650(none/operator/admin) (\u9ed8\u8ba4\u4e3a \"none\") -N/--name string \uff1a \u7528\u6237\u7684\u540d\u79f0 -p/--partition strings \uff1a \u8be5\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u7684\u5206\u533a\u5217\u8868 \u4f8b\uff1a SQL useradd CS Plaintext cacctmgr add user -N=CS -A=PKU -p=CPU,GPU -L=admin # -p\u53c2\u6570\u6307\u660e\u7528\u6237\u53ef\u7528\u5206\u533a\u4e3aCPU\u548cGPU\uff08\u5206\u533a\u5fc5\u987b\u540c\u65f6\u4e3a\u7236\u8d26\u6237PKU\u7684\u53ef\u7528\u5206\u533a\uff09\uff0c\u5206\u533a\u7684allowed_qos_list\u4e0edefault_qos\u4fe1\u606f\u4e0d\u652f\u6301\u6307\u5b9a\uff0c\u9ed8\u8ba4\u4ece\u7236\u8d26\u6237PKU\u4e2d\u7ee7\u627f Plaintext cacctmgr add user -N=lab -A=ComputingCentre # \u672a\u6307\u660e-p\u53c2\u6570\uff0cpartition\u4e0eqos\u4fe1\u606f\u90fd\u4ece\u7236\u8d26\u6237ComputingCentre\u4e2d\u7ee7\u627f","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#2","text":"","title":"2. \u5220\u9664"},{"location":"command/cacctmgr/#21","text":"cacctmgr delete user -N lab","title":"2.1 \u5220\u9664\u7528\u6237"},{"location":"command/cacctmgr/#22","text":"\u4ec5\u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u5220\u9664\u8d26\u6237\uff0c\u5220\u9664\u8d26\u6237\u65f6\u4f1a\u68c0\u67e5\u8d26\u6237\u4e0b\u662f\u5426\u8fd8\u6709\u5b50\u8d26\u6237\u6216\u8005\u7528\u6237\uff0c\u5982\u679c\u6709\u5219\u4e0d\u5141\u8bb8\u5220\u9664\uff0c\u9632\u6b62\u4ea7\u751f\u6e38\u79bb\u7684\u7528\u6237\uff0c\u9700\u8981\u5c06\u5176\u5b50\u8d26\u6237\u548c\u7528\u6237\u90fd\u8bbe\u7f6e\u5728\u65b0\u8d26\u6237\u4e0b\u3002 cacctmgr delete account -N ComputingCentre","title":"2.2 \u5220\u9664\u8d26\u6237"},{"location":"command/cacctmgr/#23-qos","text":"cacctmgr delete qos -N test-qos","title":"2.3 \u5220\u9664qos"},{"location":"command/cacctmgr/#3","text":"","title":"3. \u7981\u7528"},{"location":"command/cacctmgr/#31","text":"","title":"3.1 \u963b\u6b62\u7528\u6237\u6216\u8d26\u6237"},{"location":"command/cacctmgr/#_6","text":"account \uff1a \u963b\u6b62\u8d26\u6237 user \uff1a\u963b\u6b62\u8d26\u6237\u4e0b\u7684\u7528\u6237 cacctmgr block user lab -A=ComputingCentre cacctmgr block account ComputingCentre","title":"\u4e3b\u8981\u547d\u4ee4"},{"location":"command/cacctmgr/#4","text":"","title":"4. \u89e3\u7981"},{"location":"command/cacctmgr/#41","text":"","title":"4.1 \u89e3\u9664\u963b\u6b62\u7528\u6237\u6216\u8d26\u6237"},{"location":"command/cacctmgr/#_7","text":"account \uff1a \u89e3\u9664\u963b\u6b62\u8d26\u6237 user \uff1a\u89e3\u9664\u963b\u6b62\u8d26\u6237\u4e0b\u7684\u7528\u6237 cacctmgr unblock user lab -A=ComputingCentre cacctmgr unblock account ComputingCentre","title":"\u4e3b\u8981\u547d\u4ee4"},{"location":"command/cacctmgr/#5","text":"","title":"5. \u67e5\u8be2"},{"location":"command/cacctmgr/#51","text":"\u6240\u6709\u7528\u6237\u5747\u53ef\u4ee5\u4f7f\u7528\u67e5\u8be2\u529f\u80fd cacctmgr find user lab cacctmgr find user CS cacctmgr show user","title":"5.1 \u67e5\u627e\u7528\u6237"},{"location":"command/cacctmgr/#52","text":"cacctmgr find account ComputingCentre cacctmgr find account PKU cacctmgr show account","title":"5.2 \u67e5\u627e\u8d26\u6237"},{"location":"command/cacctmgr/#53-qos","text":"cacctmgr find qos test-qos cacctmgr show qos","title":"5.3 \u67e5\u627eqos"},{"location":"command/cacctmgr/#6","text":"","title":"6. \u4fee\u6539"},{"location":"command/cacctmgr/#61","text":"\u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u4efb\u610f\u4fe1\u606f\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u672c\u8eab\u8d26\u6237\u7684\u4fe1\u606f\uff0c\u4f46\u4e0d\u80fd\u66f4\u6539\u8d26\u6237\u7684\u7236\u8d26\u6237\u3002","title":"6.1 \u4fee\u6539\u8d26\u6237"},{"location":"command/cacctmgr/#_8","text":"--add_allowed_partition string \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868 --add_allowed_qos_list strings \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684qos\u5217\u8868 -Q/--default_qos string \uff1a \u4fee\u6539\u8d26\u6237\u9ed8\u8ba4qos --delete_allowed_partition string \uff1a\u4ece\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879\u76ee --delete_allowed_qos_list strings \uff1a\u4ece\u5141\u8bb8\u7684qos\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879 -D/--description string \uff1a\u4fee\u6539\u8d26\u6237\u7684\u63cf\u8ff0\u4fe1\u606f -F/--force \uff1a \u5f3a\u5236\u64cd\u4f5c -h/--help \uff1a \u5e2e\u52a9 -N/--name string \uff1a\u9700\u8981\u8fdb\u884c\u4fee\u6539\u7684\u8d26\u6237\u540d\u79f0 --set_allowed_partition strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u7684\u5185\u5bb9 --set_allowed_qos_list strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684qos\u5217\u8868\u7684\u5185\u5bb9 \u4f8b\uff1a Plaintext cacctmgr modify account -N=ComputingCentre -D=\"Located in PKU\"","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#62","text":"\u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u4efb\u610f\u4fe1\u606f\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u53ef\u4ee5\u4fee\u6539\u540c\u8d26\u6237\u4e0b\u7528\u6237\u7684\u4fe1\u606f\uff0c\u4f46\u4e0d\u80fd\u66f4\u6539\u7528\u6237\u7684\u8d26\u6237\u3002","title":"6.2 \u4fee\u6539\u7528\u6237"},{"location":"command/cacctmgr/#_9","text":"-A/--account string \uff1a\u8bbe\u7f6e\u7528\u6237\u4f7f\u7528\u7684\u5e10\u53f7 --add_allowed_partition strings \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868 --add_allowed_qos_list string \uff1a\u5c06\u65b0\u9879\u6dfb\u52a0\u5230\u5141\u8bb8\u7684qos\u5217\u8868 -L/--admin_level string \uff1a\u8bbe\u7f6e\u7528\u6237\u7ba1\u7406\u6743\u9650\uff08none/operator/admin\uff09 -Q/--default_qos string \uff1a \u4fee\u6539\u8d26\u6237\u9ed8\u8ba4qos --delete_allowed_partition strings \uff1a\u4ece\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879\u76ee --delete_allowed_qos_list string \uff1a\u4ece\u5141\u8bb8\u7684qos\u5217\u8868\u4e2d\u5220\u9664\u7279\u5b9a\u9879\u76ee -F/--force \uff1a \u5f3a\u5236\u64cd\u4f5c -h/--help \uff1a \u5e2e\u52a9 -N/--name string \uff1a\u9700\u8981\u8fdb\u884c\u4fee\u6539\u7684\u7528\u6237\u540d\u79f0 -D/--default-account string \uff1a\u4fee\u6539\u7528\u6237\u7684\u9ed8\u8ba4\u8d26\u53f7 -p/--partition string \uff1a\u88ab\u4fee\u6539\u7684\u5206\u533a\uff0c\u5982\u679c\u4e0d\u663e\u5f0f\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u9ed8\u8ba4\u4fee\u6539\u6240\u6709\u5206\u533a --set_allowed_partition strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684\u5206\u533a\u5217\u8868\u7684\u5185\u5bb9 --set_allowed_qos_list strings \uff1a\u8bbe\u7f6e\u5141\u8bb8\u7684qos\u5217\u8868\u7684\u5185\u5bb9 \u4f8b SQL cacctmgr modify user -N=lab -A=ComputingCentre -L=operator --delete-allowed-partition GPU","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#63-qos","text":"","title":"6.3 \u4fee\u6539qos"},{"location":"command/cacctmgr/#_10","text":"-D/--description string \uff1a\u4fee\u6539qos\u7684\u63cf\u8ff0\u4fe1\u606f -h/--help \uff1a \u5e2e\u52a9 -c/--max_cpus_per_user uint32 \uff1a(\u9ed8\u8ba410) -J/--max_jobs_per_user uint32 -T/--max_time_limit_per_task uint \uff1a\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\uff08\u9ed8\u8ba4 3600\uff09 -N/--name string \uff1a \u9700\u8981\u8fdb\u884c\u4fee\u6539\u7684qos\u540d\u79f0 -P/--priority uint32 \uff1a(\u9ed8\u8ba41000)","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cacctmgr/#7","text":"","title":"7. \u663e\u793a"},{"location":"command/cacctmgr/#71","text":"\u7cfb\u7edf\u7ba1\u7406\u5458\u4f1a\u663e\u793a\u6570\u636e\u5e93\u6240\u6709\u6839\u8d26\u6237\u7684\u8d26\u6237\u6811\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u548c\u7528\u6237\u4f1a\u663e\u793a\u672c\u8eab\u8d26\u6237\u7684\u8d26\u6237\u6811\u3002 cacctmgr show accounts","title":"7.1 \u663e\u793a\u8d26\u6237\u6811"},{"location":"command/cacctmgr/#72","text":"\u7cfb\u7edf\u7ba1\u7406\u5458\u4f1a\u663e\u793a\u6240\u6709\u7528\u6237\uff0c \u8d26\u6237\u7ba1\u7406\u5458\u548c\u7528\u6237\u4f1a\u663e\u793a\u540c\u4e00\u8d26\u6237\u4e0b\u7684\u6240\u6709\u7528\u6237\u3002 cacctmgr show users","title":"7.2 \u663e\u793a\u7528\u6237"},{"location":"command/calloc/","text":"calloc \u63d0\u4ea4\u4ea4\u4e92\u5f0f\u4efb\u52a1 calloc \u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u7684\u53c2\u6570\u7533\u8bf7\u8d44\u6e90\uff0c\u4efb\u52a1\u542f\u52a8\u65f6\uff0c\u4f1a\u8fdb\u5165\u65b0\u7684\u7528\u6237\u7ec8\u7aef\uff0c\u7528\u6237\u9700\u8981\u81ea\u884c\u767b\u9646\u5230\u8ba1\u7b97\u8282\u70b9\u5e76\u542f\u52a8\u4efb\u52a1\u3002calloc\u9700\u8981\u5728\u6709cfored\u8fd0\u884c\u7684\u8282\u70b9\u4e0a\u542f\u52a8\u3002 calloc \u53ea\u652f\u6301\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u8bf7\u6c42\u53c2\u6570\uff0c\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8d26\u6237 -D/--chdir string \uff1a\u4efb\u52a1\u5de5\u4f5c\u8def\u5f84 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -c/--cpus-per-task float : \u6bcf\u4e2a\u8282\u70b9\u7533\u8bf7\u7684CPU\u6838\u5fc3\u6570 --debug-level string\uff1a \u53ef\u7528\u7684\u8c03\u8bd5\u7ea7\u522b\uff1atrace\uff08\u8ddf\u8e2a\uff09\u3001debug\uff08\u8c03\u8bd5\uff09\u3001info\uff08\u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c\u4e3a \u201cinfo\u201d \uff09 -x/--exclude string\uff1a \u4ece\u5206\u914d\u4e2d\u6392\u9664\u7279\u5b9a\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09 --export string\uff1a \u4f20\u64ad\u73af\u5883\u53d8\u91cf --extra-attr string\uff1a \u4f5c\u4e1a\u7684\u989d\u5916\u5c5e\u6027\uff08JSON \u683c\u5f0f \uff09 --get-user-env\uff1a \u52a0\u8f7d\u7528\u6237\u7684\u767b\u5f55\u73af\u5883\u53d8\u91cf --gres string\uff1a \u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u901a\u7528\u8d44\u6e90\uff08Gres\uff09\uff0c\u683c\u5f0f\uff1a\u201cgpu:a100:1\u201d \u6216 \u201cgpu:1\u201d -J/--job-name string\uff1a \u4f5c\u4e1a\u540d\u79f0 --mail-type string\uff1a \u5f53\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\u901a\u8fc7\u90ae\u4ef6\u901a\u77e5\u7528\u6237\uff0c\u652f\u6301\u7684\u503c\uff1aNONE\uff08\u65e0\uff09\u3001BEGIN\uff08\u5f00\u59cb\uff09\u3001END\uff08\u7ed3\u675f\uff09\u3001FAIL\uff08\u5931\u8d25\uff09\u3001TIMELIMIT\uff08\u8fbe\u5230\u65f6\u95f4\u9650\u5236\uff09\u3001ALL\uff08\u6240\u6709\uff0c\u9ed8\u8ba4\u503c\u4e3a NONE \uff09 --mail-user string\uff1a \u901a\u77e5\u63a5\u6536\u8005\u7684\u90ae\u4ef6\u5730\u5740 --mem string\uff1a \u6700\u5927\u5b9e\u9645\u5185\u5b58\u91cf\uff0c\u652f\u6301 GB\uff08G\uff0cg\uff09\u3001MB\uff08M\uff0cm\uff09\u3001KB\uff08K\uff0ck\uff09\u548c Bytes\uff08B\uff09\u4e3a\u5355\u4f4d\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f MB -w/--nodelist string\uff1a \u8981\u5206\u914d\u7ed9\u4f5c\u4e1a\u7684\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09 -N/--nodes uint32\uff1a \u8981\u5728\u5176\u4e0a\u8fd0\u884c\u4f5c\u4e1a\u7684\u8282\u70b9\u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1 \uff09 --ntasks-per-node uint32\uff1a \u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u8981\u8c03\u7528\u7684\u4efb\u52a1\u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1 \uff09 - p/--partition string \uff1a\u8bf7\u6c42\u7684\u5206\u533a -q/ --qos string\uff1a \u4f5c\u4e1a\u4f7f\u7528\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS \uff09 -r/ --reservation string\uff1a \u4f7f\u7528\u9884\u7559\u8d44\u6e90 -t/ --time string\uff1a \u65f6\u95f4\u9650\u5236\uff0c\u683c\u5f0f\uff1a\u201cday - hours:minutes:seconds\u201d\uff08\u5982 5 - 0:0:1 \u8868\u793a 5 \u5929 1 \u79d2 \uff09\u6216 \u201chours:minutes:seconds\u201d\uff08\u5982 10:1:2 \u8868\u793a 10 \u5c0f\u65f6 1 \u5206\u949f 2 \u79d2 \uff09 -v/ --version \uff1acalloc \u547d\u4ee4\u7684\u7248\u672c \u4f8b\uff1a calloc -h \u9000\u51facalloc\u65b0\u542f\u52a8\u7684\u7ec8\u7aef\u5c06\u7ed3\u675f\u4efb\u52a1\u3002 \u4f8b\uff1a\u5728CPU\u5206\u533a\uff0c\u7533\u8bf7\u4e24\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2aCPU\u6838\u5fc3\uff0c200M\u5185\u5b58 calloc -c 1 --mem 200M -p CPU -N 2 \u8fd0\u884c\u7ed3\u679c\uff1a - \u4f8b\uff1a\u5728GPU\u5206\u533a\u4e0b\uff0c\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u8fd0\u884c\u4e24\u4e2a\u4efb\u52a1\uff0c\u7533\u8bf7\u8282\u70b9\u7684\u5019\u9009\u5217\u8868\u4e3acrane02,crane03\uff0c\u4e14\u4efb\u52a1\u63d0\u4ea4\u5728acct-yan\u8d26\u6237\u4e0b calloc -A acct-test --ntasks-per-node 2 -w crane02,crane03 -p GPU -N 1 \u8fd0\u884c\u7ed3\u679c\uff1a \u4f8b\uff1a\u5728CPU\u5206\u533a\u4e0b\uff0c\u7533\u8bf7200M\u5185\u5b58\uff0c\u4efb\u52a1\u8fd0\u884c\u6700\u957f\u65f6\u95f4\u4e3a25\u5206\u949f25\u79d2\uff0c\u4e14\u4efb\u52a1\u8fd0\u884c\u5728test-qos\u4e0b calloc --mem 200M -p CPU -q test-qos -t 00:25:25 calloc -D /path calloc --debug-level trace calloc -x cranetest02 calloc --get-user-env calloc -J job_name","title":"calloc \u63d0\u4ea4\u4ea4\u4e92\u5f0f\u4efb\u52a1"},{"location":"command/calloc/#calloc","text":"calloc \u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u7684\u53c2\u6570\u7533\u8bf7\u8d44\u6e90\uff0c\u4efb\u52a1\u542f\u52a8\u65f6\uff0c\u4f1a\u8fdb\u5165\u65b0\u7684\u7528\u6237\u7ec8\u7aef\uff0c\u7528\u6237\u9700\u8981\u81ea\u884c\u767b\u9646\u5230\u8ba1\u7b97\u8282\u70b9\u5e76\u542f\u52a8\u4efb\u52a1\u3002calloc\u9700\u8981\u5728\u6709cfored\u8fd0\u884c\u7684\u8282\u70b9\u4e0a\u542f\u52a8\u3002 calloc \u53ea\u652f\u6301\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u8bf7\u6c42\u53c2\u6570\uff0c\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8d26\u6237 -D/--chdir string \uff1a\u4efb\u52a1\u5de5\u4f5c\u8def\u5f84 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -c/--cpus-per-task float : \u6bcf\u4e2a\u8282\u70b9\u7533\u8bf7\u7684CPU\u6838\u5fc3\u6570 --debug-level string\uff1a \u53ef\u7528\u7684\u8c03\u8bd5\u7ea7\u522b\uff1atrace\uff08\u8ddf\u8e2a\uff09\u3001debug\uff08\u8c03\u8bd5\uff09\u3001info\uff08\u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c\u4e3a \u201cinfo\u201d \uff09 -x/--exclude string\uff1a \u4ece\u5206\u914d\u4e2d\u6392\u9664\u7279\u5b9a\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09 --export string\uff1a \u4f20\u64ad\u73af\u5883\u53d8\u91cf --extra-attr string\uff1a \u4f5c\u4e1a\u7684\u989d\u5916\u5c5e\u6027\uff08JSON \u683c\u5f0f \uff09 --get-user-env\uff1a \u52a0\u8f7d\u7528\u6237\u7684\u767b\u5f55\u73af\u5883\u53d8\u91cf --gres string\uff1a \u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u901a\u7528\u8d44\u6e90\uff08Gres\uff09\uff0c\u683c\u5f0f\uff1a\u201cgpu:a100:1\u201d \u6216 \u201cgpu:1\u201d -J/--job-name string\uff1a \u4f5c\u4e1a\u540d\u79f0 --mail-type string\uff1a \u5f53\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\u901a\u8fc7\u90ae\u4ef6\u901a\u77e5\u7528\u6237\uff0c\u652f\u6301\u7684\u503c\uff1aNONE\uff08\u65e0\uff09\u3001BEGIN\uff08\u5f00\u59cb\uff09\u3001END\uff08\u7ed3\u675f\uff09\u3001FAIL\uff08\u5931\u8d25\uff09\u3001TIMELIMIT\uff08\u8fbe\u5230\u65f6\u95f4\u9650\u5236\uff09\u3001ALL\uff08\u6240\u6709\uff0c\u9ed8\u8ba4\u503c\u4e3a NONE \uff09 --mail-user string\uff1a \u901a\u77e5\u63a5\u6536\u8005\u7684\u90ae\u4ef6\u5730\u5740 --mem string\uff1a \u6700\u5927\u5b9e\u9645\u5185\u5b58\u91cf\uff0c\u652f\u6301 GB\uff08G\uff0cg\uff09\u3001MB\uff08M\uff0cm\uff09\u3001KB\uff08K\uff0ck\uff09\u548c Bytes\uff08B\uff09\u4e3a\u5355\u4f4d\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f MB -w/--nodelist string\uff1a \u8981\u5206\u914d\u7ed9\u4f5c\u4e1a\u7684\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09 -N/--nodes uint32\uff1a \u8981\u5728\u5176\u4e0a\u8fd0\u884c\u4f5c\u4e1a\u7684\u8282\u70b9\u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1 \uff09 --ntasks-per-node uint32\uff1a \u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u8981\u8c03\u7528\u7684\u4efb\u52a1\u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1 \uff09 - p/--partition string \uff1a\u8bf7\u6c42\u7684\u5206\u533a -q/ --qos string\uff1a \u4f5c\u4e1a\u4f7f\u7528\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS \uff09 -r/ --reservation string\uff1a \u4f7f\u7528\u9884\u7559\u8d44\u6e90 -t/ --time string\uff1a \u65f6\u95f4\u9650\u5236\uff0c\u683c\u5f0f\uff1a\u201cday - hours:minutes:seconds\u201d\uff08\u5982 5 - 0:0:1 \u8868\u793a 5 \u5929 1 \u79d2 \uff09\u6216 \u201chours:minutes:seconds\u201d\uff08\u5982 10:1:2 \u8868\u793a 10 \u5c0f\u65f6 1 \u5206\u949f 2 \u79d2 \uff09 -v/ --version \uff1acalloc \u547d\u4ee4\u7684\u7248\u672c \u4f8b\uff1a calloc -h \u9000\u51facalloc\u65b0\u542f\u52a8\u7684\u7ec8\u7aef\u5c06\u7ed3\u675f\u4efb\u52a1\u3002 \u4f8b\uff1a\u5728CPU\u5206\u533a\uff0c\u7533\u8bf7\u4e24\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2aCPU\u6838\u5fc3\uff0c200M\u5185\u5b58 calloc -c 1 --mem 200M -p CPU -N 2 \u8fd0\u884c\u7ed3\u679c\uff1a - \u4f8b\uff1a\u5728GPU\u5206\u533a\u4e0b\uff0c\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u8fd0\u884c\u4e24\u4e2a\u4efb\u52a1\uff0c\u7533\u8bf7\u8282\u70b9\u7684\u5019\u9009\u5217\u8868\u4e3acrane02,crane03\uff0c\u4e14\u4efb\u52a1\u63d0\u4ea4\u5728acct-yan\u8d26\u6237\u4e0b calloc -A acct-test --ntasks-per-node 2 -w crane02,crane03 -p GPU -N 1 \u8fd0\u884c\u7ed3\u679c\uff1a \u4f8b\uff1a\u5728CPU\u5206\u533a\u4e0b\uff0c\u7533\u8bf7200M\u5185\u5b58\uff0c\u4efb\u52a1\u8fd0\u884c\u6700\u957f\u65f6\u95f4\u4e3a25\u5206\u949f25\u79d2\uff0c\u4e14\u4efb\u52a1\u8fd0\u884c\u5728test-qos\u4e0b calloc --mem 200M -p CPU -q test-qos -t 00:25:25 calloc -D /path calloc --debug-level trace calloc -x cranetest02 calloc --get-user-env calloc -J job_name","title":"calloc \u63d0\u4ea4\u4ea4\u4e92\u5f0f\u4efb\u52a1"},{"location":"command/cbatch/","text":"cbatch \u63d0\u4ea4\u6279\u5904\u7406\u4f5c\u4e1a cbatch\u4e3b\u8981\u662f\u5c06\u7528\u6237\u63cf\u8ff0\u6574\u4e2a\u8ba1\u7b97\u8fc7\u7a0b\u7684\u811a\u672c\u4f20\u9012\u7ed9\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\uff0c\u5e76\u4e3a\u4f5c\u4e1a\u5206\u914d\u4f5c\u4e1a\u53f7\uff0c\u7b49\u5f85\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\u4e3a\u5176\u5206\u914d\u8d44\u6e90\u5e76\u6267\u884c\u3002 CraneSched\u7cfb\u7edf\u4e2d\u5fc5\u987b\u6709\u7528\u6237\u548c\u8d26\u53f7\u624d\u80fd\u63d0\u4ea4\u4f5c\u4e1a\uff0c\u6dfb\u52a0\u7528\u6237\u548c\u8d26\u6237\u8bf7\u53c2\u8003 cacctmgr\u6559\u7a0b \u3002 \u9996\u5148\u4ecb\u7ecd\u4e00\u4e2a\u7b80\u5355\u7684\u5355\u8282\u70b9\u4f5c\u4e1a\u7684\u4f8b\u5b50: \u4e0b\u5217\u4f5c\u4e1a\u5c06\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2aCPU\u6838\u5fc3\uff0c\u5e76\u5728\u8ba1\u7b97\u8282\u70b9\u4e0a\u8fd0\u884chostname\u5e76\u9000\u51fa #!/bin/bash #CBATCH --ntasks-per-node 1 #CBATCH --nodes 1 #CBATCH -c 1 #CBATCH --mem 20M #CBATCH --time 0:3:1 #CBATCH -o job.out #CBATCH -p CPU #CBATCH -J Test_Job hostname \u5047\u8bbe\u4e0a\u9762\u4f5c\u4e1a\u811a\u672c\u7684\u6587\u4ef6\u540d\u4e3acbatch_test.sh\uff0c\u901a\u8fc7cbatch\u547d\u4ee4\u63d0\u4ea4\uff1a cbatch cbatch_test.sh cbatch\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u53c2\u6570\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8d26\u6237 -D/--chdir string \uff1a\u4efb\u52a1\u5de5\u4f5c\u8def\u5f84 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -c/--cpus-per-task float : \u6bcf\u4e2a\u8282\u70b9\u7533\u8bf7\u7684CPU\u6838\u5fc3\u6570 -e/--error string\uff1a \u6307\u5b9a\u811a\u672c\u9519\u8bef\u65e5\u5fd7\u5b9a\u5411\u8def\u5f84 -x/--exclude string \uff1a \u529f\u80fd\u662f\u4ece\u5206\u914d\u4e2d\u6392\u9664\u7279\u5b9a\u8282\u70b9\uff08\u7528\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09\uff0c\u7528\u4e8e\u8282\u70b9\u5206\u914d\u7ba1\u63a7\u573a\u666f\uff0c\u6307\u5b9a\u4e0d\u60f3\u53c2\u4e0e\u5206\u914d\u7684\u8282\u70b9\u3002 --export string \uff1a \u4f5c\u7528\u4e3a\u4f20\u64ad\u73af\u5883\u53d8\u91cf\uff0c\u5728\u6d89\u53ca\u73af\u5883\u53d8\u91cf\u4f20\u9012\uff0c\u8ba9\u53d8\u91cf\u5728\u76f8\u5173\u4efb\u52a1\u3001\u4f5c\u4e1a\u7b49\u6267\u884c\u73af\u5883\u4e2d\u751f\u6548\u65f6\u4f7f\u7528\u3002 --extra-attr string \uff1a \u53ef\u8bbe\u7f6e\u4f5c\u4e1a\u7684\u989d\u5916\u5c5e\u6027\uff08json\u683c\u5f0f \uff09\uff0c\u7528\u4e8e\u7ed9\u4f5c\u4e1a\u9644\u52a0\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\u4fe1\u606f\uff0c\u65b9\u4fbf\u8bc6\u522b\u3001\u7ba1\u7406\u7b49\u3002 --get-user-env \uff1a \u4f1a\u52a0\u8f7d\u7528\u6237\u7684\u767b\u5f55\u73af\u5883\u53d8\u91cf\uff0c\u8ba9\u4f5c\u4e1a\u7b49\u6267\u884c\u65f6\u80fd\u4f7f\u7528\u7528\u6237\u767b\u5f55\u65f6\u7684\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u3002 --gres string \uff1a \u6307\u5b9a\u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u901a\u7528\u8d44\u6e90\uff0c\u683c\u5f0f\u5982 gpu:a100:1\uff08\u6307\u5b9a\u4f7f\u7528 1 \u5757 a100 \u578b\u53f7 GPU \uff09\u6216 gpu:1\uff08\u6307\u5b9a\u4f7f\u7528 1 \u5757 GPU \uff0c\u4e0d\u9650\u5177\u4f53\u578b\u53f7 \uff09\uff0c\u7528\u4e8e GPU \u7b49\u8d44\u6e90\u5206\u914d\u573a\u666f\u3002 -J/--job-name string \uff1a\u4f5c\u4e1a\u540d --json \uff1a\u4ee5 JSON \u683c\u5f0f\u8f93\u51fa --mail-type string\uff1a \u5f53\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5411\u7528\u6237\u53d1\u9001\u90ae\u4ef6\u901a\u77e5\uff0c\u652f\u6301\u7684\u503c\u6709\uff1a\u65e0\uff08NONE\uff09\u3001\u5f00\u59cb\uff08BEGIN\uff09\u3001\u7ed3\u675f\uff08END\uff09\u3001\u5931\u8d25\uff08FAIL\uff09\u3001\u8fbe\u5230\u65f6\u95f4\u9650\u5236\uff08TIMELIMIT\uff09\u3001\u6240\u6709\u4e8b\u4ef6\uff08ALL\uff09\uff08\u9ed8\u8ba4\u662f\u65e0\uff08NONE) \uff09 --mail-user string\uff1a \u901a\u77e5\u63a5\u6536\u8005\u7684\u90ae\u4ef6\u5730\u5740 --mem string\uff1a \u6700\u5927\u5b9e\u9645\u5185\u5b58\u91cf\uff0c\u652f\u6301 GB\uff08G\uff0cg\uff09\u3001MB\uff08M\uff0cm\uff09\u3001KB\uff08K\uff0ck\uff09\u548c\u5b57\u8282\uff08B\uff09\u4e3a\u5355\u4f4d\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f MB -w/--nodelist string \uff1a \u8981\u5206\u914d\u7ed9\u4f5c\u4e1a\u7684\u8282\u70b9\uff08\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09 -N/--nodes uint32 \uff1a \u4f5c\u4e1a\u8981\u8fd0\u884c\u7684\u8282\u70b9\u6570\u91cf\uff08\u683c\u5f0f N = min[-max] \uff0c\u9ed8\u8ba4 1 \uff09 --ntasks-per-node uint32 \uff1a \u6bcf\u4e2a\u8282\u70b9\u8981\u8c03\u7528\u7684\u4efb\u52a1\u6570\u91cf\uff08\u9ed8\u8ba4 1 \uff09 --open-mode string \uff1a \u8bbe\u7f6e\u6253\u5f00\u8f93\u51fa\u548c\u9519\u8bef\u6587\u4ef6\u7684\u6a21\u5f0f\uff0c\u652f\u6301\u7684\u503c\uff1aappend\uff08\u8ffd\u52a0 \uff09\u3001truncate\uff08\u622a\u65ad \uff0c\u9ed8\u8ba4 \uff09 -o/ --output string \uff1a\u811a\u672c\u6807\u51c6\u8f93\u51fa\u7684\u91cd\u5b9a\u5411\u8def\u5f84 -p/ --partition string \uff1a\u8bf7\u6c42\u7684\u5206\u533a -q/--qos string \uff1a\u4f5c\u4e1a\u4f7f\u7528\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS \uff09 --repeat uint32 \uff1a\u591a\u6b21\u63d0\u4ea4\u4f5c\u4e1a\uff08\u9ed8\u8ba4 1 \uff09 -r/--reservation string \uff1a \u4f7f\u7528\u9884\u7559\u8d44\u6e90 -t /--time string \uff1a \u65f6\u95f4\u9650\u5236 \uff0c\u683c\u5f0f\uff1a\"day-hours:minutes:seconds\"\uff08\u5982 5-0:0:1 \u8868\u793a 5 \u5929 1 \u79d2 \uff09\u6216 \"hours:minutes:seconds\"\uff08\u5982 10:1:2 \u8868\u793a 10 \u5c0f\u65f6 1 \u5206\u949f 2 \u79d2 \uff09 -v /--version \uff1a cbatch \u7684\u7248\u672c --wrap string \uff1a \u5c06\u547d\u4ee4\u5b57\u7b26\u4e32\u5305\u88c5\u5230 sh \u811a\u672c\u4e2d\u5e76\u63d0\u4ea4 \u4f8b\uff1a cbatch cbatch_test.sh cbatch -h cbatch -A=acct-test cbatch_test.sh cbatch -x crane01,crane02 cbatch_test.sh cbatch -J testjob01 cbatch_test.sh cbatch -w crane01,crane03 cbatch_test.sh cbatch -p GPU cbatch_test.sh cbatch -t 00:25:25 cbatch_test.sh cbatch -c 2 cbatch_test.sh cbatch --mem 123M cbatch_test.sh cbatch -N 2 --ntasks-per-node 2 cbatch_test.sh cbatch -D /path test.sh cbatch -e error.log test.sh cbatch --export ALL test.sh cbatch --get-user-env test.sh cbatch -o output.out test.sh cbatch -q qos_test test.sh cbatch --repeat 3 test.sh \u5e38\u7528\u73af\u5883\u53d8\u91cf \u53d8\u91cf\u540d \u8bf4\u660e CRANE_JOB_NODELIST \u4f5c\u4e1a\u5206\u914d\u7684\u8282\u70b9\u5217\u8868 %j \u4f5c\u4e1a\u53f7 \u4e0b\u9762\u4ecb\u7ecd\u63d0\u4ea4\u4e00\u4e2a\u8de8\u8282\u70b9\u591a\u6838\u5fc3\u7684\u4f8b\u5b50\uff1a c\u4e0b\u5217\u4f5c\u4e1a\u5c06\u5728\u4e09\u4e2a\u8282\u70b9\u4e0a\u8fd0\u884c\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f7f\u75284\u4e2aCPU\u6838\u5fc3\u3002 #!/bin/bash #CBATCH -o crane_test%j.out #CBATCH -p CPU #CBATCH -J \"crane_test\" #CBATCH --nodes 3 #CBATCH --ntasks-per-node 4 #CBATCH -c 4 #CBATCH --time 50:00:00 # \u751f\u6210\u4f5c\u4e1a\u5206\u914d\u7684\u8282\u70b9\u7684machinefile echo \"$CRANE_JOB_NODELIST\" | tr \";\" \"\\n\" > crane.hosts #\u52a0\u8f7dMPI\u8fd0\u884c\u73af\u5883 module load mpich/4.0 #\u6267\u884c\u8de8\u8282\u70b9\u5e76\u884c\u4efb\u52a1 mpirun -n 13 -machinefile crane.hosts helloWorld > log","title":"cbatch \u63d0\u4ea4\u6279\u5904\u7406\u4f5c\u4e1a"},{"location":"command/cbatch/#cbatch","text":"cbatch\u4e3b\u8981\u662f\u5c06\u7528\u6237\u63cf\u8ff0\u6574\u4e2a\u8ba1\u7b97\u8fc7\u7a0b\u7684\u811a\u672c\u4f20\u9012\u7ed9\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\uff0c\u5e76\u4e3a\u4f5c\u4e1a\u5206\u914d\u4f5c\u4e1a\u53f7\uff0c\u7b49\u5f85\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\u4e3a\u5176\u5206\u914d\u8d44\u6e90\u5e76\u6267\u884c\u3002 CraneSched\u7cfb\u7edf\u4e2d\u5fc5\u987b\u6709\u7528\u6237\u548c\u8d26\u53f7\u624d\u80fd\u63d0\u4ea4\u4f5c\u4e1a\uff0c\u6dfb\u52a0\u7528\u6237\u548c\u8d26\u6237\u8bf7\u53c2\u8003 cacctmgr\u6559\u7a0b \u3002 \u9996\u5148\u4ecb\u7ecd\u4e00\u4e2a\u7b80\u5355\u7684\u5355\u8282\u70b9\u4f5c\u4e1a\u7684\u4f8b\u5b50: \u4e0b\u5217\u4f5c\u4e1a\u5c06\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2aCPU\u6838\u5fc3\uff0c\u5e76\u5728\u8ba1\u7b97\u8282\u70b9\u4e0a\u8fd0\u884chostname\u5e76\u9000\u51fa #!/bin/bash #CBATCH --ntasks-per-node 1 #CBATCH --nodes 1 #CBATCH -c 1 #CBATCH --mem 20M #CBATCH --time 0:3:1 #CBATCH -o job.out #CBATCH -p CPU #CBATCH -J Test_Job hostname \u5047\u8bbe\u4e0a\u9762\u4f5c\u4e1a\u811a\u672c\u7684\u6587\u4ef6\u540d\u4e3acbatch_test.sh\uff0c\u901a\u8fc7cbatch\u547d\u4ee4\u63d0\u4ea4\uff1a cbatch cbatch_test.sh cbatch\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u53c2\u6570\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8d26\u6237 -D/--chdir string \uff1a\u4efb\u52a1\u5de5\u4f5c\u8def\u5f84 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -c/--cpus-per-task float : \u6bcf\u4e2a\u8282\u70b9\u7533\u8bf7\u7684CPU\u6838\u5fc3\u6570 -e/--error string\uff1a \u6307\u5b9a\u811a\u672c\u9519\u8bef\u65e5\u5fd7\u5b9a\u5411\u8def\u5f84 -x/--exclude string \uff1a \u529f\u80fd\u662f\u4ece\u5206\u914d\u4e2d\u6392\u9664\u7279\u5b9a\u8282\u70b9\uff08\u7528\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09\uff0c\u7528\u4e8e\u8282\u70b9\u5206\u914d\u7ba1\u63a7\u573a\u666f\uff0c\u6307\u5b9a\u4e0d\u60f3\u53c2\u4e0e\u5206\u914d\u7684\u8282\u70b9\u3002 --export string \uff1a \u4f5c\u7528\u4e3a\u4f20\u64ad\u73af\u5883\u53d8\u91cf\uff0c\u5728\u6d89\u53ca\u73af\u5883\u53d8\u91cf\u4f20\u9012\uff0c\u8ba9\u53d8\u91cf\u5728\u76f8\u5173\u4efb\u52a1\u3001\u4f5c\u4e1a\u7b49\u6267\u884c\u73af\u5883\u4e2d\u751f\u6548\u65f6\u4f7f\u7528\u3002 --extra-attr string \uff1a \u53ef\u8bbe\u7f6e\u4f5c\u4e1a\u7684\u989d\u5916\u5c5e\u6027\uff08json\u683c\u5f0f \uff09\uff0c\u7528\u4e8e\u7ed9\u4f5c\u4e1a\u9644\u52a0\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\u4fe1\u606f\uff0c\u65b9\u4fbf\u8bc6\u522b\u3001\u7ba1\u7406\u7b49\u3002 --get-user-env \uff1a \u4f1a\u52a0\u8f7d\u7528\u6237\u7684\u767b\u5f55\u73af\u5883\u53d8\u91cf\uff0c\u8ba9\u4f5c\u4e1a\u7b49\u6267\u884c\u65f6\u80fd\u4f7f\u7528\u7528\u6237\u767b\u5f55\u65f6\u7684\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u3002 --gres string \uff1a \u6307\u5b9a\u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u901a\u7528\u8d44\u6e90\uff0c\u683c\u5f0f\u5982 gpu:a100:1\uff08\u6307\u5b9a\u4f7f\u7528 1 \u5757 a100 \u578b\u53f7 GPU \uff09\u6216 gpu:1\uff08\u6307\u5b9a\u4f7f\u7528 1 \u5757 GPU \uff0c\u4e0d\u9650\u5177\u4f53\u578b\u53f7 \uff09\uff0c\u7528\u4e8e GPU \u7b49\u8d44\u6e90\u5206\u914d\u573a\u666f\u3002 -J/--job-name string \uff1a\u4f5c\u4e1a\u540d --json \uff1a\u4ee5 JSON \u683c\u5f0f\u8f93\u51fa --mail-type string\uff1a \u5f53\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5411\u7528\u6237\u53d1\u9001\u90ae\u4ef6\u901a\u77e5\uff0c\u652f\u6301\u7684\u503c\u6709\uff1a\u65e0\uff08NONE\uff09\u3001\u5f00\u59cb\uff08BEGIN\uff09\u3001\u7ed3\u675f\uff08END\uff09\u3001\u5931\u8d25\uff08FAIL\uff09\u3001\u8fbe\u5230\u65f6\u95f4\u9650\u5236\uff08TIMELIMIT\uff09\u3001\u6240\u6709\u4e8b\u4ef6\uff08ALL\uff09\uff08\u9ed8\u8ba4\u662f\u65e0\uff08NONE) \uff09 --mail-user string\uff1a \u901a\u77e5\u63a5\u6536\u8005\u7684\u90ae\u4ef6\u5730\u5740 --mem string\uff1a \u6700\u5927\u5b9e\u9645\u5185\u5b58\u91cf\uff0c\u652f\u6301 GB\uff08G\uff0cg\uff09\u3001MB\uff08M\uff0cm\uff09\u3001KB\uff08K\uff0ck\uff09\u548c\u5b57\u8282\uff08B\uff09\u4e3a\u5355\u4f4d\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f MB -w/--nodelist string \uff1a \u8981\u5206\u914d\u7ed9\u4f5c\u4e1a\u7684\u8282\u70b9\uff08\u9017\u53f7\u5206\u9694\u7684\u5217\u8868 \uff09 -N/--nodes uint32 \uff1a \u4f5c\u4e1a\u8981\u8fd0\u884c\u7684\u8282\u70b9\u6570\u91cf\uff08\u683c\u5f0f N = min[-max] \uff0c\u9ed8\u8ba4 1 \uff09 --ntasks-per-node uint32 \uff1a \u6bcf\u4e2a\u8282\u70b9\u8981\u8c03\u7528\u7684\u4efb\u52a1\u6570\u91cf\uff08\u9ed8\u8ba4 1 \uff09 --open-mode string \uff1a \u8bbe\u7f6e\u6253\u5f00\u8f93\u51fa\u548c\u9519\u8bef\u6587\u4ef6\u7684\u6a21\u5f0f\uff0c\u652f\u6301\u7684\u503c\uff1aappend\uff08\u8ffd\u52a0 \uff09\u3001truncate\uff08\u622a\u65ad \uff0c\u9ed8\u8ba4 \uff09 -o/ --output string \uff1a\u811a\u672c\u6807\u51c6\u8f93\u51fa\u7684\u91cd\u5b9a\u5411\u8def\u5f84 -p/ --partition string \uff1a\u8bf7\u6c42\u7684\u5206\u533a -q/--qos string \uff1a\u4f5c\u4e1a\u4f7f\u7528\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS \uff09 --repeat uint32 \uff1a\u591a\u6b21\u63d0\u4ea4\u4f5c\u4e1a\uff08\u9ed8\u8ba4 1 \uff09 -r/--reservation string \uff1a \u4f7f\u7528\u9884\u7559\u8d44\u6e90 -t /--time string \uff1a \u65f6\u95f4\u9650\u5236 \uff0c\u683c\u5f0f\uff1a\"day-hours:minutes:seconds\"\uff08\u5982 5-0:0:1 \u8868\u793a 5 \u5929 1 \u79d2 \uff09\u6216 \"hours:minutes:seconds\"\uff08\u5982 10:1:2 \u8868\u793a 10 \u5c0f\u65f6 1 \u5206\u949f 2 \u79d2 \uff09 -v /--version \uff1a cbatch \u7684\u7248\u672c --wrap string \uff1a \u5c06\u547d\u4ee4\u5b57\u7b26\u4e32\u5305\u88c5\u5230 sh \u811a\u672c\u4e2d\u5e76\u63d0\u4ea4 \u4f8b\uff1a cbatch cbatch_test.sh cbatch -h cbatch -A=acct-test cbatch_test.sh cbatch -x crane01,crane02 cbatch_test.sh cbatch -J testjob01 cbatch_test.sh cbatch -w crane01,crane03 cbatch_test.sh cbatch -p GPU cbatch_test.sh cbatch -t 00:25:25 cbatch_test.sh cbatch -c 2 cbatch_test.sh cbatch --mem 123M cbatch_test.sh cbatch -N 2 --ntasks-per-node 2 cbatch_test.sh cbatch -D /path test.sh cbatch -e error.log test.sh cbatch --export ALL test.sh cbatch --get-user-env test.sh cbatch -o output.out test.sh cbatch -q qos_test test.sh cbatch --repeat 3 test.sh","title":"cbatch \u63d0\u4ea4\u6279\u5904\u7406\u4f5c\u4e1a"},{"location":"command/cbatch/#_1","text":"\u53d8\u91cf\u540d \u8bf4\u660e CRANE_JOB_NODELIST \u4f5c\u4e1a\u5206\u914d\u7684\u8282\u70b9\u5217\u8868 %j \u4f5c\u4e1a\u53f7 \u4e0b\u9762\u4ecb\u7ecd\u63d0\u4ea4\u4e00\u4e2a\u8de8\u8282\u70b9\u591a\u6838\u5fc3\u7684\u4f8b\u5b50\uff1a c\u4e0b\u5217\u4f5c\u4e1a\u5c06\u5728\u4e09\u4e2a\u8282\u70b9\u4e0a\u8fd0\u884c\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f7f\u75284\u4e2aCPU\u6838\u5fc3\u3002 #!/bin/bash #CBATCH -o crane_test%j.out #CBATCH -p CPU #CBATCH -J \"crane_test\" #CBATCH --nodes 3 #CBATCH --ntasks-per-node 4 #CBATCH -c 4 #CBATCH --time 50:00:00 # \u751f\u6210\u4f5c\u4e1a\u5206\u914d\u7684\u8282\u70b9\u7684machinefile echo \"$CRANE_JOB_NODELIST\" | tr \";\" \"\\n\" > crane.hosts #\u52a0\u8f7dMPI\u8fd0\u884c\u73af\u5883 module load mpich/4.0 #\u6267\u884c\u8de8\u8282\u70b9\u5e76\u884c\u4efb\u52a1 mpirun -n 13 -machinefile crane.hosts helloWorld > log","title":"\u5e38\u7528\u73af\u5883\u53d8\u91cf"},{"location":"command/ccancel/","text":"ccancel \u53d6\u6d88\u4f5c\u4e1a ccancel\u53ef\u4ee5\u7ec8\u6b62\u6b63\u5728\u8fd0\u884c\u6216\u8005\u5728\u6392\u961f\u4e2d\u7684\u4f5c\u4e1a\u3002 \u4e3b\u8981\u53c2\u6570 -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u53d6\u6d88\u8d26\u6237\u4e0b\u7684\u4efb\u52a1 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -n/--name string \uff1a\u53d6\u6d88\u6307\u5b9a\u4efb\u52a1\u540d\u7684\u4efb\u52a1 -w/--nodes strings \uff1a\u53d6\u6d88\u6307\u5b9a\u8282\u70b9\u4e0a\u8fd0\u884c\u7684\u4efb\u52a1 -p/--partition string \uff1a\u53d6\u6d88\u6307\u5b9a\u5206\u533a\u4e0a\u8fd0\u884c\u7684\u4efb\u52a1 -t/--state string \uff1a\u53d6\u6d88\u67d0\u72b6\u6001\u7684\u4efb\u52a1\u3002\u6709\u6548\u7684\u4efb\u52a1\u72b6\u6001\u662f PENDING(PD)\u3001RUNNING(R)\u3002\u4efb\u52a1\u72b6\u6001\u4e0d\u533a\u5206\u5927\u5c0f\u5199 -u/--user string \uff1a\u53d6\u6d88\u7279\u5b9a\u7528\u6237\u63d0\u4ea4\u7684\u4efb\u52a1 -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a ccancel -w crane02 ccancel -t Pending \u53d6\u6d88\u4f5c\u4e1a\u53f7\u4e3a30686\u7684\u4f5c\u4e1a\uff1a ccancel 30686 ccancel\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u53d6\u6d88\u4f5c\u4e1a\u540d\u4e3atest1\u7684\u4f5c\u4e1a\uff1a ccancel -n test1 ccancel\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u53d6\u6d88CPU\u5206\u533a\u4e0a\u7684\u4f5c\u4e1a ccancel -p GPU ccancel -A PKU ccancel -u ROOT \u53d6\u6d88\u4f5c\u4e1a\u4e4b\u540e\uff0c\u5982\u679c\u88ab\u5206\u914d\u8282\u70b9\u4e0a\u6ca1\u6709\u7528\u6237\u7684\u5176\u4ed6\u4f5c\u4e1a\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\u4f1a\u7ec8\u6b62\u7528\u6237\u5728\u6240\u5206\u914d\u8282\u70b9\u7684\u6240\u6709\u8fdb\u7a0b\uff0c\u5e76\u53d6\u6d88\u7528\u6237\u5728\u6240\u5206\u914d\u8282\u70b9\u4e0a\u7684ssh\u6743\u9650\u3002","title":"ccancel \u53d6\u6d88\u4f5c\u4e1a"},{"location":"command/ccancel/#ccancel","text":"ccancel\u53ef\u4ee5\u7ec8\u6b62\u6b63\u5728\u8fd0\u884c\u6216\u8005\u5728\u6392\u961f\u4e2d\u7684\u4f5c\u4e1a\u3002","title":"ccancel \u53d6\u6d88\u4f5c\u4e1a"},{"location":"command/ccancel/#_1","text":"-h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u53d6\u6d88\u8d26\u6237\u4e0b\u7684\u4efb\u52a1 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -n/--name string \uff1a\u53d6\u6d88\u6307\u5b9a\u4efb\u52a1\u540d\u7684\u4efb\u52a1 -w/--nodes strings \uff1a\u53d6\u6d88\u6307\u5b9a\u8282\u70b9\u4e0a\u8fd0\u884c\u7684\u4efb\u52a1 -p/--partition string \uff1a\u53d6\u6d88\u6307\u5b9a\u5206\u533a\u4e0a\u8fd0\u884c\u7684\u4efb\u52a1 -t/--state string \uff1a\u53d6\u6d88\u67d0\u72b6\u6001\u7684\u4efb\u52a1\u3002\u6709\u6548\u7684\u4efb\u52a1\u72b6\u6001\u662f PENDING(PD)\u3001RUNNING(R)\u3002\u4efb\u52a1\u72b6\u6001\u4e0d\u533a\u5206\u5927\u5c0f\u5199 -u/--user string \uff1a\u53d6\u6d88\u7279\u5b9a\u7528\u6237\u63d0\u4ea4\u7684\u4efb\u52a1 -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a ccancel -w crane02 ccancel -t Pending \u53d6\u6d88\u4f5c\u4e1a\u53f7\u4e3a30686\u7684\u4f5c\u4e1a\uff1a ccancel 30686 ccancel\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u53d6\u6d88\u4f5c\u4e1a\u540d\u4e3atest1\u7684\u4f5c\u4e1a\uff1a ccancel -n test1 ccancel\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u53d6\u6d88CPU\u5206\u533a\u4e0a\u7684\u4f5c\u4e1a ccancel -p GPU ccancel -A PKU ccancel -u ROOT \u53d6\u6d88\u4f5c\u4e1a\u4e4b\u540e\uff0c\u5982\u679c\u88ab\u5206\u914d\u8282\u70b9\u4e0a\u6ca1\u6709\u7528\u6237\u7684\u5176\u4ed6\u4f5c\u4e1a\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u7cfb\u7edf\u4f1a\u7ec8\u6b62\u7528\u6237\u5728\u6240\u5206\u914d\u8282\u70b9\u7684\u6240\u6709\u8fdb\u7a0b\uff0c\u5e76\u53d6\u6d88\u7528\u6237\u5728\u6240\u5206\u914d\u8282\u70b9\u4e0a\u7684ssh\u6743\u9650\u3002","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/ccontrol/","text":"ccontrol \u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u72b6\u6001 ccontrol\u53ef\u4ee5\u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u7684\u72b6\u6001\u3002 \u4e3b\u8981\u547d\u4ee4 help \uff1a\u663e\u793a\u5e2e\u52a9 show \uff1a\u663e\u793a\u5b9e\u4f53\u7684\u72b6\u6001\uff0c\u9ed8\u8ba4\u4e3a\u6240\u6709\u8bb0\u5f55 update \uff1a\u4fee\u6539\u4f5c\u4e1a/\u5206\u533a/\u8282\u70b9\u4fe1\u606f hold \uff1a\u6682\u505c\u4f5c\u4e1a\u8c03\u5ea6 release \uff1a\u7ee7\u7eed\u4f5c\u4e1a\u8c03\u5ea6 completion \uff1a\u4e3a\u6307\u5b9a\u7684shell\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c create\uff1a \u521b\u5efa\u4e00\u4e2a\u65b0\u5b9e\u4f53 delete\uff1a \u5220\u9664\u6307\u5b9a\u7684\u5b9e\u4f53 \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") 1. \u67e5\u770b \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a config: \u67e5\u8be2\u914d\u7f6e\u4fe1\u606f job\uff1a \u67e5\u8be2\u4f5c\u4e1a\u4fe1\u606f node\uff1a \u67e5\u8be2\u8282\u70b9\u4fe1\u606f partition \uff1a\u67e5\u770b\u96c6\u7fa4\u5206\u533a\u60c5\u51b5 ccontrol show -h 1. 1 \u67e5\u770b\u5206\u533a\u72b6\u6001 ccontrol show partition ccontrol show partition\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 PartitionName \uff1a\u5206\u533a\u540d State \uff1a\u5206\u533a\u72b6\u6001 TotalNodes \uff1a\u5206\u533a\u8282\u70b9\u6570\u76ee AliveNodes \uff1a\u5206\u533a\u4e2d\u53ef\u8fd0\u884c\u7684\u8282\u70b9\u6570\u76ee TotalCpus \uff1a\u5206\u533a\u4e2d\u6240\u6709\u8282\u70b9\u603bCPU\u6570\u76ee AvailCpus \uff1a\u5206\u533a\u4e2d\u6240\u6709\u53ef\u4ee5\u4f7f\u7528\u7684CPU\u6570\u76ee AllocCpus \uff1a\u5206\u533a\u4e2d\u5df2\u7ecf\u88ab\u5206\u914d\u7684CPU\u6570\u76ee FreeCpus \uff1a\u5206\u533a\u4e2d\u7a7a\u95f2\u7684CPU\u6570\u76ee TotalMem \uff1a\u5206\u533a\u8282\u70b9\u7684\u603b\u5185\u5b58 AvailMem \uff1a\u5206\u533a\u4e2d\u5f53\u524d\u53ef\u4ee5\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f AllocMem \uff1a\u5206\u533a\u4e2d\u5df2\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f FreeMem \uff1a\u5206\u533a\u4e2d\u7a7a\u95f2\u7684\u5185\u5b58\u5927\u5c0f HostList \uff1a\u5206\u533a\u4e2d\u6240\u6709\u8282\u70b9\u7684\u8282\u70b9\u540d\u5217\u8868 1.2 \u67e5\u770b\u8282\u70b9\u72b6\u6001 ccontrol show node ccontrol show node\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 NodeName \uff1a\u8282\u70b9\u540d State \uff1a\u8282\u70b9\u72b6\u6001 IDLE \uff1a \u8282\u70b9\u7a7a\u95f2\uff0c\u53ef\u4f7f\u7528 DOWN \uff1a \u8282\u70b9\u5b95\u673a\uff0c\u4e0d\u53ef\u7528 CPUs \uff1a\u8282\u70b9CPU\u6570\u76ee AllocCpus \uff1a\u8282\u70b9\u5df2\u5206\u914d\u7684CPU\u6570\u76ee FreeCpus \uff1a\u8282\u70b9\u7a7a\u95f2\u7684CPU\u6570\u76ee RealMemory \uff1a\u8282\u70b9\u7684\u5b9e\u9645\u5185\u5b58\u5927\u5c0f AllocMem \uff1a\u8282\u70b9\u5df2\u7ecf\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f FreeMem \uff1a\u8282\u70b9\u7a7a\u95f2\u7684\u5185\u5b58\u5927\u5c0f Patition \uff1a\u8282\u70b9\u6240\u5c5e\u5206\u533a RunningTask \uff1a\u8282\u70b9\u4e0a\u6b63\u5728\u8fd0\u884c\u7684\u4f5c\u4e1a\u6570\u91cf 1.3 \u67e5\u770b\u4f5c\u4e1a\u72b6\u6001 ccontrol show job ccontrol show job \u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 JobId\uff1a \u4f5c\u4e1a\u53f7 JobName\uff1a \u4f5c\u4e1a\u540d UserId\uff1a \u4f5c\u4e1a\u6240\u5c5e\u7528\u6237 GroupId\uff1a \u5206\u7ec4id Account\uff1a \u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237 JobState\uff1a \u4f5c\u4e1a\u72b6\u6001 RunTime\uff1a \u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4 TimeLimit\uff1a \u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u9650\u5236 SubmitTime\uff1a \u4f5c\u4e1a\u63d0\u4ea4\u65f6\u95f4 StartTime\uff1a \u4f5c\u4e1a\u5f00\u59cb\u65f6\u95f4 EndTime\uff1a \u4f5c\u4e1a\u7ed3\u675f\u65f6\u95f4 Partition\uff1a \u4f5c\u4e1a\u6240\u5c5e\u5206\u533a Nodelist\uff1a \u4f5c\u4e1a\u8fd0\u884c\u7684\u8282\u70b9 NumNodes\uff1a \u8282\u70b9\u6570\u91cf 2. \u4fee\u6539 \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a job\uff1a \u67e5\u8be2\u4f5c\u4e1a\u4fe1\u606f node\uff1a \u67e5\u8be2\u8282\u70b9\u4fe1\u606f ccontrol update -h 2.1 \u4fee\u6539\u4f5c\u4e1a\u4fe1\u606f \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -J/--job-name string\uff1a \u4f5c\u4e1a\u540d -P/--priority float \uff1a \u4f5c\u4e1a\u4f18\u5148\u7ea7 -T/--time-limit string\uff1a \u4f5c\u4e1a\u8d85\u65f6\u65f6\u957f ccontrol update job -h ccontrol update job -J 30685 -T 0:25:25 ccontrol update job -J 191 -P 2.0 2 .2 \u4fee\u6539\u8282\u70b9\u4fe1\u606f \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -n/--name string\uff1a \u8282\u70b9\u540d -r/--reason string \uff1a \u8bbe\u7f6e\u4fee\u6539\u539f\u56e0 -t/--state string\uff1a \u4fee\u6539\u8282\u70b9\u72b6\u6001 ccontrol update node -h ccontrol update node -n crane01 -t drain -r improving performance \u4e3b\u8981\u53c2\u6570\uff1a -c/--cpu \uff1a\u8282\u70b9\u7684\u6838\u5fc3\u6570 \uff08-h\u5217\u8868\u65e0\u8be5\u53c2\u6570\uff09 -M/--memory \uff1a\u8282\u70b9\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u9ed8\u8ba4\u662fMB \uff08-h\u5217\u8868\u65e0\u8be5\u53c2\u6570\uff09 -n/--name \uff1a\u8282\u70b9\u540d\u79f0 -P/--partition \uff1a\u8282\u70b9\u6240\u5c5e\u7684\u5206\u533a \uff08-h\u5217\u8868\u65e0\u8be5\u53c2\u6570\uff09 \u4ee5\u4e0b\u53c2\u6570\u548c\u4e0a\u9762\u53c2\u6570\u4e0d\u80fd\u4e00\u8d77\u8bbe\u7f6e\uff0c\u4e0b\u9762\u53c2\u6570\u7528\u4e8e\u4fee\u6539\u8282\u70b9\u72b6\u6001 -r/--reason \uff1a\u8bbe\u7f6e\u72b6\u6001\u6539\u53d8\u539f\u56e0 -t/--state \uff1a\u8bbe\u7f6e\u8282\u70b9\u72b6\u6001 3. \u6682\u505c/\u6062\u590d 3.1 \u6682\u505c\u4f5c\u4e1a\u8c03\u5ea6 \u4e3b\u8981\u53c2\u6570\uff1a --time-limit/-T\uff1a \u4fee\u6539\u65f6\u95f4\u9650\u5236 ccontrol hold 30751 #\u6682\u505c\u8c03\u5ea6\u7f16\u53f7\u4e3a30751\u7684\u4efb\u52a1 ccontrol hold 30751 -t 0:25:25 #\u6682\u505c\u8c03\u5ea6\u7f16\u53f7\u4e3a30751\u7684\u4efb\u52a125\u5206\u949f25\u79d2\u949f\uff08\u968f\u540e\u89e3\u9664\u6682\u505c\uff09 hold \u63a5\u53d7 job_id \u7684\u65b9\u5f0f\u4e0e ccancel \u76f8\u540c\uff0c\u8981\u6c42\u4e3a\u9017\u53f7\u5206\u9694\u7684\u4efb\u52a1\u7f16\u53f7\u3002 \u53ea\u80fd hold pending \u4efb\u52a1 \u5982\u679c\u6b64\u524d\u6709\u8bbe\u7f6e\u89e3\u9664\u6682\u505c\u7684\u5b9a\u65f6\u5668\uff0c\u8be5\u64cd\u4f5c\u4f1a\u53d6\u6d88\u539f\u6709\u7684\u5b9a\u65f6\u5668\u3002 \u4f7f\u7528 cqueue \u67e5\u8be2\u65f6\uff0c\u5982\u679c\u4efb\u52a1\u88ab hold\uff0cNode(Reason) \u4e00\u5217\u4f1a\u663e\u793a \"Held\"\u3002 3.2 \u7ee7\u7eed\u4f5c\u4e1a\u8c03\u5ea6 ccontrol release 30751 \u5982\u679c\u6b64\u524d\u6709\u8bbe\u7f6e\u89e3\u9664\u6682\u505c\u7684\u5b9a\u65f6\u5668\uff0c\u8be5\u64cd\u4f5c\u4f1a\u53d6\u6d88\u539f\u6709\u7684\u5b9a\u65f6\u5668\u3002 \u53ea\u80fd release pending \u4efb\u52a11 4 . completion \u4e3b\u8981\u547d\u4ee4 \uff1a bash \uff1a\u4e3abash\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c fish \uff1a\u4e3afish\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c powershell \uff1a\u4e3apowershell\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c zsh \uff1a\u4e3azsh\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help: \u663e\u793a\u5e2e\u52a9 -C/--config string\uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") --json\uff1a json\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c","title":"ccontrol \u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u72b6\u6001"},{"location":"command/ccontrol/#ccontrol","text":"ccontrol\u53ef\u4ee5\u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u7684\u72b6\u6001\u3002 \u4e3b\u8981\u547d\u4ee4 help \uff1a\u663e\u793a\u5e2e\u52a9 show \uff1a\u663e\u793a\u5b9e\u4f53\u7684\u72b6\u6001\uff0c\u9ed8\u8ba4\u4e3a\u6240\u6709\u8bb0\u5f55 update \uff1a\u4fee\u6539\u4f5c\u4e1a/\u5206\u533a/\u8282\u70b9\u4fe1\u606f hold \uff1a\u6682\u505c\u4f5c\u4e1a\u8c03\u5ea6 release \uff1a\u7ee7\u7eed\u4f5c\u4e1a\u8c03\u5ea6 completion \uff1a\u4e3a\u6307\u5b9a\u7684shell\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c create\uff1a \u521b\u5efa\u4e00\u4e2a\u65b0\u5b9e\u4f53 delete\uff1a \u5220\u9664\u6307\u5b9a\u7684\u5b9e\u4f53 \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\")","title":"ccontrol \u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u72b6\u6001"},{"location":"command/ccontrol/#1","text":"\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a config: \u67e5\u8be2\u914d\u7f6e\u4fe1\u606f job\uff1a \u67e5\u8be2\u4f5c\u4e1a\u4fe1\u606f node\uff1a \u67e5\u8be2\u8282\u70b9\u4fe1\u606f partition \uff1a\u67e5\u770b\u96c6\u7fa4\u5206\u533a\u60c5\u51b5 ccontrol show -h","title":"1. \u67e5\u770b"},{"location":"command/ccontrol/#1-1","text":"ccontrol show partition ccontrol show partition\u8fd0\u884c\u7ed3\u679c\u5c55\u793a","title":"1. 1 \u67e5\u770b\u5206\u533a\u72b6\u6001"},{"location":"command/ccontrol/#_1","text":"PartitionName \uff1a\u5206\u533a\u540d State \uff1a\u5206\u533a\u72b6\u6001 TotalNodes \uff1a\u5206\u533a\u8282\u70b9\u6570\u76ee AliveNodes \uff1a\u5206\u533a\u4e2d\u53ef\u8fd0\u884c\u7684\u8282\u70b9\u6570\u76ee TotalCpus \uff1a\u5206\u533a\u4e2d\u6240\u6709\u8282\u70b9\u603bCPU\u6570\u76ee AvailCpus \uff1a\u5206\u533a\u4e2d\u6240\u6709\u53ef\u4ee5\u4f7f\u7528\u7684CPU\u6570\u76ee AllocCpus \uff1a\u5206\u533a\u4e2d\u5df2\u7ecf\u88ab\u5206\u914d\u7684CPU\u6570\u76ee FreeCpus \uff1a\u5206\u533a\u4e2d\u7a7a\u95f2\u7684CPU\u6570\u76ee TotalMem \uff1a\u5206\u533a\u8282\u70b9\u7684\u603b\u5185\u5b58 AvailMem \uff1a\u5206\u533a\u4e2d\u5f53\u524d\u53ef\u4ee5\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f AllocMem \uff1a\u5206\u533a\u4e2d\u5df2\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f FreeMem \uff1a\u5206\u533a\u4e2d\u7a7a\u95f2\u7684\u5185\u5b58\u5927\u5c0f HostList \uff1a\u5206\u533a\u4e2d\u6240\u6709\u8282\u70b9\u7684\u8282\u70b9\u540d\u5217\u8868","title":"\u4e3b\u8981\u8f93\u51fa\u9879"},{"location":"command/ccontrol/#12","text":"ccontrol show node ccontrol show node\u8fd0\u884c\u7ed3\u679c\u5c55\u793a","title":"1.2 \u67e5\u770b\u8282\u70b9\u72b6\u6001"},{"location":"command/ccontrol/#_2","text":"NodeName \uff1a\u8282\u70b9\u540d State \uff1a\u8282\u70b9\u72b6\u6001 IDLE \uff1a \u8282\u70b9\u7a7a\u95f2\uff0c\u53ef\u4f7f\u7528 DOWN \uff1a \u8282\u70b9\u5b95\u673a\uff0c\u4e0d\u53ef\u7528 CPUs \uff1a\u8282\u70b9CPU\u6570\u76ee AllocCpus \uff1a\u8282\u70b9\u5df2\u5206\u914d\u7684CPU\u6570\u76ee FreeCpus \uff1a\u8282\u70b9\u7a7a\u95f2\u7684CPU\u6570\u76ee RealMemory \uff1a\u8282\u70b9\u7684\u5b9e\u9645\u5185\u5b58\u5927\u5c0f AllocMem \uff1a\u8282\u70b9\u5df2\u7ecf\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f FreeMem \uff1a\u8282\u70b9\u7a7a\u95f2\u7684\u5185\u5b58\u5927\u5c0f Patition \uff1a\u8282\u70b9\u6240\u5c5e\u5206\u533a RunningTask \uff1a\u8282\u70b9\u4e0a\u6b63\u5728\u8fd0\u884c\u7684\u4f5c\u4e1a\u6570\u91cf","title":"\u4e3b\u8981\u8f93\u51fa\u9879"},{"location":"command/ccontrol/#13","text":"ccontrol show job ccontrol show job \u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 JobId\uff1a \u4f5c\u4e1a\u53f7 JobName\uff1a \u4f5c\u4e1a\u540d UserId\uff1a \u4f5c\u4e1a\u6240\u5c5e\u7528\u6237 GroupId\uff1a \u5206\u7ec4id Account\uff1a \u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237 JobState\uff1a \u4f5c\u4e1a\u72b6\u6001 RunTime\uff1a \u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4 TimeLimit\uff1a \u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u9650\u5236 SubmitTime\uff1a \u4f5c\u4e1a\u63d0\u4ea4\u65f6\u95f4 StartTime\uff1a \u4f5c\u4e1a\u5f00\u59cb\u65f6\u95f4 EndTime\uff1a \u4f5c\u4e1a\u7ed3\u675f\u65f6\u95f4 Partition\uff1a \u4f5c\u4e1a\u6240\u5c5e\u5206\u533a Nodelist\uff1a \u4f5c\u4e1a\u8fd0\u884c\u7684\u8282\u70b9 NumNodes\uff1a \u8282\u70b9\u6570\u91cf","title":"1.3 \u67e5\u770b\u4f5c\u4e1a\u72b6\u6001"},{"location":"command/ccontrol/#2","text":"\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a job\uff1a \u67e5\u8be2\u4f5c\u4e1a\u4fe1\u606f node\uff1a \u67e5\u8be2\u8282\u70b9\u4fe1\u606f ccontrol update -h","title":"2. \u4fee\u6539"},{"location":"command/ccontrol/#21","text":"\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -J/--job-name string\uff1a \u4f5c\u4e1a\u540d -P/--priority float \uff1a \u4f5c\u4e1a\u4f18\u5148\u7ea7 -T/--time-limit string\uff1a \u4f5c\u4e1a\u8d85\u65f6\u65f6\u957f ccontrol update job -h ccontrol update job -J 30685 -T 0:25:25 ccontrol update job -J 191 -P 2.0","title":"2.1 \u4fee\u6539\u4f5c\u4e1a\u4fe1\u606f"},{"location":"command/ccontrol/#22","text":"\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -n/--name string\uff1a \u8282\u70b9\u540d -r/--reason string \uff1a \u8bbe\u7f6e\u4fee\u6539\u539f\u56e0 -t/--state string\uff1a \u4fee\u6539\u8282\u70b9\u72b6\u6001 ccontrol update node -h ccontrol update node -n crane01 -t drain -r improving performance \u4e3b\u8981\u53c2\u6570\uff1a -c/--cpu \uff1a\u8282\u70b9\u7684\u6838\u5fc3\u6570 \uff08-h\u5217\u8868\u65e0\u8be5\u53c2\u6570\uff09 -M/--memory \uff1a\u8282\u70b9\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u9ed8\u8ba4\u662fMB \uff08-h\u5217\u8868\u65e0\u8be5\u53c2\u6570\uff09 -n/--name \uff1a\u8282\u70b9\u540d\u79f0 -P/--partition \uff1a\u8282\u70b9\u6240\u5c5e\u7684\u5206\u533a \uff08-h\u5217\u8868\u65e0\u8be5\u53c2\u6570\uff09 \u4ee5\u4e0b\u53c2\u6570\u548c\u4e0a\u9762\u53c2\u6570\u4e0d\u80fd\u4e00\u8d77\u8bbe\u7f6e\uff0c\u4e0b\u9762\u53c2\u6570\u7528\u4e8e\u4fee\u6539\u8282\u70b9\u72b6\u6001 -r/--reason \uff1a\u8bbe\u7f6e\u72b6\u6001\u6539\u53d8\u539f\u56e0 -t/--state \uff1a\u8bbe\u7f6e\u8282\u70b9\u72b6\u6001","title":"2.2 \u4fee\u6539\u8282\u70b9\u4fe1\u606f"},{"location":"command/ccontrol/#3","text":"","title":"3. \u6682\u505c/\u6062\u590d"},{"location":"command/ccontrol/#31","text":"\u4e3b\u8981\u53c2\u6570\uff1a --time-limit/-T\uff1a \u4fee\u6539\u65f6\u95f4\u9650\u5236 ccontrol hold 30751 #\u6682\u505c\u8c03\u5ea6\u7f16\u53f7\u4e3a30751\u7684\u4efb\u52a1 ccontrol hold 30751 -t 0:25:25 #\u6682\u505c\u8c03\u5ea6\u7f16\u53f7\u4e3a30751\u7684\u4efb\u52a125\u5206\u949f25\u79d2\u949f\uff08\u968f\u540e\u89e3\u9664\u6682\u505c\uff09 hold \u63a5\u53d7 job_id \u7684\u65b9\u5f0f\u4e0e ccancel \u76f8\u540c\uff0c\u8981\u6c42\u4e3a\u9017\u53f7\u5206\u9694\u7684\u4efb\u52a1\u7f16\u53f7\u3002 \u53ea\u80fd hold pending \u4efb\u52a1 \u5982\u679c\u6b64\u524d\u6709\u8bbe\u7f6e\u89e3\u9664\u6682\u505c\u7684\u5b9a\u65f6\u5668\uff0c\u8be5\u64cd\u4f5c\u4f1a\u53d6\u6d88\u539f\u6709\u7684\u5b9a\u65f6\u5668\u3002 \u4f7f\u7528 cqueue \u67e5\u8be2\u65f6\uff0c\u5982\u679c\u4efb\u52a1\u88ab hold\uff0cNode(Reason) \u4e00\u5217\u4f1a\u663e\u793a \"Held\"\u3002","title":"3.1 \u6682\u505c\u4f5c\u4e1a\u8c03\u5ea6"},{"location":"command/ccontrol/#32","text":"ccontrol release 30751 \u5982\u679c\u6b64\u524d\u6709\u8bbe\u7f6e\u89e3\u9664\u6682\u505c\u7684\u5b9a\u65f6\u5668\uff0c\u8be5\u64cd\u4f5c\u4f1a\u53d6\u6d88\u539f\u6709\u7684\u5b9a\u65f6\u5668\u3002 \u53ea\u80fd release pending \u4efb\u52a11","title":"3.2 \u7ee7\u7eed\u4f5c\u4e1a\u8c03\u5ea6"},{"location":"command/ccontrol/#4-completion","text":"\u4e3b\u8981\u547d\u4ee4 \uff1a bash \uff1a\u4e3abash\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c fish \uff1a\u4e3afish\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c powershell \uff1a\u4e3apowershell\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c zsh \uff1a\u4e3azsh\u751f\u6210\u81ea\u52a8\u8865\u5168\u811a\u672c \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help: \u663e\u793a\u5e2e\u52a9 -C/--config string\uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") --json\uff1a json\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c","title":"4. completion"},{"location":"command/ccontrol_yufa/","text":"ccontrol\u8bed\u6cd5 \u547d\u4ee4\u4e3b\u8981\u7ed3\u6784 ccontrol\u53ef\u4ee5\u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u7684\u72b6\u6001\u3002 \u4e3b\u8981\u547d\u4ee4 help \uff1a\u663e\u793a\u5e2e\u52a9 show \uff1a\u663e\u793a\u5b9e\u4f53\u7684\u72b6\u6001\uff0c\u9ed8\u8ba4\u4e3a\u6240\u6709\u8bb0\u5f55 update \uff1a\u4fee\u6539\u4f5c\u4e1a/\u5206\u533a/\u8282\u70b9\u4fe1\u606f hold \uff1a\u6682\u505c\u4f5c\u4e1a\u8c03\u5ea6 release \uff1a\u7ee7\u7eed\u4f5c\u4e1a\u8c03\u5ea6 create\uff1a \u521b\u5efa\u4e00\u4e2a\u65b0\u5b9e\u4f53 delete\uff1a \u5220\u9664\u6307\u5b9a\u7684\u5b9e\u4f53 \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") \u5404\u547d\u4ee4\u4f7f\u7528\u65b9\u5f0f \u67e5\u770b \u67e5\u770b\u5206\u533a\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol show partition \u8fd0\u884c\u622a\u56fe \uff1a \u67e5\u770b\u8282\u70b9\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol show node \u8fd0\u884c\u622a\u56fe \uff1a \u67e5\u770b\u4f5c\u4e1a\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol show job \u8fd0\u884c\u622a\u56fe \uff1a \u67e5\u770b\u9884\u5b9a\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg\uff1a ccontrol show reservation \u8fd0\u884c\u622a\u56fe \uff1a \u4fee\u6539 \u4fee\u6539\u4f5c\u4e1a\u4fe1\u606f \u53ef\u9009\u53c2\u6570\uff1a priority\uff1a\u4f18\u5148\u7ea7 timelimit\uff1a\u65f6\u95f4\u9650\u5236(\u91c7\u7528\u65f6\u95f4\u683c\u5f0f) eg\uff1a ccontrol update jobid=11 priority=1 timelimit=01:00:00 \u8fd0\u884c\u622a\u56fe \uff1a \u4fee\u6539\u8282\u70b9\u4fe1\u606f \u5fc5\u586b\u53c2\u6570\uff1a state\uff1a\u72b6\u6001 reason\uff1a\u539f\u56e0 eg: ccontrol update nodename=test_node state=drain reason=\"test\" \u8fd0\u884c\u622a\u56fe \uff1a \u4fee\u6539\u5206\u533a\u4fe1\u606f \u53ef\u9009\u53c2\u6570\uff1a accounts\uff1a\u5141\u8bb8\u7528\u6237 deniedaccounts\uff1a\u62d2\u7edd\u7684\u7528\u6237 eg\uff1a ccontrol update partition=test accounts=test_user \u8fd0\u884c\u622a\u56fe \uff1a \u6682\u505c/\u6062\u590d \u6682\u505c\u4f5c\u4e1a \u53ef\u9009\u53c2\u6570\uff1a timelimit:\u65f6\u95f4\u9650\u5236(\u91c7\u7528\u65f6\u95f4\u683c\u5f0f) eg: ccontrol hold 1 timelimit=01:00:00 \u8fd0\u884c\u622a\u56fe \uff1a \u6062\u590d\u4f5c\u4e1a \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol release 1 \u8fd0\u884c\u622a\u56fe \uff1a \u521b\u5efa/\u5220\u9664 \u521b\u5efa\u9884\u8ba2 \u5fc5\u9009\u53c2\u6570\uff1a starttime\uff1a\u5f00\u59cb\u65f6\u95f4\uff08\u91c7\u7528\u65e5\u671f|\u65f6\u95f4\u683c\u5f0f\uff09 duration\uff1a\u957f\u5ea6(\u91c7\u7528\u65f6\u95f4\u683c\u5f0f) account\uff1a\u4f7f\u7528\u8d26\u6237 \u53ef\u9009\u53c2\u6570\uff1a partition\uff1a\u4f7f\u7528\u5206\u533a nodes\uff1a\u4f7f\u7528\u8282\u70b9 user\uff1a\u4f7f\u7528\u7528\u6237 eg\uff1a ccontrol create reservation test_reservation duration=01:00:00 partition=test_partition nodes=test_node account=test_account \u6ce8\u610f\uff1a \u8fd9\u91ccuser\u652f\u6301=+\u548c=-\u7684\u7528\u6cd5\uff0c\u5f53=+\u8868\u793a\u5141\u8bb8\u7528\u6237\uff0c\u5f53=-\u7684\u65f6\u5019\u8868\u793a\u5220\u9664\u67d0\u7528\u6237 \u8fd0\u884c\u622a\u56fe \uff1a \u5220\u9664\u9884\u8ba2 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol delete reservation test_reservation \u8fd0\u884c\u622a\u56fe \uff1a \u5220\u9664\u7684\u547d\u4ee4 \u7531\u4e8e\u5220\u9664\u4e86cobra\u6846\u67b6\uff0c\u73b0\u5728completion\u81ea\u52a8\u8865\u5168\u4ee3\u7801\u547d\u4ee4\u5df2\u7ecf\u65e0\u6cd5\u4f7f\u7528 \u6587\u4ef6\u7ed3\u6784 help.go\uff1a\u7531\u4e8e\u5220\u9664\u4e86cobra\u6846\u67b6\uff0c\u73b0\u5728help\u547d\u4ee4\u7684\u8f93\u51fa\u7f16\u5199\u5728help.go\u4e2d ccontrol.go\uff1a\u5411\u540e\u7aef\u901a\u4fe1\u7684\u51fd\u6570\u5b9e\u73b0 CmdArgParser.go\uff1a\u547d\u4ee4\u89e3\u6790\u6587\u4ef6\uff0c\u5c06\u4f7f\u7528\u89e3\u6790\u5230\u7684\u547d\u4ee4\u884c\u6570\u636e\u6765\u8c03\u7528ccontrol.go\u7684\u51fd\u6570 parser.go\uff1a\u89e3\u6790\u5668\u51fd\u6570\uff0c\u5b9a\u4e49\u6570\u636e\u7ed3\u6784\u4e0e\u89e3\u6790\u89c4\u5219","title":"ccontrol\u8bed\u6cd5"},{"location":"command/ccontrol_yufa/#ccontrol","text":"","title":"ccontrol\u8bed\u6cd5"},{"location":"command/ccontrol_yufa/#_1","text":"ccontrol\u53ef\u4ee5\u67e5\u770b\u5206\u533a\u548c\u8282\u70b9\u7684\u72b6\u6001\u3002 \u4e3b\u8981\u547d\u4ee4 help \uff1a\u663e\u793a\u5e2e\u52a9 show \uff1a\u663e\u793a\u5b9e\u4f53\u7684\u72b6\u6001\uff0c\u9ed8\u8ba4\u4e3a\u6240\u6709\u8bb0\u5f55 update \uff1a\u4fee\u6539\u4f5c\u4e1a/\u5206\u533a/\u8282\u70b9\u4fe1\u606f hold \uff1a\u6682\u505c\u4f5c\u4e1a\u8c03\u5ea6 release \uff1a\u7ee7\u7eed\u4f5c\u4e1a\u8c03\u5ea6 create\uff1a \u521b\u5efa\u4e00\u4e2a\u65b0\u5b9e\u4f53 delete\uff1a \u5220\u9664\u6307\u5b9a\u7684\u5b9e\u4f53 \u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\")","title":"\u547d\u4ee4\u4e3b\u8981\u7ed3\u6784"},{"location":"command/ccontrol_yufa/#_2","text":"","title":"\u5404\u547d\u4ee4\u4f7f\u7528\u65b9\u5f0f"},{"location":"command/ccontrol_yufa/#_3","text":"\u67e5\u770b\u5206\u533a\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol show partition \u8fd0\u884c\u622a\u56fe \uff1a \u67e5\u770b\u8282\u70b9\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol show node \u8fd0\u884c\u622a\u56fe \uff1a \u67e5\u770b\u4f5c\u4e1a\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol show job \u8fd0\u884c\u622a\u56fe \uff1a \u67e5\u770b\u9884\u5b9a\u72b6\u6001 \u65e0\u53ef\u9009\u53c2\u6570 eg\uff1a ccontrol show reservation \u8fd0\u884c\u622a\u56fe \uff1a","title":"\u67e5\u770b"},{"location":"command/ccontrol_yufa/#_4","text":"\u4fee\u6539\u4f5c\u4e1a\u4fe1\u606f \u53ef\u9009\u53c2\u6570\uff1a priority\uff1a\u4f18\u5148\u7ea7 timelimit\uff1a\u65f6\u95f4\u9650\u5236(\u91c7\u7528\u65f6\u95f4\u683c\u5f0f) eg\uff1a ccontrol update jobid=11 priority=1 timelimit=01:00:00 \u8fd0\u884c\u622a\u56fe \uff1a \u4fee\u6539\u8282\u70b9\u4fe1\u606f \u5fc5\u586b\u53c2\u6570\uff1a state\uff1a\u72b6\u6001 reason\uff1a\u539f\u56e0 eg: ccontrol update nodename=test_node state=drain reason=\"test\" \u8fd0\u884c\u622a\u56fe \uff1a \u4fee\u6539\u5206\u533a\u4fe1\u606f \u53ef\u9009\u53c2\u6570\uff1a accounts\uff1a\u5141\u8bb8\u7528\u6237 deniedaccounts\uff1a\u62d2\u7edd\u7684\u7528\u6237 eg\uff1a ccontrol update partition=test accounts=test_user \u8fd0\u884c\u622a\u56fe \uff1a","title":"\u4fee\u6539"},{"location":"command/ccontrol_yufa/#_5","text":"\u6682\u505c\u4f5c\u4e1a \u53ef\u9009\u53c2\u6570\uff1a timelimit:\u65f6\u95f4\u9650\u5236(\u91c7\u7528\u65f6\u95f4\u683c\u5f0f) eg: ccontrol hold 1 timelimit=01:00:00 \u8fd0\u884c\u622a\u56fe \uff1a \u6062\u590d\u4f5c\u4e1a \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol release 1 \u8fd0\u884c\u622a\u56fe \uff1a","title":"\u6682\u505c/\u6062\u590d"},{"location":"command/ccontrol_yufa/#_6","text":"\u521b\u5efa\u9884\u8ba2 \u5fc5\u9009\u53c2\u6570\uff1a starttime\uff1a\u5f00\u59cb\u65f6\u95f4\uff08\u91c7\u7528\u65e5\u671f|\u65f6\u95f4\u683c\u5f0f\uff09 duration\uff1a\u957f\u5ea6(\u91c7\u7528\u65f6\u95f4\u683c\u5f0f) account\uff1a\u4f7f\u7528\u8d26\u6237 \u53ef\u9009\u53c2\u6570\uff1a partition\uff1a\u4f7f\u7528\u5206\u533a nodes\uff1a\u4f7f\u7528\u8282\u70b9 user\uff1a\u4f7f\u7528\u7528\u6237 eg\uff1a ccontrol create reservation test_reservation duration=01:00:00 partition=test_partition nodes=test_node account=test_account \u6ce8\u610f\uff1a \u8fd9\u91ccuser\u652f\u6301=+\u548c=-\u7684\u7528\u6cd5\uff0c\u5f53=+\u8868\u793a\u5141\u8bb8\u7528\u6237\uff0c\u5f53=-\u7684\u65f6\u5019\u8868\u793a\u5220\u9664\u67d0\u7528\u6237 \u8fd0\u884c\u622a\u56fe \uff1a \u5220\u9664\u9884\u8ba2 \u65e0\u53ef\u9009\u53c2\u6570 eg: ccontrol delete reservation test_reservation \u8fd0\u884c\u622a\u56fe \uff1a","title":"\u521b\u5efa/\u5220\u9664"},{"location":"command/ccontrol_yufa/#_7","text":"\u7531\u4e8e\u5220\u9664\u4e86cobra\u6846\u67b6\uff0c\u73b0\u5728completion\u81ea\u52a8\u8865\u5168\u4ee3\u7801\u547d\u4ee4\u5df2\u7ecf\u65e0\u6cd5\u4f7f\u7528","title":"\u5220\u9664\u7684\u547d\u4ee4"},{"location":"command/ccontrol_yufa/#_8","text":"help.go\uff1a\u7531\u4e8e\u5220\u9664\u4e86cobra\u6846\u67b6\uff0c\u73b0\u5728help\u547d\u4ee4\u7684\u8f93\u51fa\u7f16\u5199\u5728help.go\u4e2d ccontrol.go\uff1a\u5411\u540e\u7aef\u901a\u4fe1\u7684\u51fd\u6570\u5b9e\u73b0 CmdArgParser.go\uff1a\u547d\u4ee4\u89e3\u6790\u6587\u4ef6\uff0c\u5c06\u4f7f\u7528\u89e3\u6790\u5230\u7684\u547d\u4ee4\u884c\u6570\u636e\u6765\u8c03\u7528ccontrol.go\u7684\u51fd\u6570 parser.go\uff1a\u89e3\u6790\u5668\u51fd\u6570\uff0c\u5b9a\u4e49\u6570\u636e\u7ed3\u6784\u4e0e\u89e3\u6790\u89c4\u5219","title":"\u6587\u4ef6\u7ed3\u6784"},{"location":"command/ceff/","text":"ceff \u67e5\u770b\u4f5c\u4e1a\u8fd0\u884c\u5b9e\u51b5 ceff \u7528\u6765\u663e\u793a\u4f5c\u4e1a\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u5b9e\u65f6\u60c5\u51b5\u3002 \u67e5\u770b\u4efb\u52a1\u5b9e\u65f6\u60c5\u51b5\uff1a ceff \u4f5c\u4e1a\u540d,\u4f5c\u4e1a\u540d ceff\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 JobId : \u4f5c\u4e1a\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002 Qos : \u4f5c\u4e1a\u8fd0\u884c\u6240\u5728\u7684\u96c6\u7fa4\u540d\u79f0\u3002 User/Group : \u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\u3002 Account \uff1a\u8d26\u6237\u540d State : \u4f5c\u4e1a\u7684\u5f53\u524d\u72b6\u6001\uff08\u4f8b\u5982\uff0cCOMPLETED\u3001FAILED\u3001CANCELLED \u7b49\uff09\u3002 Cores : \u4f5c\u4e1a\u4f7f\u7528\u7684\u6838\u5fc3\u6570\u91cf\u3002 Nodes : \u4f5c\u4e1a\u5206\u914d\u7684\u8282\u70b9\u6570\u91cf\u3002 Cores per node : \u6bcf\u4e2a\u8282\u70b9\u5206\u914d\u7684\u6838\u5fc3\u6570\u91cf\u3002 CPU Utilized : \u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u3002 CPU Efficiency : CPU \u4f7f\u7528\u6548\u7387\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u5360\u5206\u914d\u7684\u6838\u5fc3\u5899\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002 Job Wall-clock time : \u4f5c\u4e1a\u7684\u5899\u949f\u65f6\u95f4\uff0c\u5373\u4f5c\u4e1a\u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u7684\u603b\u65f6\u95f4\u3002 Memory Utilized : \u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684\u5185\u5b58\u91cf\u3002 Memory Efficiency : \u5185\u5b58\u4f7f\u7528\u6548\u7387\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684\u5185\u5b58\u91cf\u5360\u5206\u914d\u5185\u5b58\u7684\u767e\u5206\u6bd4\u3002 \u4e3b\u8981\u53c2\u6570 -h/--help : \u663e\u793a\u5e2e\u52a9 -C/--config string\uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4\u4e3a \"/etc/crane/config.yaml\") -- json \u8f93\u51fa\u540e\u7aef\u8fd4\u56de\u4efb\u52a1\u4fe1\u606f -v, --version \u663e\u793aceff \u7684\u7248\u672c \u4f8b\uff1a ceff -h ceff \u4f5c\u4e1aid --json","title":"ceff \u67e5\u770b\u4f5c\u4e1a\u8fd0\u884c\u5b9e\u51b5"},{"location":"command/ceff/#ceff","text":"ceff \u7528\u6765\u663e\u793a\u4f5c\u4e1a\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u5b9e\u65f6\u60c5\u51b5\u3002 \u67e5\u770b\u4efb\u52a1\u5b9e\u65f6\u60c5\u51b5\uff1a ceff \u4f5c\u4e1a\u540d,\u4f5c\u4e1a\u540d ceff\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 JobId : \u4f5c\u4e1a\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002 Qos : \u4f5c\u4e1a\u8fd0\u884c\u6240\u5728\u7684\u96c6\u7fa4\u540d\u79f0\u3002 User/Group : \u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\u3002 Account \uff1a\u8d26\u6237\u540d State : \u4f5c\u4e1a\u7684\u5f53\u524d\u72b6\u6001\uff08\u4f8b\u5982\uff0cCOMPLETED\u3001FAILED\u3001CANCELLED \u7b49\uff09\u3002 Cores : \u4f5c\u4e1a\u4f7f\u7528\u7684\u6838\u5fc3\u6570\u91cf\u3002 Nodes : \u4f5c\u4e1a\u5206\u914d\u7684\u8282\u70b9\u6570\u91cf\u3002 Cores per node : \u6bcf\u4e2a\u8282\u70b9\u5206\u914d\u7684\u6838\u5fc3\u6570\u91cf\u3002 CPU Utilized : \u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u3002 CPU Efficiency : CPU \u4f7f\u7528\u6548\u7387\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684 CPU \u65f6\u95f4\u5360\u5206\u914d\u7684\u6838\u5fc3\u5899\u65f6\u95f4\u7684\u767e\u5206\u6bd4\u3002 Job Wall-clock time : \u4f5c\u4e1a\u7684\u5899\u949f\u65f6\u95f4\uff0c\u5373\u4f5c\u4e1a\u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u7684\u603b\u65f6\u95f4\u3002 Memory Utilized : \u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684\u5185\u5b58\u91cf\u3002 Memory Efficiency : \u5185\u5b58\u4f7f\u7528\u6548\u7387\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u4f5c\u4e1a\u5b9e\u9645\u4f7f\u7528\u7684\u5185\u5b58\u91cf\u5360\u5206\u914d\u5185\u5b58\u7684\u767e\u5206\u6bd4\u3002","title":"ceff \u67e5\u770b\u4f5c\u4e1a\u8fd0\u884c\u5b9e\u51b5"},{"location":"command/ceff/#_1","text":"-h/--help : \u663e\u793a\u5e2e\u52a9 -C/--config string\uff1a \u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4\u4e3a \"/etc/crane/config.yaml\") -- json \u8f93\u51fa\u540e\u7aef\u8fd4\u56de\u4efb\u52a1\u4fe1\u606f -v, --version \u663e\u793aceff \u7684\u7248\u672c \u4f8b\uff1a ceff -h ceff \u4f5c\u4e1aid --json","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/cinfo/","text":"cinfo \u67e5\u770b\u8282\u70b9\u4e0e\u5206\u533a\u72b6\u6001 cinfo\u53ef\u67e5\u8be2\u5404\u5206\u533a\u8282\u70b9\u7684\u961f\u5217\u8d44\u6e90\u4fe1\u606f\u3002 \u67e5\u770b\u5206\u533a\u8282\u70b9\u72b6\u6001\uff1a cinfo cinfo\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 - PARTITION \uff1a\u5206\u533a\u540d - AVAIL \uff1a \u5206\u533a\u72b6\u6001 - up: \u53ef\u7528 - down:\u4e0d\u53ef\u7528 - NODES \uff1a\u8282\u70b9\u6570 - STATE \uff1a \u8282\u70b9\u72b6\u6001 - idle \uff1a \u7a7a\u95f2 - mix\uff1a \u8282\u70b9\u90e8\u5206\u6838\u5fc3\u53ef\u4ee5\u4f7f\u7528 - alloc\uff1a \u8282\u70b9\u5df2\u88ab\u5360\u7528 - down\uff1a \u8282\u70b9\u4e0d\u53ef\u7528 - NODELIST \uff1a \u8282\u70b9\u5217\u8868 \u4e3b\u8981\u53c2\u6570 - -h/--help : \u663e\u793a\u5e2e\u52a9 - -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4\u4e3a \"/etc/crane/config.yaml\") - -d/--dead \uff1a\u53ea\u663e\u793a\u65e0\u54cd\u5e94\u8282\u70b9 - -i/--iterate uint \uff1a\u6307\u5b9a\u95f4\u9694\u79d2\u6570\u5237\u65b0\u67e5\u8be2\u7ed3\u679c\u3002\u5982 -i=3\u8868\u793a\u6bcf\u9694\u4e09\u79d2\u8f93\u51fa\u4e00\u6b21\u67e5\u8be2\u7ed3\u679c - -o/--format string \u6307\u5b9a\u8f93\u51fa\u683c\u5f0f - % p /% Partition \u2014\u2014 \u663e\u793a\u5f53\u524d\u73af\u5883\u4e2d\u7684\u6240\u6709\u5206\u533a - % a/% Avail \u2014\u2014 \u663e\u793a\u8282\u70b9\u7684\u72b6\u6001 - % n/% Nodes \u2014\u2014 \u663e\u793a\u5206\u533a\u8282\u70b9\u7684\u6570\u91cf - % s/% State \u2014\u2014 \u663e\u793a\u5206\u533a\u8282\u70b9\u7684\u72b6\u6001 - % l/% NodeList \u2014\u2014 \u663e\u793a\u5206\u533a\u4e2d\u7684\u6240\u6709\u8282\u70b9\u5217\u8868 \u6bcf\u4e2a\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\u90fd\u53ef\u4ee5\u7528\u5bbd\u5ea6\u8bf4\u660e\u7b26\u4fee\u6539\uff08\u4f8b\u5982\uff0c\u201c%.5j\u201d \uff09\u3002\u5982\u679c\u6307\u5b9a\u4e86\u5bbd\u5ea6\uff0c\u5b57\u6bb5\u5c06\u88ab\u683c\u5f0f\u5316\u4e3a\u81f3\u5c11\u8fbe\u5230\u8be5\u5bbd\u5ea6\u3002\u5982\u679c\u683c\u5f0f\u65e0\u6548\u6216\u65e0\u6cd5\u8bc6\u522b\uff0c\u7a0b\u5e8f\u5c06\u62a5\u9519\u5e76\u7ec8\u6b62\u3002 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -n/--nodes string \uff1a\u663e\u793a\u6307\u5b9a\u8282\u70b9\u4fe1\u606f\uff0c\u591a\u4e2a\u8282\u70b9\u7528\u9017\u53f7\u9694\u5f00\u3002\u4f8b\uff1acinfo -n crane01,crane02 -N/--noheader \uff1a\u8f93\u51fa\u9690\u85cf\u8868\u5934 -p/--partition string \uff1a\u663e\u793a\u6307\u5b9a\u5206\u533a\u4fe1\u606f\uff0c\u591a\u4e2a\u5206\u533a\u7528\u9017\u53f7\u9694\u5f00\u3002\u4f8b\uff1acinfo -p CPU,GPU -r/--responding \uff1a\u53ea\u663e\u793a\u6709\u54cd\u5e94\u8282\u70b9 -t/--states string \uff1a\u4ec5\u663e\u793a\u72b6\u6001\u7684\u4fe1\u606f\u3002\u72b6\u6001\u53ef\u4ee5\u4e3a(\u4e0d\u533a\u5206\u5927\u5c0f\u5199): IDLE, MIX, ALLOC\u548cDOWN -v/--version \uff1a\u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a cinfo cinfo -h cinfo -N cinfo -d cinfo -i 3 cinfo -n crane01,crane02,crane03 cinfo -p GPU,CPU cinfo -r cinfo -t IDLE cinfo -v","title":"cinfo \u67e5\u770b\u8282\u70b9\u4e0e\u5206\u533a\u72b6\u6001"},{"location":"command/cinfo/#cinfo","text":"cinfo\u53ef\u67e5\u8be2\u5404\u5206\u533a\u8282\u70b9\u7684\u961f\u5217\u8d44\u6e90\u4fe1\u606f\u3002 \u67e5\u770b\u5206\u533a\u8282\u70b9\u72b6\u6001\uff1a cinfo cinfo\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 - PARTITION \uff1a\u5206\u533a\u540d - AVAIL \uff1a \u5206\u533a\u72b6\u6001 - up: \u53ef\u7528 - down:\u4e0d\u53ef\u7528 - NODES \uff1a\u8282\u70b9\u6570 - STATE \uff1a \u8282\u70b9\u72b6\u6001 - idle \uff1a \u7a7a\u95f2 - mix\uff1a \u8282\u70b9\u90e8\u5206\u6838\u5fc3\u53ef\u4ee5\u4f7f\u7528 - alloc\uff1a \u8282\u70b9\u5df2\u88ab\u5360\u7528 - down\uff1a \u8282\u70b9\u4e0d\u53ef\u7528 - NODELIST \uff1a \u8282\u70b9\u5217\u8868 \u4e3b\u8981\u53c2\u6570 - -h/--help : \u663e\u793a\u5e2e\u52a9 - -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4\u4e3a \"/etc/crane/config.yaml\") - -d/--dead \uff1a\u53ea\u663e\u793a\u65e0\u54cd\u5e94\u8282\u70b9 - -i/--iterate uint \uff1a\u6307\u5b9a\u95f4\u9694\u79d2\u6570\u5237\u65b0\u67e5\u8be2\u7ed3\u679c\u3002\u5982 -i=3\u8868\u793a\u6bcf\u9694\u4e09\u79d2\u8f93\u51fa\u4e00\u6b21\u67e5\u8be2\u7ed3\u679c - -o/--format string \u6307\u5b9a\u8f93\u51fa\u683c\u5f0f - % p /% Partition \u2014\u2014 \u663e\u793a\u5f53\u524d\u73af\u5883\u4e2d\u7684\u6240\u6709\u5206\u533a - % a/% Avail \u2014\u2014 \u663e\u793a\u8282\u70b9\u7684\u72b6\u6001 - % n/% Nodes \u2014\u2014 \u663e\u793a\u5206\u533a\u8282\u70b9\u7684\u6570\u91cf - % s/% State \u2014\u2014 \u663e\u793a\u5206\u533a\u8282\u70b9\u7684\u72b6\u6001 - % l/% NodeList \u2014\u2014 \u663e\u793a\u5206\u533a\u4e2d\u7684\u6240\u6709\u8282\u70b9\u5217\u8868 \u6bcf\u4e2a\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\u90fd\u53ef\u4ee5\u7528\u5bbd\u5ea6\u8bf4\u660e\u7b26\u4fee\u6539\uff08\u4f8b\u5982\uff0c\u201c%.5j\u201d \uff09\u3002\u5982\u679c\u6307\u5b9a\u4e86\u5bbd\u5ea6\uff0c\u5b57\u6bb5\u5c06\u88ab\u683c\u5f0f\u5316\u4e3a\u81f3\u5c11\u8fbe\u5230\u8be5\u5bbd\u5ea6\u3002\u5982\u679c\u683c\u5f0f\u65e0\u6548\u6216\u65e0\u6cd5\u8bc6\u522b\uff0c\u7a0b\u5e8f\u5c06\u62a5\u9519\u5e76\u7ec8\u6b62\u3002 --json \uff1ajson\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -n/--nodes string \uff1a\u663e\u793a\u6307\u5b9a\u8282\u70b9\u4fe1\u606f\uff0c\u591a\u4e2a\u8282\u70b9\u7528\u9017\u53f7\u9694\u5f00\u3002\u4f8b\uff1acinfo -n crane01,crane02 -N/--noheader \uff1a\u8f93\u51fa\u9690\u85cf\u8868\u5934 -p/--partition string \uff1a\u663e\u793a\u6307\u5b9a\u5206\u533a\u4fe1\u606f\uff0c\u591a\u4e2a\u5206\u533a\u7528\u9017\u53f7\u9694\u5f00\u3002\u4f8b\uff1acinfo -p CPU,GPU -r/--responding \uff1a\u53ea\u663e\u793a\u6709\u54cd\u5e94\u8282\u70b9 -t/--states string \uff1a\u4ec5\u663e\u793a\u72b6\u6001\u7684\u4fe1\u606f\u3002\u72b6\u6001\u53ef\u4ee5\u4e3a(\u4e0d\u533a\u5206\u5927\u5c0f\u5199): IDLE, MIX, ALLOC\u548cDOWN -v/--version \uff1a\u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a cinfo cinfo -h cinfo -N cinfo -d cinfo -i 3 cinfo -n crane01,crane02,crane03 cinfo -p GPU,CPU cinfo -r cinfo -t IDLE cinfo -v","title":"cinfo \u67e5\u770b\u8282\u70b9\u4e0e\u5206\u533a\u72b6\u6001"},{"location":"command/cqueue/","text":"cqueue \u67e5\u770b\u4f5c\u4e1a\u961f\u5217 cqueue\u53ef\u4ee5\u67e5\u770b\u961f\u5217\u4e2d\u7684\u4f5c\u4e1a\u4fe1\u606f\u3002 \u67e5\u770b\u96c6\u7fa4\u4e2d\u6240\u6709\u961f\u5217\u7684\u4f5c\u4e1a\u4fe1\u606f\uff08\u5305\u62ec\u72b6\u6001pending\u3001running\u3001cancelled\uff09\uff0c\u9ed8\u8ba4\u8f93\u51fa100\u6761\u4fe1\u606f\u3002 cqueue cqueue\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 JobId \uff1a\u4f5c\u4e1a\u53f7 Partition \uff1a\u4f5c\u4e1a\u6240\u5728\u5206\u533a Name : \u4f5c\u4e1a\u540d User \uff1a\u4f5c\u4e1a\u6240\u5c5e\u7528\u6237 Account \uff1a\u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237 Status \uff1a\u4f5c\u4e1a\u72b6\u6001 Type \uff1a \u4f5c\u4e1a\u7c7b\u578b TimeLimit \uff1a\u4f5c\u4e1a\u65f6\u95f4\u9650\u5236 Nodes \uff1a\u4f5c\u4e1a\u6240\u5206\u914d\u8282\u70b9\u6570 NodeList \uff1a \u4f5c\u4e1a\u8fd0\u884c\u7684\u8282\u70b9\u540d \u4e3b\u8981\u53c2\u6570 -A/--Account string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237\uff0c\u6307\u5b9a\u591a\u4e2a\u8d26\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 -o/--format string \uff1a\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f\u3002\u7531\u767e\u5206\u53f7\uff08%\uff09\u540e\u63a5\u4e00\u4e2a\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\u6807\u8bc6\u3002 \u5728 % \u548c\u683c\u5f0f\u5b57\u7b26/\u5b57\u7b26\u4e32\u4e4b\u95f4\u7528\u70b9\uff08.\uff09\u548c\u6570\u5b57\uff0c\u53ef\u6307\u5b9a\u5b57\u6bb5\u7684\u6700\u5c0f\u5bbd\u5ea6\u3002\u652f\u6301\u7684\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\uff1a %a/%Account\uff1a \u663e\u793a\u4f5c\u4e1a\u5173\u8054\u7684\u8d26\u6237 %c/%AllocCpus\uff1a \u663e\u793a\u4f5c\u4e1a\u5df2\u5206\u914d\u7684 CPU \u6570\u91cf %e/%CpuPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684 CPU \u6570\u91cf %h/%ElapsedTime\uff1a \u663e\u793a\u4f5c\u4e1a\u81ea\u542f\u52a8\u4ee5\u6765\u7684\u5df2\u7528\u65f6\u95f4 %j/%JobId\uff1a \u663e\u793a\u4f5c\u4e1a ID %k/%Comment\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5907\u6ce8 %l/%NodeList\uff1a \u663e\u793a\u4f5c\u4e1a\u6b63\u5728\u8fd0\u884c\u7684\u8282\u70b9\u5217\u8868 %m/%TimeLimit\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u65f6\u95f4\u9650\u5236 %n/%MemPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684\u5185\u5b58\u91cf %N/%NodeNum\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9\u6570\u91cf %n/%Name\uff1a \u663e\u793a\u4f5c\u4e1a\u540d\u79f0 %P/%Partition\uff1a \u663e\u793a\u4f5c\u4e1a\u8fd0\u884c\u6240\u5728\u7684\u5206\u533a %p/%Priority\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u4f18\u5148\u7ea7 %Q/%QOS \uff1a\u663e\u793a\u4f5c\u4e1a\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS\uff09\u7ea7\u522b %R/%Reason\uff1a \u663e\u793a\u4f5c\u4e1a\u6302\u8d77\u7684\u539f\u56e0 %r/%ReqNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9 %S/%StartTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f00\u59cb\u65f6\u95f4 %s/%SubmitTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u63d0\u4ea4\u65f6\u95f4 %t/%State\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f53\u524d\u72b6\u6001 %T/%JobType\uff1a \u663e\u793a\u4f5c\u4e1a\u7c7b\u578b %u/%Uid\uff1a\u663e\u793a\u4f5c\u4e1a\u7684 UID %U/%User\uff1a \u663e\u793a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237 %x/%ExcludeNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u6392\u9664\u7684\u8282\u70b9 \u6bcf\u4e2a\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\u53ef\u7528\u5bbd\u5ea6\u8bf4\u660e\u7b26\u4fee\u6539\uff08\u5982 \"%.5j\" \uff09\u3002 \u82e5\u6307\u5b9a\u5bbd\u5ea6\uff0c\u5219\u4f1a\u88ab\u683c\u5f0f\u5316\u4e3a\u81f3\u5c11\u8fbe\u5230\u8be5\u5bbd\u5ea6\u3002 \u82e5\u683c\u5f0f\u65e0\u6548\u6216\u65e0\u6cd5\u8bc6\u522b\uff0c\u7a0b\u5e8f\u4f1a\u62a5\u9519\u5e76\u7ec8\u6b62\u3002 \u4f8b\uff1a --format \"%.5j %.20n %t\" \u4f1a\u8f93\u51fa\u4f5c\u4e1a ID\uff08\u6700\u5c0f\u5bbd\u5ea6 5\uff09\u3001\u540d\u79f0\uff08\u6700\u5c0f\u5bbd\u5ea6 20\uff09\u548c\u72b6\u6001\u3002 -F/--full : \u663e\u793a\u5b8c\u6574\u7684\u5185\u5bb9\uff0c\u5982\u679c\u672a\u6307\u5b9a\uff0c\u9ed8\u8ba4\u6bcf\u9879\u8f93\u51fa30\u4e2a\u5b57\u7b26 -h/--help : \u663e\u793a\u5e2e\u52a9 -i/--iterate uint \uff1a\u6307\u5b9a\u95f4\u9694\u79d2\u6570\u5237\u65b0\u67e5\u8be2\u7ed3\u679c\u3002\u5982 -i=3\u8868\u793a\u6bcf\u9694\u4e09\u79d2\u8f93\u51fa\u4e00\u6b21\u67e5\u8be2\u7ed3\u679c -j/--job string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u53f7\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u53f7\u65f6\u7528\u9017\u53f7\u9694\u5f00\u3002\u5982 -j=2,3,4 --json\uff1a json\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -m/--MaxVisibleLines uint32 \uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6700\u5927\u6761\u6570\u3002\u5982-m=500\u8868\u793a\u6700\u591a\u8f93\u51fa500\u884c\u67e5\u8be2\u7ed3\u679c -n/--name string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u540d\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u540d\u65f6\u7528\u9017\u53f7\u9694\u5f00 -N/--noHeader \uff1a\u8f93\u51fa\u9690\u85cf\u8868\u5934 -p/--partition string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u6240\u5728\u5206\u533a\uff0c\u6307\u5b9a\u591a\u4e2a\u5206\u533a\u65f6\u7528\u9017\u53f7\u9694\u5f00 -q/--qos string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u7684QoS\uff0c\u6307\u5b9a\u591a\u4e2aQoS\u65f6\u7528\u9017\u53f7\u9694\u5f00 --self\uff1a \u67e5\u770b\u5f53\u524d\u7528\u6237\u63d0\u4ea4\u7684\u4f5c\u4e1a -S/--start \uff1a\u663e\u793a\u4f5c\u4e1a\u7684\u5f00\u59cb\u65f6\u95f4\uff08pending\u4f5c\u4e1a\u663e\u793a\u9884\u671f\u5f00\u59cb\u65f6\u95f4\uff09 -t/--state string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u72b6\u6001\uff0c\u6307\u5b9a\u591a\u4e2a\u72b6\u6001\u65f6\u7528\u9017\u53f7\u9694\u5f00 -u/--user string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u6240\u5c5e\u7528\u6237\uff0c\u6307\u5b9a\u591a\u4e2a\u7528\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a cqueue -h cqueue -N cqueue -S cqueue -j 30674,30675 cqueue -t Pending cqueue -t r cqueue -u cranetest cqueue -A CraneTest cqueue -i 3 cqueue -p CPU cqueue -m 3 cqueue -o=\"%n %u %.5j %.5t %.3T %.5T\" format\u4e2d\u7684\u6307\u5b9a\u5217\u7684\u5bf9\u5e94\u7f29\u5199\u5bf9\u7167\uff1a j-TaskId\uff1bn-Name\uff1bt-State\uff1bp-Partition\uff1bu-User\uff1ba-Account\uff1bT-Type\uff1bI-NodeIndex\uff1bl-TimeLimit\uff1bN-Nodes cqueue -n test cqueue -N cqueue -q test_qos cqueue --self cqueue -t Running -S 2024-01-02T15:04:05~2024-01-11T11:12:41","title":"cqueue \u67e5\u770b\u4f5c\u4e1a\u961f\u5217"},{"location":"command/cqueue/#cqueue","text":"cqueue\u53ef\u4ee5\u67e5\u770b\u961f\u5217\u4e2d\u7684\u4f5c\u4e1a\u4fe1\u606f\u3002 \u67e5\u770b\u96c6\u7fa4\u4e2d\u6240\u6709\u961f\u5217\u7684\u4f5c\u4e1a\u4fe1\u606f\uff08\u5305\u62ec\u72b6\u6001pending\u3001running\u3001cancelled\uff09\uff0c\u9ed8\u8ba4\u8f93\u51fa100\u6761\u4fe1\u606f\u3002 cqueue cqueue\u8fd0\u884c\u7ed3\u679c\u5c55\u793a \u4e3b\u8981\u8f93\u51fa\u9879 JobId \uff1a\u4f5c\u4e1a\u53f7 Partition \uff1a\u4f5c\u4e1a\u6240\u5728\u5206\u533a Name : \u4f5c\u4e1a\u540d User \uff1a\u4f5c\u4e1a\u6240\u5c5e\u7528\u6237 Account \uff1a\u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237 Status \uff1a\u4f5c\u4e1a\u72b6\u6001 Type \uff1a \u4f5c\u4e1a\u7c7b\u578b TimeLimit \uff1a\u4f5c\u4e1a\u65f6\u95f4\u9650\u5236 Nodes \uff1a\u4f5c\u4e1a\u6240\u5206\u914d\u8282\u70b9\u6570 NodeList \uff1a \u4f5c\u4e1a\u8fd0\u884c\u7684\u8282\u70b9\u540d","title":"cqueue \u67e5\u770b\u4f5c\u4e1a\u961f\u5217"},{"location":"command/cqueue/#_1","text":"-A/--Account string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u6240\u5c5e\u8d26\u6237\uff0c\u6307\u5b9a\u591a\u4e2a\u8d26\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 -o/--format string \uff1a\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f\u3002\u7531\u767e\u5206\u53f7\uff08%\uff09\u540e\u63a5\u4e00\u4e2a\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\u6807\u8bc6\u3002 \u5728 % \u548c\u683c\u5f0f\u5b57\u7b26/\u5b57\u7b26\u4e32\u4e4b\u95f4\u7528\u70b9\uff08.\uff09\u548c\u6570\u5b57\uff0c\u53ef\u6307\u5b9a\u5b57\u6bb5\u7684\u6700\u5c0f\u5bbd\u5ea6\u3002\u652f\u6301\u7684\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\uff1a %a/%Account\uff1a \u663e\u793a\u4f5c\u4e1a\u5173\u8054\u7684\u8d26\u6237 %c/%AllocCpus\uff1a \u663e\u793a\u4f5c\u4e1a\u5df2\u5206\u914d\u7684 CPU \u6570\u91cf %e/%CpuPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684 CPU \u6570\u91cf %h/%ElapsedTime\uff1a \u663e\u793a\u4f5c\u4e1a\u81ea\u542f\u52a8\u4ee5\u6765\u7684\u5df2\u7528\u65f6\u95f4 %j/%JobId\uff1a \u663e\u793a\u4f5c\u4e1a ID %k/%Comment\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5907\u6ce8 %l/%NodeList\uff1a \u663e\u793a\u4f5c\u4e1a\u6b63\u5728\u8fd0\u884c\u7684\u8282\u70b9\u5217\u8868 %m/%TimeLimit\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u65f6\u95f4\u9650\u5236 %n/%MemPerNode\uff1a \u663e\u793a\u4f5c\u4e1a\u6bcf\u4e2a\u8282\u70b9\u8bf7\u6c42\u7684\u5185\u5b58\u91cf %N/%NodeNum\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9\u6570\u91cf %n/%Name\uff1a \u663e\u793a\u4f5c\u4e1a\u540d\u79f0 %P/%Partition\uff1a \u663e\u793a\u4f5c\u4e1a\u8fd0\u884c\u6240\u5728\u7684\u5206\u533a %p/%Priority\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u4f18\u5148\u7ea7 %Q/%QOS \uff1a\u663e\u793a\u4f5c\u4e1a\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS\uff09\u7ea7\u522b %R/%Reason\uff1a \u663e\u793a\u4f5c\u4e1a\u6302\u8d77\u7684\u539f\u56e0 %r/%ReqNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u8bf7\u6c42\u7684\u8282\u70b9 %S/%StartTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f00\u59cb\u65f6\u95f4 %s/%SubmitTime\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u63d0\u4ea4\u65f6\u95f4 %t/%State\uff1a \u663e\u793a\u4f5c\u4e1a\u7684\u5f53\u524d\u72b6\u6001 %T/%JobType\uff1a \u663e\u793a\u4f5c\u4e1a\u7c7b\u578b %u/%Uid\uff1a\u663e\u793a\u4f5c\u4e1a\u7684 UID %U/%User\uff1a \u663e\u793a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237 %x/%ExcludeNodes\uff1a \u663e\u793a\u4f5c\u4e1a\u6392\u9664\u7684\u8282\u70b9 \u6bcf\u4e2a\u683c\u5f0f\u6807\u8bc6\u7b26\u6216\u5b57\u7b26\u4e32\u53ef\u7528\u5bbd\u5ea6\u8bf4\u660e\u7b26\u4fee\u6539\uff08\u5982 \"%.5j\" \uff09\u3002 \u82e5\u6307\u5b9a\u5bbd\u5ea6\uff0c\u5219\u4f1a\u88ab\u683c\u5f0f\u5316\u4e3a\u81f3\u5c11\u8fbe\u5230\u8be5\u5bbd\u5ea6\u3002 \u82e5\u683c\u5f0f\u65e0\u6548\u6216\u65e0\u6cd5\u8bc6\u522b\uff0c\u7a0b\u5e8f\u4f1a\u62a5\u9519\u5e76\u7ec8\u6b62\u3002 \u4f8b\uff1a --format \"%.5j %.20n %t\" \u4f1a\u8f93\u51fa\u4f5c\u4e1a ID\uff08\u6700\u5c0f\u5bbd\u5ea6 5\uff09\u3001\u540d\u79f0\uff08\u6700\u5c0f\u5bbd\u5ea6 20\uff09\u548c\u72b6\u6001\u3002 -F/--full : \u663e\u793a\u5b8c\u6574\u7684\u5185\u5bb9\uff0c\u5982\u679c\u672a\u6307\u5b9a\uff0c\u9ed8\u8ba4\u6bcf\u9879\u8f93\u51fa30\u4e2a\u5b57\u7b26 -h/--help : \u663e\u793a\u5e2e\u52a9 -i/--iterate uint \uff1a\u6307\u5b9a\u95f4\u9694\u79d2\u6570\u5237\u65b0\u67e5\u8be2\u7ed3\u679c\u3002\u5982 -i=3\u8868\u793a\u6bcf\u9694\u4e09\u79d2\u8f93\u51fa\u4e00\u6b21\u67e5\u8be2\u7ed3\u679c -j/--job string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u53f7\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u53f7\u65f6\u7528\u9017\u53f7\u9694\u5f00\u3002\u5982 -j=2,3,4 --json\uff1a json\u683c\u5f0f\u8f93\u51fa\u547d\u4ee4\u6267\u884c\u7ed3\u679c -m/--MaxVisibleLines uint32 \uff1a\u6307\u5b9a\u8f93\u51fa\u7ed3\u679c\u7684\u6700\u5927\u6761\u6570\u3002\u5982-m=500\u8868\u793a\u6700\u591a\u8f93\u51fa500\u884c\u67e5\u8be2\u7ed3\u679c -n/--name string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u540d\uff0c\u6307\u5b9a\u591a\u4e2a\u4f5c\u4e1a\u540d\u65f6\u7528\u9017\u53f7\u9694\u5f00 -N/--noHeader \uff1a\u8f93\u51fa\u9690\u85cf\u8868\u5934 -p/--partition string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u6240\u5728\u5206\u533a\uff0c\u6307\u5b9a\u591a\u4e2a\u5206\u533a\u65f6\u7528\u9017\u53f7\u9694\u5f00 -q/--qos string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u7684QoS\uff0c\u6307\u5b9a\u591a\u4e2aQoS\u65f6\u7528\u9017\u53f7\u9694\u5f00 --self\uff1a \u67e5\u770b\u5f53\u524d\u7528\u6237\u63d0\u4ea4\u7684\u4f5c\u4e1a -S/--start \uff1a\u663e\u793a\u4f5c\u4e1a\u7684\u5f00\u59cb\u65f6\u95f4\uff08pending\u4f5c\u4e1a\u663e\u793a\u9884\u671f\u5f00\u59cb\u65f6\u95f4\uff09 -t/--state string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u72b6\u6001\uff0c\u6307\u5b9a\u591a\u4e2a\u72b6\u6001\u65f6\u7528\u9017\u53f7\u9694\u5f00 -u/--user string \uff1a\u6307\u5b9a\u67e5\u8be2\u4f5c\u4e1a\u6240\u5c5e\u7528\u6237\uff0c\u6307\u5b9a\u591a\u4e2a\u7528\u6237\u65f6\u7528\u9017\u53f7\u9694\u5f00 -v/--version\uff1a \u67e5\u8be2\u7248\u672c\u53f7 \u4f8b\uff1a cqueue -h cqueue -N cqueue -S cqueue -j 30674,30675 cqueue -t Pending cqueue -t r cqueue -u cranetest cqueue -A CraneTest cqueue -i 3 cqueue -p CPU cqueue -m 3 cqueue -o=\"%n %u %.5j %.5t %.3T %.5T\" format\u4e2d\u7684\u6307\u5b9a\u5217\u7684\u5bf9\u5e94\u7f29\u5199\u5bf9\u7167\uff1a j-TaskId\uff1bn-Name\uff1bt-State\uff1bp-Partition\uff1bu-User\uff1ba-Account\uff1bT-Type\uff1bI-NodeIndex\uff1bl-TimeLimit\uff1bN-Nodes cqueue -n test cqueue -N cqueue -q test_qos cqueue --self cqueue -t Running -S 2024-01-02T15:04:05~2024-01-11T11:12:41","title":"\u4e3b\u8981\u53c2\u6570"},{"location":"command/crun/","text":"crun \u63d0\u4ea4\u4ea4\u4e92\u5f0f\u4efb\u52a1 crun\u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u7684\u53c2\u6570\u7533\u8bf7\u8d44\u6e90\u5e76\u5728\u8ba1\u7b97\u8282\u70b9\u542f\u52a8\u6307\u5b9a\u7684\u4efb\u52a1\uff0c\u7528\u6237\u7684\u8f93\u5165\u5c06\u88ab\u8f6c\u53d1\u5230\u8ba1\u7b97\u8282\u70b9\u4e0a\u5bf9\u5e94\u7684\u4efb\u52a1\uff0c\u4efb\u52a1\u7684\u8f93\u51fa\u5c06\u88ab\u8f6c\u53d1\u56de\u7528\u6237\u7ec8\u7aef\u3002crun\u9700\u8981\u5728\u6709cfored\u8fd0\u884c\u7684\u8282\u70b9\u4e0a\u542f\u52a8\u3002 crun\u53ea\u652f\u6301\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u8bf7\u6c42\u53c2\u6570\uff0c\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8d26\u6237 -D/--chdir string \uff1a\u4efb\u52a1\u5de5\u4f5c\u8def\u5f84 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -c/--cpus-per-task float \uff1a\u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684 CPU \u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1\uff09 --debug-level string\uff1a \u53ef\u7528\u7684\u8c03\u8bd5\u7ea7\u522b\uff1atrace\u3001debug\u3001info\uff08\u9ed8\u8ba4\u503c\u4e3a \"info\"\uff09 -x/--exclude string\uff1a \u4ece\u5206\u914d\u4e2d\u6392\u9664\u7279\u5b9a\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\uff09 --export string\uff1a \u4f20\u64ad\u73af\u5883\u53d8\u91cf --extra-attr string\uff1a \u4f5c\u4e1a\u7684\u989d\u5916\u5c5e\u6027\uff08JSON \u683c\u5f0f\uff09 --get-user-env\uff1a \u52a0\u8f7d\u7528\u6237\u7684\u767b\u5f55\u73af\u5883\u53d8\u91cf --gres string\uff1a \u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u901a\u7528\u8d44\u6e90\uff0c\u683c\u5f0f\uff1a\"gpu:a100:1\" \u6216 \"gpu:1\" -J, --job-name string\uff1a \u4f5c\u4e1a\u540d\u79f0 --mail-type string\uff1a \u5f53\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\u901a\u8fc7\u90ae\u4ef6\u901a\u77e5\u7528\u6237\uff0c\u652f\u6301\u7684\u503c\uff1aNONE\u3001BEGIN\u3001END\u3001FAIL\u3001TIMELIMIT\u3001ALL\uff08\u9ed8\u8ba4\u503c\u4e3a NONE\uff09 --mail-user string\uff1a \u901a\u77e5\u63a5\u6536\u8005\u7684\u90ae\u4ef6\u5730\u5740 --mem string\uff1a \u6700\u5927\u5b9e\u9645\u5185\u5b58\u91cf\uff0c\u652f\u6301 GB(G, g)\u3001MB(M, m)\u3001KB(K, k) \u548c Bytes(B)\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f MB -w/--nodelist string\uff1a \u8981\u5206\u914d\u7ed9\u4f5c\u4e1a\u7684\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\uff09 -N/--nodes uint32: \u8981\u5728\u5176\u4e0a\u8fd0\u884c\u4f5c\u4e1a\u7684\u8282\u70b9\u6570\u91cf\uff08\u683c\u5f0f\u4e3a N = min[-max]\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\uff09 --ntasks-per-node uint32\uff1a \u6bcf\u4e2a\u8282\u70b9\u4e0a\u8981\u8c03\u7528\u7684\u4efb\u52a1\u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1\uff09 -p/--partition string: \u8bf7\u6c42\u7684\u5206\u533a --pty: \u4f7f\u7528\u4f2a\u7ec8\u7aef\u8fd0\u884c -q/--qos string: \u4f5c\u4e1a\u4f7f\u7528\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS\uff09 -r/--reservation string\uff1a \u4f7f\u7528\u9884\u7559\u8d44\u6e90 -t/--time string\uff1a \u65f6\u95f4\u9650\u5236\uff0c\u683c\u5f0f\uff1a\"day-hours:minutes:seconds\"\uff08\u5982 5-0:0:1 \u8868\u793a 5 \u5929 1 \u79d2\uff09\u6216 \"hours:minutes:seconds\"\uff08\u5982 10:1:2 \u8868\u793a 10 \u5c0f\u65f6 1 \u5206\u949f 2 \u79d2\uff09 -v/--version:crun \u7684\u7248\u672c --x11: \u542f\u7528 X11 \u652f\u6301\uff0c\u9ed8\u8ba4\u503c\u4e3a false\u3002\u5982\u679c\u672a\u914d\u5408 --x11-forwarding \u4f7f\u7528\uff0c\u5219\u76f4\u63a5\u4f7f\u7528 X11\uff08\u4e0d\u5b89\u5168\uff09 --x11-forwarding: \u7531 CraneSched \u542f\u7528 X11 \u8f6c\u53d1\uff08\u5b89\u5168\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a false \u4f8b\uff1a\u5728CPU\u5206\u533a\uff0c\u7533\u8bf7\u4e24\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2aCPU\u6838\u5fc3\uff0c200M\u5185\u5b58\uff0c\u5e76\u8fd0\u884cbash\u7a0b\u5e8f\uff1a crun -c 1 --mem 200M -p CPU -N 2 /usr/bin/bash \u8fd0\u884c\u7ed3\u679c\uff1a \u4f8b\uff1a\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\uff0c\u4e14\u8282\u70b9\u4e0d\u80fd\u662fcrane01,crane02\uff0c\u4efb\u52a1\u540d\u79f0\u4e3atestjob\uff0c\u8fd0\u884c\u65f6\u95f4\u9650\u5236\u4e3a0:25:25\uff0c\u5e76\u8fd0\u884cbash\u7a0b\u5e8f\uff1a \u4f8b\uff1a\u5728GPU\u5206\u533a\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\u548c200M\u8fd0\u884c\u5185\u5b58\uff0c\u8282\u70b9\u53ea\u80fd\u5728crane02\u3001crane03\u4e2d\u9009\u62e9\uff0c\u5e76\u8fd0\u884cbash\u7a0b\u5e8f\uff1a crun\u8fd8\u53ef\u4ee5\u5728calloc\u4efb\u52a1\u5185\u5d4c\u5957\u542f\u52a8\uff0c\u5c06\u81ea\u52a8\u7ee7\u627fcalloc\u4efb\u52a1\u7684\u6240\u6709\u8d44\u6e90\u3002\u4e0d\u9700\u8981\u6307\u5b9a\u9664\u9700\u8981\u8fd0\u884c\u7684\u7a0b\u5e8f\u5916\u5176\u4ed6\u53c2\u6570\u3002 crun -A ROOT -J test_crun -x cranetest03 --get-user-env --ntasks-per-node 2 -q test_qos -t 00:20:00 /usr/bin/bash crun -D --debug-level trace --export ALL /path /usr/bin/bash crun -w cranetest04 /usr/bin/bash crun --x11 xclock \u5411crun\u542f\u52a8\u7684\u7a0b\u5e8f\u4f20\u9012\u53c2\u6570 Pass arguments to your programe launched by crun: crun -c 1 -- your_programe --your_args // or crun -c 1 \"your_programe --your_args\"","title":"crun \u63d0\u4ea4\u4ea4\u4e92\u5f0f\u4efb\u52a1"},{"location":"command/crun/#crun","text":"crun\u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u7684\u53c2\u6570\u7533\u8bf7\u8d44\u6e90\u5e76\u5728\u8ba1\u7b97\u8282\u70b9\u542f\u52a8\u6307\u5b9a\u7684\u4efb\u52a1\uff0c\u7528\u6237\u7684\u8f93\u5165\u5c06\u88ab\u8f6c\u53d1\u5230\u8ba1\u7b97\u8282\u70b9\u4e0a\u5bf9\u5e94\u7684\u4efb\u52a1\uff0c\u4efb\u52a1\u7684\u8f93\u51fa\u5c06\u88ab\u8f6c\u53d1\u56de\u7528\u6237\u7ec8\u7aef\u3002crun\u9700\u8981\u5728\u6709cfored\u8fd0\u884c\u7684\u8282\u70b9\u4e0a\u542f\u52a8\u3002 crun\u53ea\u652f\u6301\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u8bf7\u6c42\u53c2\u6570\uff0c\u652f\u6301\u7684\u547d\u4ee4\u884c\u9009\u9879\uff1a -h/--help : \u663e\u793a\u5e2e\u52a9 -A/--account string \uff1a\u63d0\u4ea4\u4f5c\u4e1a\u7684\u8d26\u6237 -D/--chdir string \uff1a\u4efb\u52a1\u5de5\u4f5c\u8def\u5f84 -C/--config string \uff1a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84(\u9ed8\u8ba4 \"/etc/crane/config.yaml\") -c/--cpus-per-task float \uff1a\u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684 CPU \u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1\uff09 --debug-level string\uff1a \u53ef\u7528\u7684\u8c03\u8bd5\u7ea7\u522b\uff1atrace\u3001debug\u3001info\uff08\u9ed8\u8ba4\u503c\u4e3a \"info\"\uff09 -x/--exclude string\uff1a \u4ece\u5206\u914d\u4e2d\u6392\u9664\u7279\u5b9a\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\uff09 --export string\uff1a \u4f20\u64ad\u73af\u5883\u53d8\u91cf --extra-attr string\uff1a \u4f5c\u4e1a\u7684\u989d\u5916\u5c5e\u6027\uff08JSON \u683c\u5f0f\uff09 --get-user-env\uff1a \u52a0\u8f7d\u7528\u6237\u7684\u767b\u5f55\u73af\u5883\u53d8\u91cf --gres string\uff1a \u6bcf\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u901a\u7528\u8d44\u6e90\uff0c\u683c\u5f0f\uff1a\"gpu:a100:1\" \u6216 \"gpu:1\" -J, --job-name string\uff1a \u4f5c\u4e1a\u540d\u79f0 --mail-type string\uff1a \u5f53\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\u901a\u8fc7\u90ae\u4ef6\u901a\u77e5\u7528\u6237\uff0c\u652f\u6301\u7684\u503c\uff1aNONE\u3001BEGIN\u3001END\u3001FAIL\u3001TIMELIMIT\u3001ALL\uff08\u9ed8\u8ba4\u503c\u4e3a NONE\uff09 --mail-user string\uff1a \u901a\u77e5\u63a5\u6536\u8005\u7684\u90ae\u4ef6\u5730\u5740 --mem string\uff1a \u6700\u5927\u5b9e\u9645\u5185\u5b58\u91cf\uff0c\u652f\u6301 GB(G, g)\u3001MB(M, m)\u3001KB(K, k) \u548c Bytes(B)\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f MB -w/--nodelist string\uff1a \u8981\u5206\u914d\u7ed9\u4f5c\u4e1a\u7684\u8282\u70b9\uff08\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5217\u8868\uff09 -N/--nodes uint32: \u8981\u5728\u5176\u4e0a\u8fd0\u884c\u4f5c\u4e1a\u7684\u8282\u70b9\u6570\u91cf\uff08\u683c\u5f0f\u4e3a N = min[-max]\uff0c\u9ed8\u8ba4\u503c\u4e3a 1\uff09 --ntasks-per-node uint32\uff1a \u6bcf\u4e2a\u8282\u70b9\u4e0a\u8981\u8c03\u7528\u7684\u4efb\u52a1\u6570\u91cf\uff08\u9ed8\u8ba4\u503c\u4e3a 1\uff09 -p/--partition string: \u8bf7\u6c42\u7684\u5206\u533a --pty: \u4f7f\u7528\u4f2a\u7ec8\u7aef\u8fd0\u884c -q/--qos string: \u4f5c\u4e1a\u4f7f\u7528\u7684\u670d\u52a1\u8d28\u91cf\uff08QoS\uff09 -r/--reservation string\uff1a \u4f7f\u7528\u9884\u7559\u8d44\u6e90 -t/--time string\uff1a \u65f6\u95f4\u9650\u5236\uff0c\u683c\u5f0f\uff1a\"day-hours:minutes:seconds\"\uff08\u5982 5-0:0:1 \u8868\u793a 5 \u5929 1 \u79d2\uff09\u6216 \"hours:minutes:seconds\"\uff08\u5982 10:1:2 \u8868\u793a 10 \u5c0f\u65f6 1 \u5206\u949f 2 \u79d2\uff09 -v/--version:crun \u7684\u7248\u672c --x11: \u542f\u7528 X11 \u652f\u6301\uff0c\u9ed8\u8ba4\u503c\u4e3a false\u3002\u5982\u679c\u672a\u914d\u5408 --x11-forwarding \u4f7f\u7528\uff0c\u5219\u76f4\u63a5\u4f7f\u7528 X11\uff08\u4e0d\u5b89\u5168\uff09 --x11-forwarding: \u7531 CraneSched \u542f\u7528 X11 \u8f6c\u53d1\uff08\u5b89\u5168\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a false \u4f8b\uff1a\u5728CPU\u5206\u533a\uff0c\u7533\u8bf7\u4e24\u4e2a\u8282\u70b9\uff0c\u4e00\u4e2aCPU\u6838\u5fc3\uff0c200M\u5185\u5b58\uff0c\u5e76\u8fd0\u884cbash\u7a0b\u5e8f\uff1a crun -c 1 --mem 200M -p CPU -N 2 /usr/bin/bash \u8fd0\u884c\u7ed3\u679c\uff1a \u4f8b\uff1a\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\uff0c\u4e14\u8282\u70b9\u4e0d\u80fd\u662fcrane01,crane02\uff0c\u4efb\u52a1\u540d\u79f0\u4e3atestjob\uff0c\u8fd0\u884c\u65f6\u95f4\u9650\u5236\u4e3a0:25:25\uff0c\u5e76\u8fd0\u884cbash\u7a0b\u5e8f\uff1a \u4f8b\uff1a\u5728GPU\u5206\u533a\u7533\u8bf7\u4e00\u4e2a\u8282\u70b9\u548c200M\u8fd0\u884c\u5185\u5b58\uff0c\u8282\u70b9\u53ea\u80fd\u5728crane02\u3001crane03\u4e2d\u9009\u62e9\uff0c\u5e76\u8fd0\u884cbash\u7a0b\u5e8f\uff1a crun\u8fd8\u53ef\u4ee5\u5728calloc\u4efb\u52a1\u5185\u5d4c\u5957\u542f\u52a8\uff0c\u5c06\u81ea\u52a8\u7ee7\u627fcalloc\u4efb\u52a1\u7684\u6240\u6709\u8d44\u6e90\u3002\u4e0d\u9700\u8981\u6307\u5b9a\u9664\u9700\u8981\u8fd0\u884c\u7684\u7a0b\u5e8f\u5916\u5176\u4ed6\u53c2\u6570\u3002 crun -A ROOT -J test_crun -x cranetest03 --get-user-env --ntasks-per-node 2 -q test_qos -t 00:20:00 /usr/bin/bash crun -D --debug-level trace --export ALL /path /usr/bin/bash crun -w cranetest04 /usr/bin/bash crun --x11 xclock \u5411crun\u542f\u52a8\u7684\u7a0b\u5e8f\u4f20\u9012\u53c2\u6570 Pass arguments to your programe launched by crun: crun -c 1 -- your_programe --your_args // or crun -c 1 \"your_programe --your_args\"","title":"crun \u63d0\u4ea4\u4ea4\u4e92\u5f0f\u4efb\u52a1"},{"location":"config/Centos7Configuration/","text":"centos7 Crane\u73af\u5883\u914d\u7f6e 1.\u73af\u5883\u51c6\u5907 \u5b89\u88c5ntp ntpdate\u540c\u6b65\u65f6\u949f yum install ntp ntpdate systemctl start ntpd systemctl enable ntpd timedatectl set-timezone Asia/Shanghai \u5173\u95ed\u9632\u706b\u5899\uff0c\u4e0d\u5141\u8bb8\u5173\u95ed\u9632\u706b\u5899\u5219\u8003\u8651\u5f00\u653e10011\u300110010\u3001873\u7aef\u53e3 systemctl stop firewalld systemctl disable firewalld # \u6216\u8005\u5f00\u653e\u7aef\u53e3 firewall-cmd --add-port=10011/tcp --permanent --zone=public firewall-cmd --add-port=10010/tcp --permanent --zone=public firewall-cmd --add-port=873/tcp --permanent --zone=public # \u91cd\u542f\u9632\u706b\u5899(\u4fee\u6539\u914d\u7f6e\u540e\u8981\u91cd\u542f\u9632\u706b\u5899) firewall-cmd --reload Change yum source to tsinghua repo source: rm -rf /etc/yum.repos.d/* vi /etc/yum.repos.d/CentOS-Base.repo Paste the following contents: # CentOS-Base.repo # # The mirror system uses the connecting IP address of the client and the # update status of each mirror to pick mirrors that are updated to and # geographically close to the client. You should use this for CentOS updates # unless you are manually picking other mirrors. # # If the mirrorlist= does not work for you, as a fall back you can try the # remarked out baseurl= line instead. # # [base] name=CentOS-$releasever - Base baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #released updates [updates] name=CentOS-$releasever - Updates baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/updates/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that may be useful [extras] name=CentOS-$releasever - Extras baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/extras/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that extend functionality of existing packages [centosplus] name=CentOS-$releasever - Plus baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/centosplus/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus gpgcheck=1 enabled=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 yum clean all yum makecache yum install epel-release yum install centos-release-scl-rh 2.\u5b89\u88c5\u5de5\u5177\u94fe yum install devtoolset-11 yum install rh-git218 \u4e3a\u4e86\u907f\u514d\u6bcf\u6b21\u624b\u52a8\u751f\u6548\uff0c Then, paste the following contents into ~/.bash_profile vim ~/.bash_profile source scl_source enable rh-git218 source scl_source enable devtoolset-11 Restart bash. \u8fd9\u65f6\u7528gcc --version\u67e5\u8be2\uff0c\u53ef\u4ee5\u770b\u5230\u7248\u672c\u5df2\u7ecf\u662f11.2\u7cfb\u5217\u4e86 $ gcc --version gcc (GCC) 11.2.1 20210728 (Red Hat 11.2.1-1) Copyright (C) 2021 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. \u7ed9\u7cfb\u7edf\u5b89\u88c5\u4e2a\u4e0b\u8f7d\u547d\u4ee4\u5668 yum install wget -y \u5b89\u88c5cmake\u548cninja \u7531\u4e8e\u9700\u8981\u6e90\u7801\u5b89\u88c5\uff0c\u9996\u5148\u9009\u62e9\u5408\u9002\u7684\u6e90\u7801\u5b58\u653e\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u653e\u5728\u81ea\u5df1\u8d26\u53f7\u7684\u76ee\u5f55\u4e0b\u3002 su - liulinxing # \u7528\u6237\u540d mkdir download cd download \u4ecegithub\u4e0b\u8f7d\u6e90\u7801 wget https://github.com/ninja-build/ninja/releases/download/v1.10.2/ninja-linux.zip wget https://github.com/Kitware/CMake/releases/download/v3.21.3/cmake-3.21.3.tar.gz \u89e3\u538b\u7f16\u8bd1\u5b89\u88c5 unzip ninja-linux.zip cp ninja /usr/bin/ yum install openssl-devel tar -zxvf cmake-3.21.3.tar.gz cd cmake-3.12.4 ./bootstrap gmake gmake install \u68c0\u67e5\u5b89\u88c5\u662f\u5426\u6210\u529f cmake --version #cmake version 3.21.3 # #CMake suite maintained and supported by Kitware (kitware.com/cmake). 3.\u5b89\u88c5C++\u5e93 \u4e0b\u8f7d\u76f8\u5173\u6e90\u7801\u538b\u7f29\u5305\u5230\u4e00\u4e2a\u76ee\u5f55\uff0c\u89e3\u538b\u6240\u6709\u6e90\u7801\u538b\u7f29\u5305 wget https://boostorg.jfrog.io/artifactory/main/release/1.78.0/source/boost_1_78_0.tar.gz tar xzf boost_1_78_0.tar.gz wget https://github.com/fmtlib/fmt/archive/refs/tags/8.0.1.tar.gz tar xzf fmt-8.0.1.tar.gz wget https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz tar xzf libevent-2.1.12-stable.tar.gz wget https://github.com/jarro2783/cxxopts/archive/refs/tags/v2.2.1.tar.gz tar xzf cxxopts-2.2.1.tar.gz wget https://github.com/google/googletest/archive/refs/tags/release-1.11.0.tar.gz tar xzf googletest-release-1.11.0.tar.gz wget https://dist.libuv.org/dist/v1.42.0/libuv-v1.42.0.tar.gz tar xzf libuv-1.42.0.tar.gz wget https://github.com/gabime/spdlog/archive/refs/tags/v1.8.5.tar.gz tar xzf spdlog-1.8.5.tar.gz \u5b89\u88c5\u7b2c\u4e09\u65b9\u5e93 yum install libcgroup-devel yum install libcurl-devel yum install pam-devel cd boost_1_78_0 ./bootstrap.sh ./b2 install --with=all cd .. cd libuv-1.42.0 mkdir build cd build/ cmake -DCMAKE_INSTALL_PREFIX=/nfs/home/testCrane/Crane/dependencies/online/libuv -DCMAKE_CXX_STANDARD=17 -G Ninja .. ninja install # \u8fd0\u884c\u5b89\u88c5\u811a\u672c bash ./download_deps.sh 4.\u5b89\u88c5mariadb \u901a\u8fc7yum\u5b89\u88c5\u5c31\u884c\u4e86\uff0c\u5b89\u88c5mariadb-server\uff0c\u9ed8\u8ba4\u4f9d\u8d56\u5b89\u88c5mariadb\uff0c\u4e00\u4e2a\u662f\u670d\u52a1\u7aef\u3001\u4e00\u4e2a\u662f\u5ba2\u6237\u7aef\u3002 wget https://downloads.mariadb.com/MariaDB/mariadb_repo_setup chmod +x mariadb_repo_setup ./mariadb_repo_setup yum install MariaDB-server yum install mysql-devel #\u5b89\u88c5\u94fe\u63a5\u5e93 systemctl start mariadb # \u5f00\u542f\u670d\u52a1 systemctl enable mariadb # \u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\u52a8\u670d\u52a1 mariadb-secure-installation # \u9996\u6b21\u5b89\u88c5\u9700\u8981\u8fdb\u884c\u6570\u636e\u5e93\u7684\u914d\u7f6e \u914d\u7f6e\u65f6\u51fa\u73b0\u7684\u5404\u4e2a\u9009\u9879 Enter current password for root (enter for none): # \u8f93\u5165\u6570\u636e\u5e93\u8d85\u7ea7\u7ba1\u7406\u5458root\u7684\u5bc6\u7801(\u6ce8\u610f\u4e0d\u662f\u7cfb\u7edfroot\u7684\u5bc6\u7801)\uff0c\u7b2c\u4e00\u6b21\u8fdb\u5165\u8fd8\u6ca1\u6709\u8bbe\u7f6e\u5bc6\u7801\u5219\u76f4\u63a5\u56de\u8f66 Set root password? [Y/n] # \u8bbe\u7f6e\u5bc6\u7801\uff0cy New password: # \u65b0\u5bc6\u7801 123456 Re-enter new password: # \u518d\u6b21\u8f93\u5165\u5bc6\u7801:123456 Remove anonymous users? [Y/n] # \u79fb\u9664\u533f\u540d\u7528\u6237\uff0c y Disallow root login remotely? [Y/n] # \u62d2\u7eddroot\u8fdc\u7a0b\u767b\u5f55\uff0cn\uff0c\u4e0d\u7ba1y/n\uff0c\u90fd\u4f1a\u62d2\u7eddroot\u8fdc\u7a0b\u767b\u5f55 Remove test database and access to it? [Y/n] # \u5220\u9664test\u6570\u636e\u5e93\uff0cy\uff1a\u5220\u9664\u3002n\uff1a\u4e0d\u5220\u9664\uff0c\u6570\u636e\u5e93\u4e2d\u4f1a\u6709\u4e00\u4e2atest\u6570\u636e\u5e93\uff0c\u4e00\u822c\u4e0d\u9700\u8981 Reload privilege tables now? [Y/n] # \u91cd\u65b0\u52a0\u8f7d\u6743\u9650\u8868\uff0cy\u3002\u6216\u8005\u91cd\u542f\u670d\u52a1\u4e5f\u8bb8 \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u9047\u5230Table doesn\u2019t exist\u62a5\u9519\uff1a ERROR 1146 (42S02) at line 1: Table \u2018mysql.global_priv\u2019 doesn\u2019t exist \u2026 Failed! \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u540e\uff0c\u91cd\u542fmysql mysql_upgrade -uroot -p --force \u91cd\u542f\u6570\u636e\u5e93 systemctl restart mariadb \u767b\u9646\u6570\u636e\u5e93 mysql -uroot -p Enter password: Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 9 Server version: 10.4.8-MariaDB MariaDB Server \u8fdb\u5165mysql\u6570\u636e\u5e93 use mysql \u67e5\u8be2user\u8868\uff0c\u53ef\u770b\u5230\u591a\u6761\u6570\u636e select host,user,password from user; \u5220\u9664localhost\u4ee5\u5916\u6570\u636e delete from user where host !='localhost'; \u914d\u7f6e\u5b8c\u6bd5\uff0c\u9000\u51fa exit; systemctl restart mariadb 5.\u5b89\u88c5MongoDB # \u4e0b\u8f7d\u5e76\u89e3\u538b\u5b89\u88c5\u5305 wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.9.tgz tar -zxvf mongodb-linux-x86_64-rhel70-5.0.9.tgz # \u91cd\u547d\u540d mv mongodb-linux-x86_64-rhel70-5.0.9 /opt/mongodb # \u6dfb\u52a0\u73af\u5883\u53d8\u91cf vim /etc/profile \u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff08\u8def\u5f84\u5e94\u5bf9\u5e94MongoDB\u5b89\u88c5\u8def\u5f84\uff09 export MONGODB_HOME=/opt/mongodb export PATH=$PATH:${MONGODB_HOME}/bin # \u4f7f\u73af\u5883\u53d8\u91cf\u751f\u6548 source /etc/profile # \u521b\u5efadb\u76ee\u5f55\u548clog\u76ee\u5f55 cd /opt/mongodb-linux-x86_64-rhel70-5.0.3 mkdir -p ./data/db mkdir -p ./logs touch ./logs/mongodb.log \u521b\u5efamongodb.conf\u914d\u7f6e\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff08\u8def\u5f84\u5e94\u5bf9\u5e94\u4e4b\u524d\u521b\u5efa\u7684db/log\u76ee\u5f55\uff09\uff1a #\u7aef\u53e3\u53f7 port=27017 #db\u76ee\u5f55 dbpath=/opt/mongodb/data/db #\u65e5\u5fd7\u76ee\u5f55 logpath=/opt/mongodb/logs/mongodb.log #\u540e\u53f0 fork=true #\u65e5\u5fd7\u8f93\u51fa logappend=true #\u5141\u8bb8\u8fdc\u7a0bIP\u8fde\u63a5 bind_ip=0.0.0.0 #\u5f00\u542f\u6743\u9650\u9a8c\u8bc1 auth=true \u542f\u52a8\u6d4b\u8bd5 mongod --config /opt/mongodb/mongodb.conf mongo \u521b\u5efa\u7528\u6237 use admin db.createUser({ user:'admin',//\u7528\u6237\u540d pwd:'123456',//\u5bc6\u7801 roles:[{ role:'root',db:'admin'}]//root \u4ee3\u8868\u8d85\u7d1a\u7ba1\u7406\u5458\u6743\u9650 admin\u4ee3\u8868\u7ed9admin\u6570\u636e\u5e93\u52a0\u7684\u8d85\u7ea7\u7ba1\u7406\u5458 }) use Crane_db db.createUser({ user:\"crane\", pwd:\"123456\", roles:[{role:\"dbOwner\",db:\"Crane_db\"}] }) db.shutdownServer() //\u91cd\u542f\u524d\u5148\u5173\u95ed\u670d\u52a1\u5668 \u91cd\u65b0\u542f\u52a8MongoDB\u6570\u636e\u5e93 mongod --config /opt/mongodb/mongodb.conf \u7f16\u8f91\u5f00\u673a\u542f\u52a8 vi /etc/rc.local # \u52a0\u5165\u5982\u4e0b\u8bed\u53e5\uff0c\u4ee5\u4fbf\u542f\u52a8\u65f6\u6267\u884c\uff1a mongod --config /opt/mongodb/mongodb.conf 6.\u5b89\u88c5MongoDB C++\u9a71\u52a8 \u53c2\u8003 http://mongocxx.org/mongocxx-v3/installation/linux/ \u5b89\u88c5mongo-c-driver wget https://github.com/mongodb/mongo-c-driver/releases/download/1.21.1/mongo-c-driver-1.21.1.tar.gz tar xzf mongo-c-driver-1.21.1.tar.gz cd mongo-c-driver-1.21.1 mkdir cmake-build cd cmake-build cmake -DENABLE_AUTOMATIC_INIT_AND_CLEANUP=OFF -DCMAKE_INSTALL_PREFIX=/nfs/home/liulinxing/Crane/dependencies/online/mongo-c-driver .. sudo make && make install \u5b89\u88c5mongo-cxx-driver curl -OL https://github.com/mongodb/mongo-cxx-driver/archive/r3.6.5.tar.gz cd mongo-cxx-driver-r3.6.5/build/ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/nfs/home/liulinxing/Crane/dependencies/online/mongo-driver .. sudo make EP_mnmlstc_core make sudo make install 7.\u7f16\u8bd1\u7a0b\u5e8f \u9996\u5148\u8fdb\u5165\u5230\u9879\u76ee\u76ee\u5f55\u4e0b mkdir build cd build/ cmake -DCMAKE_CXX_STANDARD=17 -G Ninja .. cmake --build . 8.Pam\u6a21\u5757 \u9996\u6b21\u7f16\u8bd1\u5b8c\u6210\u540e\u9700\u8981\u5c06pam\u6a21\u5757\u52a8\u6001\u94fe\u63a5\u5e93\u653e\u5165\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e cp Crane/build/src/Misc/Pam/pam_Crane.so /usr/lib64/security/ \u540c\u65f6\u8ba1\u7b97\u8282\u70b9\u201c/etc/security/access.conf\u201d\u6587\u4ef6\u7981\u6b62\u975eroot\u7528\u6237\u767b\u5f55 Required pam_access.so 9.\u914d\u7f6e\u524d\u7aefgo\u8bed\u8a00\u73af\u5883 \u5b89\u88c5go\u8bed\u8a00 cd download/ wget https://golang.google.cn/dl/go1.17.3.linux-amd64.tar.gz tar -C /usr/local -xzf go1.17.3.linux-amd64.tar.gz # \u5728 /etc/profile\u4e2d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf export PATH=$PATH:/usr/local/go/bin source /etc/profile go version #\u8bbe\u7f6e\u4ee3\u7406 go env -w GOPROXY=https://goproxy.cn,direct # \u5b89\u88c5\u63d2\u4ef6 go install google.golang.org/protobuf/cmd/protoc-gen-go@latest go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest cp /root/go/bin/protoc-gen-go-grpc /usr/local/bin/ cp /root/go/bin/protoc-gen-go /usr/local/bin/ \u5b89\u88c5protuc https://github.com/protocolbuffers/protobuf/releases/download/v3.19.4/protobuf-all-3.19.4.tar.gz tar -xzf protobuf-all-3.19.4.tar.gz cd protobuf-3.19.4 ./configure -prefix=/usr/local/ make && make install protoc --version # libprotoc 3.11.2 \u62c9\u53d6\u9879\u76ee git clone https://github.com/RileyWen/Crane-FrontEnd.git # \u514b\u9686\u9879\u76ee\u4ee3\u7801 mkdir Crane-FrontEnd/out mkdir Crane-FrontEnd/generated/protos \u7f16\u8bd1\u9879\u76ee # \u5728Crane-FrontEnd/protos\u76ee\u5f55\u4e0b protoc --go_out=../generated --go-grpc_out=../generated ./* # \u5728Crane-FrontEnd/out\u76ee\u5f55\u4e0b go build Crane-FrontEnd/cmd/sbatchx/sbatchx.go \u90e8\u7f72\u524d\u7aef\u547d\u4ee4 ln -s /nfs/home/testCrane/Crane-FrontEnd/out/sbatchx /usr/local/bin/sbatchx ln -s /nfs/home/testCrane/Crane-FrontEnd/out/scontrol /usr/local/bin/scontrol ln -s /nfs/home/testCrane/Crane-FrontEnd/out/sacctmgr /usr/local/bin/sacctmgr 10.\u90e8\u7f72\u6587\u4ef6\u540c\u6b65 \u5728\u6240\u6709\u8282\u70b9\u5b89\u88c5rsync yum -y install rsync # \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f7f\u7528rsync \u2013-help\u547d\u4ee4\u53ef\u67e5\u770b rsync \u76f8\u5173\u4fe1\u606f \u5728CraneCtld\u5b89\u88c5inotify yum install -y epel-release yum --enablerepo=epel install inotify-tools \u7f16\u5199\u76d1\u542c\u811a\u672c\uff0c\u5e76\u5728\u540e\u53f0\u81ea\u52a8\u8fd0\u884c vim /etc/Crane/inotifyrsync.sh ##### inotifywait -mrq --timefmt '%d/%m/%y %H:%M' --format '%T %w%f' -e modify,delete,create,attrib /etc/Crane/ | while read file do for i in {cn01,cn02,cn03,cn04,cn05,cn06,cn07,cn08,cn09,cn10} do rsync -avPz --progress --delete /etc/Crane/ $i:/etc/Crane/ done echo \"${file} was synchronized\" done ######## chmod 755 /etc/Crane/inotifyrsync.sh /etc/Crane/inotifyrsync.sh & echo \"/etc/Crane/inotifyrsync.sh &\" >> /etc/rc.local","title":"centos7 Crane\u73af\u5883\u914d\u7f6e"},{"location":"config/Centos7Configuration/#centos7-crane","text":"","title":"centos7 Crane\u73af\u5883\u914d\u7f6e"},{"location":"config/Centos7Configuration/#1","text":"\u5b89\u88c5ntp ntpdate\u540c\u6b65\u65f6\u949f yum install ntp ntpdate systemctl start ntpd systemctl enable ntpd timedatectl set-timezone Asia/Shanghai \u5173\u95ed\u9632\u706b\u5899\uff0c\u4e0d\u5141\u8bb8\u5173\u95ed\u9632\u706b\u5899\u5219\u8003\u8651\u5f00\u653e10011\u300110010\u3001873\u7aef\u53e3 systemctl stop firewalld systemctl disable firewalld # \u6216\u8005\u5f00\u653e\u7aef\u53e3 firewall-cmd --add-port=10011/tcp --permanent --zone=public firewall-cmd --add-port=10010/tcp --permanent --zone=public firewall-cmd --add-port=873/tcp --permanent --zone=public # \u91cd\u542f\u9632\u706b\u5899(\u4fee\u6539\u914d\u7f6e\u540e\u8981\u91cd\u542f\u9632\u706b\u5899) firewall-cmd --reload Change yum source to tsinghua repo source: rm -rf /etc/yum.repos.d/* vi /etc/yum.repos.d/CentOS-Base.repo Paste the following contents: # CentOS-Base.repo # # The mirror system uses the connecting IP address of the client and the # update status of each mirror to pick mirrors that are updated to and # geographically close to the client. You should use this for CentOS updates # unless you are manually picking other mirrors. # # If the mirrorlist= does not work for you, as a fall back you can try the # remarked out baseurl= line instead. # # [base] name=CentOS-$releasever - Base baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #released updates [updates] name=CentOS-$releasever - Updates baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/updates/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that may be useful [extras] name=CentOS-$releasever - Extras baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/extras/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that extend functionality of existing packages [centosplus] name=CentOS-$releasever - Plus baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/centosplus/$basearch/ #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus gpgcheck=1 enabled=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 yum clean all yum makecache yum install epel-release yum install centos-release-scl-rh","title":"1.\u73af\u5883\u51c6\u5907"},{"location":"config/Centos7Configuration/#2","text":"yum install devtoolset-11 yum install rh-git218 \u4e3a\u4e86\u907f\u514d\u6bcf\u6b21\u624b\u52a8\u751f\u6548\uff0c Then, paste the following contents into ~/.bash_profile vim ~/.bash_profile source scl_source enable rh-git218 source scl_source enable devtoolset-11 Restart bash. \u8fd9\u65f6\u7528gcc --version\u67e5\u8be2\uff0c\u53ef\u4ee5\u770b\u5230\u7248\u672c\u5df2\u7ecf\u662f11.2\u7cfb\u5217\u4e86 $ gcc --version gcc (GCC) 11.2.1 20210728 (Red Hat 11.2.1-1) Copyright (C) 2021 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. \u7ed9\u7cfb\u7edf\u5b89\u88c5\u4e2a\u4e0b\u8f7d\u547d\u4ee4\u5668 yum install wget -y \u5b89\u88c5cmake\u548cninja \u7531\u4e8e\u9700\u8981\u6e90\u7801\u5b89\u88c5\uff0c\u9996\u5148\u9009\u62e9\u5408\u9002\u7684\u6e90\u7801\u5b58\u653e\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u653e\u5728\u81ea\u5df1\u8d26\u53f7\u7684\u76ee\u5f55\u4e0b\u3002 su - liulinxing # \u7528\u6237\u540d mkdir download cd download \u4ecegithub\u4e0b\u8f7d\u6e90\u7801 wget https://github.com/ninja-build/ninja/releases/download/v1.10.2/ninja-linux.zip wget https://github.com/Kitware/CMake/releases/download/v3.21.3/cmake-3.21.3.tar.gz \u89e3\u538b\u7f16\u8bd1\u5b89\u88c5 unzip ninja-linux.zip cp ninja /usr/bin/ yum install openssl-devel tar -zxvf cmake-3.21.3.tar.gz cd cmake-3.12.4 ./bootstrap gmake gmake install \u68c0\u67e5\u5b89\u88c5\u662f\u5426\u6210\u529f cmake --version #cmake version 3.21.3 # #CMake suite maintained and supported by Kitware (kitware.com/cmake).","title":"2.\u5b89\u88c5\u5de5\u5177\u94fe"},{"location":"config/Centos7Configuration/#3c","text":"\u4e0b\u8f7d\u76f8\u5173\u6e90\u7801\u538b\u7f29\u5305\u5230\u4e00\u4e2a\u76ee\u5f55\uff0c\u89e3\u538b\u6240\u6709\u6e90\u7801\u538b\u7f29\u5305 wget https://boostorg.jfrog.io/artifactory/main/release/1.78.0/source/boost_1_78_0.tar.gz tar xzf boost_1_78_0.tar.gz wget https://github.com/fmtlib/fmt/archive/refs/tags/8.0.1.tar.gz tar xzf fmt-8.0.1.tar.gz wget https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz tar xzf libevent-2.1.12-stable.tar.gz wget https://github.com/jarro2783/cxxopts/archive/refs/tags/v2.2.1.tar.gz tar xzf cxxopts-2.2.1.tar.gz wget https://github.com/google/googletest/archive/refs/tags/release-1.11.0.tar.gz tar xzf googletest-release-1.11.0.tar.gz wget https://dist.libuv.org/dist/v1.42.0/libuv-v1.42.0.tar.gz tar xzf libuv-1.42.0.tar.gz wget https://github.com/gabime/spdlog/archive/refs/tags/v1.8.5.tar.gz tar xzf spdlog-1.8.5.tar.gz \u5b89\u88c5\u7b2c\u4e09\u65b9\u5e93 yum install libcgroup-devel yum install libcurl-devel yum install pam-devel cd boost_1_78_0 ./bootstrap.sh ./b2 install --with=all cd .. cd libuv-1.42.0 mkdir build cd build/ cmake -DCMAKE_INSTALL_PREFIX=/nfs/home/testCrane/Crane/dependencies/online/libuv -DCMAKE_CXX_STANDARD=17 -G Ninja .. ninja install # \u8fd0\u884c\u5b89\u88c5\u811a\u672c bash ./download_deps.sh","title":"3.\u5b89\u88c5C++\u5e93"},{"location":"config/Centos7Configuration/#4mariadb","text":"\u901a\u8fc7yum\u5b89\u88c5\u5c31\u884c\u4e86\uff0c\u5b89\u88c5mariadb-server\uff0c\u9ed8\u8ba4\u4f9d\u8d56\u5b89\u88c5mariadb\uff0c\u4e00\u4e2a\u662f\u670d\u52a1\u7aef\u3001\u4e00\u4e2a\u662f\u5ba2\u6237\u7aef\u3002 wget https://downloads.mariadb.com/MariaDB/mariadb_repo_setup chmod +x mariadb_repo_setup ./mariadb_repo_setup yum install MariaDB-server yum install mysql-devel #\u5b89\u88c5\u94fe\u63a5\u5e93 systemctl start mariadb # \u5f00\u542f\u670d\u52a1 systemctl enable mariadb # \u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\u52a8\u670d\u52a1 mariadb-secure-installation # \u9996\u6b21\u5b89\u88c5\u9700\u8981\u8fdb\u884c\u6570\u636e\u5e93\u7684\u914d\u7f6e \u914d\u7f6e\u65f6\u51fa\u73b0\u7684\u5404\u4e2a\u9009\u9879 Enter current password for root (enter for none): # \u8f93\u5165\u6570\u636e\u5e93\u8d85\u7ea7\u7ba1\u7406\u5458root\u7684\u5bc6\u7801(\u6ce8\u610f\u4e0d\u662f\u7cfb\u7edfroot\u7684\u5bc6\u7801)\uff0c\u7b2c\u4e00\u6b21\u8fdb\u5165\u8fd8\u6ca1\u6709\u8bbe\u7f6e\u5bc6\u7801\u5219\u76f4\u63a5\u56de\u8f66 Set root password? [Y/n] # \u8bbe\u7f6e\u5bc6\u7801\uff0cy New password: # \u65b0\u5bc6\u7801 123456 Re-enter new password: # \u518d\u6b21\u8f93\u5165\u5bc6\u7801:123456 Remove anonymous users? [Y/n] # \u79fb\u9664\u533f\u540d\u7528\u6237\uff0c y Disallow root login remotely? [Y/n] # \u62d2\u7eddroot\u8fdc\u7a0b\u767b\u5f55\uff0cn\uff0c\u4e0d\u7ba1y/n\uff0c\u90fd\u4f1a\u62d2\u7eddroot\u8fdc\u7a0b\u767b\u5f55 Remove test database and access to it? [Y/n] # \u5220\u9664test\u6570\u636e\u5e93\uff0cy\uff1a\u5220\u9664\u3002n\uff1a\u4e0d\u5220\u9664\uff0c\u6570\u636e\u5e93\u4e2d\u4f1a\u6709\u4e00\u4e2atest\u6570\u636e\u5e93\uff0c\u4e00\u822c\u4e0d\u9700\u8981 Reload privilege tables now? [Y/n] # \u91cd\u65b0\u52a0\u8f7d\u6743\u9650\u8868\uff0cy\u3002\u6216\u8005\u91cd\u542f\u670d\u52a1\u4e5f\u8bb8 \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u9047\u5230Table doesn\u2019t exist\u62a5\u9519\uff1a ERROR 1146 (42S02) at line 1: Table \u2018mysql.global_priv\u2019 doesn\u2019t exist \u2026 Failed! \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u540e\uff0c\u91cd\u542fmysql mysql_upgrade -uroot -p --force \u91cd\u542f\u6570\u636e\u5e93 systemctl restart mariadb \u767b\u9646\u6570\u636e\u5e93 mysql -uroot -p Enter password: Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 9 Server version: 10.4.8-MariaDB MariaDB Server \u8fdb\u5165mysql\u6570\u636e\u5e93 use mysql \u67e5\u8be2user\u8868\uff0c\u53ef\u770b\u5230\u591a\u6761\u6570\u636e select host,user,password from user; \u5220\u9664localhost\u4ee5\u5916\u6570\u636e delete from user where host !='localhost'; \u914d\u7f6e\u5b8c\u6bd5\uff0c\u9000\u51fa exit; systemctl restart mariadb","title":"4.\u5b89\u88c5mariadb"},{"location":"config/Centos7Configuration/#5mongodb","text":"# \u4e0b\u8f7d\u5e76\u89e3\u538b\u5b89\u88c5\u5305 wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.9.tgz tar -zxvf mongodb-linux-x86_64-rhel70-5.0.9.tgz # \u91cd\u547d\u540d mv mongodb-linux-x86_64-rhel70-5.0.9 /opt/mongodb # \u6dfb\u52a0\u73af\u5883\u53d8\u91cf vim /etc/profile \u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff08\u8def\u5f84\u5e94\u5bf9\u5e94MongoDB\u5b89\u88c5\u8def\u5f84\uff09 export MONGODB_HOME=/opt/mongodb export PATH=$PATH:${MONGODB_HOME}/bin # \u4f7f\u73af\u5883\u53d8\u91cf\u751f\u6548 source /etc/profile # \u521b\u5efadb\u76ee\u5f55\u548clog\u76ee\u5f55 cd /opt/mongodb-linux-x86_64-rhel70-5.0.3 mkdir -p ./data/db mkdir -p ./logs touch ./logs/mongodb.log \u521b\u5efamongodb.conf\u914d\u7f6e\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff08\u8def\u5f84\u5e94\u5bf9\u5e94\u4e4b\u524d\u521b\u5efa\u7684db/log\u76ee\u5f55\uff09\uff1a #\u7aef\u53e3\u53f7 port=27017 #db\u76ee\u5f55 dbpath=/opt/mongodb/data/db #\u65e5\u5fd7\u76ee\u5f55 logpath=/opt/mongodb/logs/mongodb.log #\u540e\u53f0 fork=true #\u65e5\u5fd7\u8f93\u51fa logappend=true #\u5141\u8bb8\u8fdc\u7a0bIP\u8fde\u63a5 bind_ip=0.0.0.0 #\u5f00\u542f\u6743\u9650\u9a8c\u8bc1 auth=true \u542f\u52a8\u6d4b\u8bd5 mongod --config /opt/mongodb/mongodb.conf mongo \u521b\u5efa\u7528\u6237 use admin db.createUser({ user:'admin',//\u7528\u6237\u540d pwd:'123456',//\u5bc6\u7801 roles:[{ role:'root',db:'admin'}]//root \u4ee3\u8868\u8d85\u7d1a\u7ba1\u7406\u5458\u6743\u9650 admin\u4ee3\u8868\u7ed9admin\u6570\u636e\u5e93\u52a0\u7684\u8d85\u7ea7\u7ba1\u7406\u5458 }) use Crane_db db.createUser({ user:\"crane\", pwd:\"123456\", roles:[{role:\"dbOwner\",db:\"Crane_db\"}] }) db.shutdownServer() //\u91cd\u542f\u524d\u5148\u5173\u95ed\u670d\u52a1\u5668 \u91cd\u65b0\u542f\u52a8MongoDB\u6570\u636e\u5e93 mongod --config /opt/mongodb/mongodb.conf \u7f16\u8f91\u5f00\u673a\u542f\u52a8 vi /etc/rc.local # \u52a0\u5165\u5982\u4e0b\u8bed\u53e5\uff0c\u4ee5\u4fbf\u542f\u52a8\u65f6\u6267\u884c\uff1a mongod --config /opt/mongodb/mongodb.conf","title":"5.\u5b89\u88c5MongoDB"},{"location":"config/Centos7Configuration/#6mongodb-c","text":"\u53c2\u8003 http://mongocxx.org/mongocxx-v3/installation/linux/ \u5b89\u88c5mongo-c-driver wget https://github.com/mongodb/mongo-c-driver/releases/download/1.21.1/mongo-c-driver-1.21.1.tar.gz tar xzf mongo-c-driver-1.21.1.tar.gz cd mongo-c-driver-1.21.1 mkdir cmake-build cd cmake-build cmake -DENABLE_AUTOMATIC_INIT_AND_CLEANUP=OFF -DCMAKE_INSTALL_PREFIX=/nfs/home/liulinxing/Crane/dependencies/online/mongo-c-driver .. sudo make && make install \u5b89\u88c5mongo-cxx-driver curl -OL https://github.com/mongodb/mongo-cxx-driver/archive/r3.6.5.tar.gz cd mongo-cxx-driver-r3.6.5/build/ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/nfs/home/liulinxing/Crane/dependencies/online/mongo-driver .. sudo make EP_mnmlstc_core make sudo make install","title":"6.\u5b89\u88c5MongoDB C++\u9a71\u52a8"},{"location":"config/Centos7Configuration/#7","text":"\u9996\u5148\u8fdb\u5165\u5230\u9879\u76ee\u76ee\u5f55\u4e0b mkdir build cd build/ cmake -DCMAKE_CXX_STANDARD=17 -G Ninja .. cmake --build .","title":"7.\u7f16\u8bd1\u7a0b\u5e8f"},{"location":"config/Centos7Configuration/#8pam","text":"\u9996\u6b21\u7f16\u8bd1\u5b8c\u6210\u540e\u9700\u8981\u5c06pam\u6a21\u5757\u52a8\u6001\u94fe\u63a5\u5e93\u653e\u5165\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e cp Crane/build/src/Misc/Pam/pam_Crane.so /usr/lib64/security/ \u540c\u65f6\u8ba1\u7b97\u8282\u70b9\u201c/etc/security/access.conf\u201d\u6587\u4ef6\u7981\u6b62\u975eroot\u7528\u6237\u767b\u5f55 Required pam_access.so","title":"8.Pam\u6a21\u5757"},{"location":"config/Centos7Configuration/#9go","text":"\u5b89\u88c5go\u8bed\u8a00 cd download/ wget https://golang.google.cn/dl/go1.17.3.linux-amd64.tar.gz tar -C /usr/local -xzf go1.17.3.linux-amd64.tar.gz # \u5728 /etc/profile\u4e2d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf export PATH=$PATH:/usr/local/go/bin source /etc/profile go version #\u8bbe\u7f6e\u4ee3\u7406 go env -w GOPROXY=https://goproxy.cn,direct # \u5b89\u88c5\u63d2\u4ef6 go install google.golang.org/protobuf/cmd/protoc-gen-go@latest go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest cp /root/go/bin/protoc-gen-go-grpc /usr/local/bin/ cp /root/go/bin/protoc-gen-go /usr/local/bin/ \u5b89\u88c5protuc https://github.com/protocolbuffers/protobuf/releases/download/v3.19.4/protobuf-all-3.19.4.tar.gz tar -xzf protobuf-all-3.19.4.tar.gz cd protobuf-3.19.4 ./configure -prefix=/usr/local/ make && make install protoc --version # libprotoc 3.11.2 \u62c9\u53d6\u9879\u76ee git clone https://github.com/RileyWen/Crane-FrontEnd.git # \u514b\u9686\u9879\u76ee\u4ee3\u7801 mkdir Crane-FrontEnd/out mkdir Crane-FrontEnd/generated/protos \u7f16\u8bd1\u9879\u76ee # \u5728Crane-FrontEnd/protos\u76ee\u5f55\u4e0b protoc --go_out=../generated --go-grpc_out=../generated ./* # \u5728Crane-FrontEnd/out\u76ee\u5f55\u4e0b go build Crane-FrontEnd/cmd/sbatchx/sbatchx.go \u90e8\u7f72\u524d\u7aef\u547d\u4ee4 ln -s /nfs/home/testCrane/Crane-FrontEnd/out/sbatchx /usr/local/bin/sbatchx ln -s /nfs/home/testCrane/Crane-FrontEnd/out/scontrol /usr/local/bin/scontrol ln -s /nfs/home/testCrane/Crane-FrontEnd/out/sacctmgr /usr/local/bin/sacctmgr","title":"9.\u914d\u7f6e\u524d\u7aefgo\u8bed\u8a00\u73af\u5883"},{"location":"config/Centos7Configuration/#10","text":"\u5728\u6240\u6709\u8282\u70b9\u5b89\u88c5rsync yum -y install rsync # \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f7f\u7528rsync \u2013-help\u547d\u4ee4\u53ef\u67e5\u770b rsync \u76f8\u5173\u4fe1\u606f \u5728CraneCtld\u5b89\u88c5inotify yum install -y epel-release yum --enablerepo=epel install inotify-tools \u7f16\u5199\u76d1\u542c\u811a\u672c\uff0c\u5e76\u5728\u540e\u53f0\u81ea\u52a8\u8fd0\u884c vim /etc/Crane/inotifyrsync.sh ##### inotifywait -mrq --timefmt '%d/%m/%y %H:%M' --format '%T %w%f' -e modify,delete,create,attrib /etc/Crane/ | while read file do for i in {cn01,cn02,cn03,cn04,cn05,cn06,cn07,cn08,cn09,cn10} do rsync -avPz --progress --delete /etc/Crane/ $i:/etc/Crane/ done echo \"${file} was synchronized\" done ######## chmod 755 /etc/Crane/inotifyrsync.sh /etc/Crane/inotifyrsync.sh & echo \"/etc/Crane/inotifyrsync.sh &\" >> /etc/rc.local","title":"10.\u90e8\u7f72\u6587\u4ef6\u540c\u6b65"}]}